/**
 * grid.js - v0.1.0 - 2015-01-14
 * https://openpsa.github.com/grid.js
 *
 * Copyright (c) 2015 Tony Tomov, Oleg Kiriljuk, Andreas Flack, Laurent Rajchenbach, Matthew Hutton and other contributors to jqGrid before version 4.7.1
 * Dual-licensed under the MIT and GPL-2.0 licenses.
 */
function tableToGrid(a,b){jQuery(a).each(function(){if(!this.grid){jQuery(this).width("99%");var a=jQuery(this).width(),c=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),d=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),e=c.length>0,f=!e&&d.length>0,g=e||f,h=[],i=[];jQuery("th",jQuery(this)).each(function(){0===h.length&&g?(h.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),i.push("__selection__")):(h.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),i.push(jQuery(this).html()))});var j=[],k=[],l=[];jQuery("tbody > tr",jQuery(this)).each(function(){var a={},b=0;jQuery("td",jQuery(this)).each(function(){if(0===b&&g){var c=jQuery("input",jQuery(this)),d=c.attr("value");k.push(d||j.length),c.is(":checked")&&l.push(d),a[h[b].name]=c.attr("value")}else a[h[b].name]=jQuery(this).html();b++}),b>0&&j.push(a)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:a,colNames:i,colModel:h,multiselect:e},b||{}));var m;for(m=0;m<j.length;m++){var n=null;k.length>0&&(n=k[m],n&&n.replace&&(n=encodeURIComponent(n).replace(/[.\-%]/g,"_"))),null===n&&(n=m+1),jQuery(this).jqGrid("addRowData",n,j[m])}for(m=0;m<l.length;m++)jQuery(this).jqGrid("setSelection",l[m])}})}!function($){"use strict";var englishLanguageDefaults={defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(a){return 11>a||a>13?["st","nd","rd","th"][Math.min((a-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};$.jgrid=$.jgrid||{},$.extend(!0,$.jgrid,{version:"4.7.0-post",cmTemplate:{integer:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},actions:{formatter:"actions",width:53,align:"center",autoResizable:!1,fixed:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}},formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!1,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0},idName:"id",unused:""},htmlDecode:function(a){return a&&("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))?"":a?String(a).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):a},htmlEncode:function(a){return a?String(a).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a},format:function(a){var b=$.makeArray(arguments).slice(1);return null==a&&(a=""),a.replace(/\{(\d+)\}/g,function(a,c){return b[c]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var a=-1,b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=c.exec(b)&&(a=parseFloat(RegExp.$1)),a},getCellIndex:function(a){var b=$(a);return b.is("tr")?-1:(b=(b.is("td")||b.is("th")?b:b.closest("td,th"))[0],$.jgrid.msie?$.inArray(b,b.parentNode.cells):b.cellIndex)},stripHtml:function(a){a=String(a);var b=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return a?(a=a.replace(b,""),a&&"&nbsp;"!==a&&"&#160;"!==a?a.replace(/\"/g,"'"):""):a},stripPref:function(a,b){var c=$.type(a);return("string"===c||"number"===c)&&(a=String(a),b=""!==a?String(b).replace(String(a),""):b),b},parse:function(jsonString){var js=jsonString;return"while(1);"===js.substr(0,9)&&(js=js.substr(9)),"/*"===js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(a,b,c,d){var e,f,g,h=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,j=/[^-+\dA-Z]/g,k=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),l="string"==typeof b?b.match(k):null,m=function(a,b){for(a=String(a),b=parseInt(b,10)||2;a.length<b;)a="0"+a;return a},n={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},o=0,p=function(a,b){return 0===a?12===b&&(b=0):12!==b&&(b+=12),b},q=0;if(void 0===d&&(d=$.jgrid.formatter.date),void 0===d.parseRe&&(d.parseRe=/[#%\\\/:_;.,\t\s-]/),d.masks.hasOwnProperty(a)&&(a=d.masks[a]),b&&null!=b)if(isNaN(b-0)||"u"!==String(a).toLowerCase())if(b.constructor===Date)o=b;else if(null!==l)o=new Date(parseInt(l[1],10)),l[3]&&(q=60*Number(l[5])+Number(l[6]),q*="-"===l[4]?1:-1,q-=o.getTimezoneOffset(),o.setTime(Number(Number(o)+60*q*1e3)));else{for("ISO8601Long"===d.srcformat&&"Z"===b.charAt(b.length-1)&&(q-=(new Date).getTimezoneOffset()),b=String(b).replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe),a=a.replace(/\T/g,"#").replace(/\t/,"%").split(d.parseRe),f=0,g=a.length;g>f;f++)"M"===a[f]&&(e=$.inArray(b[f],d.monthNames),-1!==e&&12>e&&(b[f]=e+1,n.m=b[f])),"F"===a[f]&&(e=$.inArray(b[f],d.monthNames,12),-1!==e&&e>11&&(b[f]=e+1-12,n.m=b[f])),"a"===a[f]&&(e=$.inArray(b[f],d.AmPm),-1!==e&&2>e&&b[f]===d.AmPm[e]&&(b[f]=e,n.h=p(b[f],n.h))),"A"===a[f]&&(e=$.inArray(b[f],d.AmPm),-1!==e&&e>1&&b[f]===d.AmPm[e]&&(b[f]=e-2,n.h=p(b[f],n.h))),"g"===a[f]&&(n.h=parseInt(b[f],10)),void 0!==b[f]&&(n[a[f].toLowerCase()]=parseInt(b[f],10));if(n.f&&(n.m=n.f),0===n.m&&0===n.y&&0===n.d)return"&#160;";n.m=parseInt(n.m,10)-1;var r=n.y;r>=70&&99>=r?n.y=1900+n.y:r>=0&&69>=r&&(n.y=2e3+n.y),o=new Date(n.y,n.m,n.d,n.h,n.i,n.s,n.u),q>0&&o.setTime(Number(Number(o)+60*q*1e3))}else o=new Date(1e3*parseFloat(b));else o=new Date(n.y,n.m,n.d,n.h,n.i,n.s,n.u);if(d.userLocalTime&&0===q&&(q-=(new Date).getTimezoneOffset(),q>0&&o.setTime(Number(Number(o)+60*q*1e3))),void 0===c)return o;d.masks.hasOwnProperty(c)?c=d.masks[c]:c||(c="Y-m-d");var s=o.getHours(),t=o.getMinutes(),u=o.getDate(),v=o.getMonth()+1,w=o.getTimezoneOffset(),x=o.getSeconds(),y=o.getMilliseconds(),z=o.getDay(),A=o.getFullYear(),B=(z+6)%7+1,C=(new Date(A,v-1,u)-new Date(A,0,1))/864e5,D={d:m(u),D:d.dayNames[z],j:u,l:d.dayNames[z+7],N:B,S:d.S(u),w:z,z:C,W:5>B?Math.floor((C+B-1)/7)+1:Math.floor((C+B-1)/7)||((new Date(A-1,0,1).getDay()+6)%7<4?53:52),F:d.monthNames[v-1+12],m:m(v),M:d.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:A,y:String(A).substring(2),a:12>s?d.AmPm[0]:d.AmPm[1],A:12>s?d.AmPm[2]:d.AmPm[3],B:"?",g:s%12||12,G:s,h:m(s%12||12),H:m(s),i:m(t),s:m(x),u:y,e:"?",I:"?",O:(w>0?"-":"+")+m(100*Math.floor(Math.abs(w)/60)+Math.abs(w)%60,4),P:"?",T:(String(o).match(i)||[""]).pop().replace(j,""),Z:"?",c:"?",r:"?",U:Math.floor(o/1e3)};return c.replace(h,function(a){return D.hasOwnProperty(a)?D[a]:a.substring(1)})},jqID:function(a){return String(a).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(a){return(a||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(a,b){var c,d,e,f=[];if("function"==typeof b)return b(a);if(c=a[b],void 0===c)try{if("string"==typeof b&&(f=b.split(".")),e=f.length)for(c=a;c&&e--;)d=f.shift(),c=c[d]}catch(g){}return c},getXmlData:function(a,b,c){var d,e="string"==typeof b?b.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof b?b(a):e&&e[2]?e[1]?$(e[1],a).attr(e[2]):$(a).attr(e[2]):(d=$(b,a),c?d:d.length>0?$(d).text():void 0)},cellWidth:function(){var a=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div>"),b=a.appendTo("body").find("td").width();return a.remove(),Math.abs(b-5)>.1},cell_width:!0,ajaxOptions:{},from:function(source){var QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"!=typeof d[0]?!1:!0),this._hasData=function(){return null===_data?!1:0===_data.length?!1:!0},this._getStr=function(a){var b=[];return _trim&&b.push("jQuery.trim("),b.push("String("+a+")"),_trim&&b.push(")"),_usecase||b.push(".toLowerCase()"),b.join("")},this._strComp=function(a){return"string"==typeof a?".toString()":""},this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}},this._toStr=function(a){return _trim&&(a=$.trim(a)),a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?a:a.toLowerCase()},this._funcLoop=function(a){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b},this._append=function(a){var b;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,b=0;_orDepth>b;b++)_query+="(";_negate&&(_query+="!"),_query+="("+a+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(a,b){_lastCommand=a,_lastField=b},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(a,b){return null===_lastCommand?self:null!==a&&null!==b?_lastCommand(a,b):null===_lastField?_lastCommand(a):_useProperties?_lastCommand(_lastField,a):_lastCommand(a)},this._equals=function(a,b){return 0===self._compare(a,b,1)},this._compare=function(a,b,c){var d=Object.prototype.toString;return void 0===c&&(c=1),void 0===a&&(a=null),void 0===b&&(b=null),null===a&&null===b?0:null===a&&null!==b?1:null!==a&&null===b?-1:"[object Date]"===d.call(a)&&"[object Date]"===d.call(b)?b>a?-c:a>b?c:0:(_usecase||"number"==typeof a||"number"==typeof b||(a=String(a),b=String(b)),b>a?-c:a>b?c:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(a,b){var c=_sorting[b].by,d=_sorting[b].dir,e=_sorting[b].type,f=_sorting[b].datefmt,g=_sorting[b].sfunc;if(b===_sorting.length-1)return self._getOrder(a,c,d,e,f,g);b++;var h,i,j,k=self._getGroup(a,c,d,e,f),l=[];for(h=0;h<k.length;h++)for(j=self._doSort(k[h].items,b),i=0;i<j.length;i++)l.push(j[i]);return l},this._getOrder=function(a,b,c,d,e,f){var g,h,i,j,k=[],l=[],m="a"===c?1:-1;void 0===d&&(d="text"),j="float"===d||"number"===d||"currency"===d||"numeric"===d?function(a){var b=parseFloat(String(a).replace(_stripNum,""));return isNaN(b)?Number.NEGATIVE_INFINITY:b}:"int"===d||"integer"===d?function(a){return a?parseFloat(String(a).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===d||"datetime"===d?function(a){return $.jgrid.parseDate(e,a).getTime()}:$.isFunction(d)?d:function(a){return a=a?$.trim(String(a)):"",_usecase?a:a.toLowerCase()},$.each(a,function(a,c){h=""!==b?$.jgrid.getAccessor(c,b):c,void 0===h&&(h=""),h=j(h,c),l.push({vSort:h,index:a})}),l.sort($.isFunction(f)?function(a,b){return a=a.vSort,b=b.vSort,f.call(this,a,b,m)}:function(a,b){return a=a.vSort,b=b.vSort,self._compare(a,b,m)}),i=0;for(var n=a.length;n>i;)g=l[i].index,k.push(a[g]),i++;return k},this._getGroup=function(a,b,c,d,e){var f,g=[],h=null,i=null;return $.each(self._getOrder(a,b,c,d,e),function(a,c){f=$.jgrid.getAccessor(c,b),null==f&&(f=""),self._equals(i,f)||(i=f,null!==h&&g.push(h),h=self._group(b,f)),h.items.push(c)}),null!==h&&g.push(h),g},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(a){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(a)){var b=[];return $.each(_data,function(c,d){b.push(a(d))}),b}return _data},this.hasMatch=function(){return self._hasData()?(self.execute(),_data.length>0):!1},this.andNot=function(a,b,c){return _negate=!_negate,self.and(a,b,c)},this.orNot=function(a,b,c){return _negate=!_negate,self.or(a,b,c)},this.not=function(a,b,c){return self.andNot(a,b,c)},this.and=function(a,b,c){return _queuedOperator=" && ",void 0===a?self:self._repeatCommand(a,b,c)},this.or=function(a,b,c){return _queuedOperator=" || ",void 0===a?self:self._repeatCommand(a,b,c)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(a){return _negate=!_negate,self.is(a)},this.is=function(a){return self._append("this."+a),self._resetNegate(),self},this._compareValues=function(a,b,c,d,e){var f;f=_useProperties?"jQuery.jgrid.getAccessor(this,'"+b+"')":"this",void 0===c&&(c=null);var g=c,h=void 0===e.stype?"text":e.stype;if(null!==c)switch(h){case"int":case"integer":g=isNaN(Number(g))||""===g?"0":g,f="parseInt("+f+",10)",g="parseInt("+g+",10)";break;case"float":case"number":case"numeric":g=String(g).replace(_stripNum,""),g=isNaN(Number(g))||""===g?"0":g,f="parseFloat("+f+")",g="parseFloat("+g+")";break;case"date":case"datetime":g=String($.jgrid.parseDate(e.newfmt||"Y-m-d",g).getTime()),f='jQuery.jgrid.parseDate("'+e.srcfmt+'",'+f+").getTime()";break;default:f=self._getStr(f),g=self._getStr('"'+self._toStr(g)+'"')}return self._append(f+" "+d+" "+g),self._setCommand(a,b),self._resetNegate(),self},this.equals=function(a,b,c){return self._compareValues(self.equals,a,b,"==",c)},this.notEquals=function(a,b,c){return self._compareValues(self.equals,a,b,"!==",c)},this.isNull=function(a,b,c){return self._compareValues(self.equals,a,null,"===",c)},this.greater=function(a,b,c){return self._compareValues(self.greater,a,b,">",c)},this.less=function(a,b,c){return self._compareValues(self.less,a,b,"<",c)},this.greaterOrEquals=function(a,b,c){return self._compareValues(self.greaterOrEquals,a,b,">=",c)},this.lessOrEquals=function(a,b,c){return self._compareValues(self.lessOrEquals,a,b,"<=",c)},this.startsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(b)+'"')):(null!=b&&(d=_trim?$.trim(b.toString()).length:b.toString().length),self._append(self._getStr("this")+".substr(0,"+d+") == "+self._getStr('"'+self._toStr(a)+'"'))),self._setCommand(self.startsWith,a),self._resetNegate(),self},this.endsWith=function(a,b){var c=null==b?a:b,d=_trim?$.trim(c.toString()).length:c.toString().length;return self._append(_useProperties?self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+d+","+d+') == "'+self._toStr(b)+'"':self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(a)+'".length,"'+self._toStr(a)+'".length) == "'+self._toStr(a)+'"'),self._setCommand(self.endsWith,a),self._resetNegate(),self},this.contains=function(a,b){return self._append(_useProperties?self._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+self._toStr(b)+'",0) > -1':self._getStr("this")+'.indexOf("'+self._toStr(a)+'",0) > -1'),self._setCommand(self.contains,a),self._resetNegate(),self},this.groupBy=function(a,b,c,d){return self._hasData()?self._getGroup(_data,a,b,c,d):null},this.orderBy=function(a,b,c,d,e){return b=null==b?"a":$.trim(b.toString().toLowerCase()),null==c&&(c="text"),null==d&&(d="Y-m-d"),null==e&&(e=!1),("desc"===b||"descending"===b)&&(b="d"),("asc"===b||"ascending"===b)&&(b="a"),_sorting.push({by:a,dir:b,type:c,datefmt:d,sfunc:e}),self},self};return new QueryObject(source,null)},getMethod:function(a){return this.getAccessor($.fn.jqGrid,a)},extend:function(a){$.extend($.fn.jqGrid,a),this.no_legacy_api||$.fn.extend(a)}}),$.fn.jqGrid=function(a){if("string"==typeof a){var b=$.jgrid.getMethod(a);if(!b)throw"jqGrid - No such method: "+a;var c=$.makeArray(arguments).slice(1);return b.apply(this,c)}return this.each(function(){if(!this.grid){var b,c=$.jgrid,d=null!=c.defaults&&$.isFunction(c.defaults.fatalError)?c.defaults.fatalError:alert;null!=a&&void 0!==a.data&&(b=a.data,a.data=[]),null==c.defaults&&$.extend(!0,$.jgrid,englishLanguageDefaults),(null==c.formatter||null==c.formatter.unused)&&d("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n	$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n	$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken.");var e=$.extend(!0,{url:"",height:"auto",page:1,rowNum:20,maxRowNum:1e4,autoresizeOnLoad:!1,autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",widthOfVisiblePartOfSortIcon:12,minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"local",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"clientArray",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!0,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},c.defaults,a||{});void 0!==b&&(e.data=b,a.data=b);var f=this,g=function(a){var b=$(this).data("pageX");b?(b=String(b).split(";"),b=b[b.length-1],$(this).data("pageX",b+";"+a.pageX)):$(this).data("pageX",a.pageX)},h=c.jqID,i=c.getAccessor,j=c.stripPref,k=c.getCellIndex,l={headers:[],cols:[],footers:[],dragStart:function(a,b,c){var d=$(this.bDiv).offset().left;this.resizing={idx:a,startX:b.pageX,sOL:b.pageX-d,moved:!1},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+h(e.id),"#gbox_"+h(e.id)),this.curGbox.css({display:"block",left:b.pageX-d,top:c[1],height:c[2]}),this.curGbox.data("idx",a),g.call(this.curGbox,b),$(f).triggerHandler("jqGridResizeStart",[b,a]),$.isFunction(e.resizeStart)&&e.resizeStart.call(f,b,a),document.onselectstart=function(){return!1}},dragMove:function(a){if(this.resizing){var b,c,d=a.pageX-this.resizing.startX,f=this.headers[this.resizing.idx],g="ltr"===e.direction?f.width+d:f.width-d;this.resizing.moved=!0,g>33&&(null==this.curGbox&&(this.curGbox=$("#rs_m"+h(e.id),"#gbox_"+h(e.id))),this.curGbox.css({left:this.resizing.sOL+d}),e.forceFit===!0?(b=this.headers[this.resizing.idx+e.nv],c="ltr"===e.direction?b.width-d:b.width+d,c>e.autoResizing.minColWidth&&(f.newWidth=g,b.newWidth=c)):(this.newWidth="ltr"===e.direction?e.tblwidth+d:e.tblwidth-d,f.newWidth=g))}},resizeColumn:function(a,b,c){var d=b.p,e=this.headers[a].newWidth||this.headers[a].width;e=parseInt(e,10),d.colModel[a].width=e,this.headers[a].width=e,this.headers[a].el.style.width=e+"px",this.cols[a].style.width=e+"px",this.footers.length>0&&(this.footers[a].style.width=e+"px"),d.forceFit===!0?(e=this.headers[a+d.nv].newWidth||this.headers[a+d.nv].width,this.headers[a+d.nv].width=e,this.headers[a+d.nv].el.style.width=e+"px",this.cols[a+d.nv].style.width=e+"px",this.footers.length>0&&(this.footers[a+d.nv].style.width=e+"px"),d.colModel[a+d.nv].width=e):(d.tblwidth=this.newWidth||d.tblwidth,$("table:first",this.bDiv).css("width",d.tblwidth+"px"),$("table:first",this.hDiv).css("width",d.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,d.footerrow&&($("table:first",this.sDiv).css("width",d.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),c||($(b).triggerHandler("jqGridResizeStop",[e,a]),$.isFunction(d.resizeStop)&&d.resizeStop.call(b,e,a))},dragEnd:function(){this.hDiv.style.cursor="default",this.resizing&&(null!==this.resizing&&this.resizing.moved===!0&&this.resizeColumn(this.resizing.idx,f),$("#rs_m"+h(e.id)).removeData("pageX"),this.resizing=!1,setTimeout(function(){$("#rs_m"+h(e.id)).css("display","none")},e.doubleClickSensitivity)),this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){l.timer&&clearTimeout(l.timer),l.timer=null;var a=$(l.bDiv).height();if(a){var b,c,d=$("table:first",l.bDiv);if(d[0].rows.length)try{b=d[0].rows[1],c=b?$(b).outerHeight()||l.prevRowHeight:l.prevRowHeight}catch(f){c=l.prevRowHeight}if(c){l.prevRowHeight=c;var g,h,i,j=e.rowNum,k=l.scrollTop=l.bDiv.scrollTop,m=Math.round(d.position().top)-k,n=m+d.height(),o=c*j;if(a>n&&0>=m&&(void 0===e.lastpage||(parseInt((n+k+o-1)/o,10)||0)<=e.lastpage)&&(h=parseInt((a-n+o-1)/o,10)||1,n>=0||2>h||e.scroll===!0?(g=(Math.round((n+k)/o)||0)+1,m=-1):m=1),m>0&&(g=(parseInt(k/o,10)||0)+1,h=(parseInt((k+a)/o,10)||0)+2-g,i=!0),h){if(e.lastpage&&(g>e.lastpage||1===e.lastpage||g===e.page&&g===e.lastpage))return;l.hDiv.loading?l.timer=setTimeout(l.populateVisible,e.scrollTimeout):(e.page=g,i&&(l.selectionPreserver(d[0]),l.emptyRows.call(d[0],!1,!1)),l.populate(h))}}}},scrollGrid:function(a){if(e.scroll){var b=l.bDiv.scrollTop;void 0===l.scrollTop&&(l.scrollTop=0),b!==l.scrollTop&&(l.scrollTop=b,l.timer&&clearTimeout(l.timer),l.timer=setTimeout(l.populateVisible,e.scrollTimeout))}l.hDiv.scrollLeft=l.bDiv.scrollLeft,e.footerrow&&(l.sDiv.scrollLeft=l.bDiv.scrollLeft),a&&a.stopPropagation()},selectionPreserver:function(a){var b=a.p,c=b.selrow,d=b.selarrrow?$.makeArray(b.selarrrow):null,e=a.grid.bDiv.scrollLeft,f=function(){var g;if(b.selrow=null,b.selarrrow=[],b.multiselect&&d&&d.length>0)for(g=0;g<d.length;g++)d[g]!==c&&$(a).jqGrid("setSelection",d[g],!1,null);c&&$(a).jqGrid("setSelection",c,!1,null),a.grid.bDiv.scrollLeft=e,$(a).unbind(".selectionPreserver",f)};$(a).bind("jqGridGridComplete.selectionPreserver",f)}};if("TABLE"!==this.tagName.toUpperCase()||null==this.id)return void d("Element is not a table or has no id!");if(void 0!==document.documentMode&&document.documentMode<=5)return void d("Grid can not be used in this ('quirks') mode!");$(this).empty().attr("tabindex","0"),this.p=e,this.p.useProp=!!$.fn.prop;var m,n;if(0===this.p.colNames.length)for(m=0;m<this.p.colModel.length;m++)this.p.colNames[m]=this.p.colModel[m].label||this.p.colModel[m].name;if(this.p.colNames.length!==this.p.colModel.length)return void d(c.errors.model);var o=$("<div class='ui-jqgrid-view' role='grid' aria-multiselectable='"+!!this.p.multiselect+"'></div>"),p=c.msie,q=p&&c.msiever()<8;f.p.direction=$.trim(f.p.direction.toLowerCase()),-1===$.inArray(f.p.direction,["ltr","rtl"])&&(f.p.direction="ltr"),n=f.p.direction,$(o).insertBefore(this),$(this).removeClass("scroll").appendTo(o);var r=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(r).attr({id:"gbox_"+this.id,dir:n}).insertBefore(o),$(o).attr("id","gview_"+this.id).appendTo(r),$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(o),$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(o),$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"presentation","aria-labelledby":"gbox_"+this.id});var s,t=["shiftKey","altKey","ctrlKey"],u=function(a,b){return a=parseInt(a,10),isNaN(a)?b||0:a},v=function(a,b,d,e,g,h){var i,j,k=f.p.colModel[a],m=k.align,n='style="',o=k.classes,p=k.name,q=[];return m&&(n+="text-align:"+m+";"),k.hidden===!0&&(n+="display:none;"),0===b?n+="width: "+l.headers[a].width+"px;":($.isFunction(k.cellattr)||"string"==typeof k.cellattr&&null!=c.cellattr&&$.isFunction(c.cellattr[k.cellattr]))&&(i=$.isFunction(k.cellattr)?k.cellattr:c.cellattr[k.cellattr],j=i.call(f,g,d,e,k,h),j&&"string"==typeof j&&(j=j.replace(/style/i,"style").replace(/title/i,"title"),j.indexOf("title")>-1&&(k.title=!1),j.indexOf("class")>-1&&(o=void 0),q=j.replace(/\-style/g,"-sti").split(/style/),2===q.length?(q[1]=$.trim(q[1].replace(/\-sti/g,"-style").replace("=","")),(0===q[1].indexOf("'")||0===q[1].indexOf('"'))&&(q[1]=q[1].substring(1)),n+=q[1].replace(/'/gi,'"')):n+='"')),q.length||(q[0]="",n+='"'),n+=(void 0!==o?' class="'+o+'"':"")+(k.title&&d?' title="'+c.stripHtml(d)+'"':""),n+=' aria-describedby="'+f.p.id+"_"+p+'"',n+q[0]},w=function(a){return null==a||""===a?"&#160;":f.p.autoencode?c.htmlEncode(a):String(a)},x=function(a,b,c,d,e){var g=f.p.colModel[c];if(void 0!==g.formatter){a=""!==String(f.p.idPrefix)?j(f.p.idPrefix,a):a;var h={rowId:a,colModel:g,gid:f.p.id,pos:c};if($.isFunction(g.formatter))return g.formatter.call(f,b,h,d,e);if($.fmatter)return $.fn.fmatter.call(f,g.formatter,b,h,d,e)}else if(g.name===f.p.jsonReader.id)return""!==String(f.p.idPrefix)?$.jgrid.stripPref(f.p.idPrefix,a):a;return g.autoResizable&&"actions"!==g.formatter?"<span class='"+f.p.autoResizing.wrapperClassName+"'>"+w(b)+"</span>":w(b)},y=function(a,b,c,d,e,f){var g,h;return g=x(a,b,c,e,"add"),h=v(c,d,g,e,a,f),'<td role="gridcell" '+h+">"+g+"</td>"},z=function(a,b,c,d){var e='<input role="checkbox" type="checkbox" id="jqg_'+f.p.id+"_"+a+'" class="cbox" name="jqg_'+f.p.id+"_"+a+'"'+(d?' checked="checked" aria-checked="true"':' aria-checked="false"')+"/>",g=v(b,c,"",null,a,!0);return'<td role="gridcell" '+g+">"+e+"</td>"},A=function(a,b,c,d){var e=(parseInt(c,10)-1)*parseInt(d,10)+1+b,f=v(a,b,e,null,b,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+f+">"+e+"</td>"},B=function(a){var b,c,d=[],e=0;for(c=0;c<f.p.colModel.length;c++)b=f.p.colModel[c],"cb"!==b.name&&"subgrid"!==b.name&&"rn"!==b.name&&(d[e]="xml"===a||"xmlstring"===a?b.xmlmap||b.name:"local"!==a||f.p.dataTypeOrg?b.name:b.jsonmap||b.name,f.p.keyName!==!1&&b.key===!0&&(f.p.keyName=d[e]),e++);return d},C=function(a){var b=f.p.remapColumns;return b&&b.length||(b=$.map(f.p.colModel,function(a,b){return b})),a&&(b=$.map(b,function(b){return a>b?null:b-a})),b},D=function(a,b){var c;this.p.deepempty?$(this.rows).slice(1).remove():(c=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(c)),a&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),b===!0&&this.p.treeGrid&&(this.p.data=[],this.p.lastSelectedData=[],this.p._index={})},E=function(){var a,b,d,e,g,h,j,k,l,m,n,o,p=f.p,q=p.data,r=q.length,s=p.localReader,t=p.colModel,u=s.cell,v=(p.multiselect===!0?1:0)+(p.subGrid===!0?1:0)+(p.rownumbers===!0?1:0),w=p.scroll?c.randId():1;if("local"===p.datatype&&s.repeatitems===!0){for(m=C(v),n=B("local"),g=p.keyName===!1?$.isFunction(s.id)?s.id.call(f,q):s.id:p.keyName,isNaN(g)||(h=Number(g)),a=0;a<t.length;a++)if(t[a].name===g){h=a;break}for(a=0;r>a;a++){for(d=q[a],e=u?i(d,u)||d:d,o=$.isArray(e)?m:n,j=p.keyName===!1?i(d,g):i(e,o[h]),void 0===j&&(isNaN(g)||null==t[Number(g)+v]||(j=i(e,o[Number(g)])),void 0===j&&(j=w+a)),l={},l[s.id]=j,b=0;b<o.length;b++)k=i(e,o[b]),l[t[b+v].name]=k;$.extend(!0,q[a],l)}}},F=function(){var a,b,c,d=f.p.data.length;for(a=f.p.keyName===!1||f.p.loadonce?f.p.localReader.id:f.p.keyName,f.p._index=[],b=0;d>b;b++)c=i(f.p.data[b],a),void 0===c&&(c=String(b+1)),f.p._index[c]=b},G=function(a,b,d,e,g,h){var i,j="-1",k="",l=b?"display:none;":"",m="ui-widget-content jqgrow ui-row-"+f.p.direction+(d?" "+d:"")+(h?" ui-state-highlight":""),n=$(f).triggerHandler("jqGridRowAttr",[e,g,a]);if("object"!=typeof n&&(n=$.isFunction(f.p.rowattr)?f.p.rowattr.call(f,e,g,a):"string"==typeof f.p.rowattr&&null!=c.rowattr&&$.isFunction(c.rowattr[f.p.rowattr])?c.rowattr[f.p.rowattr].call(f,e,g,a):{}),!$.isEmptyObject(n)){n.hasOwnProperty("id")&&(a=n.id,delete n.id),n.hasOwnProperty("tabindex")&&(j=n.tabindex,delete n.tabindex),n.hasOwnProperty("style")&&(l+=n.style,delete n.style),n.hasOwnProperty("class")&&(m+=" "+n["class"],delete n["class"]);
try{delete n.role}catch(o){}for(i in n)n.hasOwnProperty(i)&&(k+=" "+i+"="+n[i])}return'<tr role="row" id="'+a+'" tabindex="'+j+'" class="'+m+'"'+(""===l?"":' style="'+l+'"')+k+">"},H=function(a,b,d,e,g){var h=new Date,i=c.getXmlData,k="local"!==f.p.datatype&&f.p.loadonce||"xmlstring"===f.p.datatype,l="_id_",m=f.p.xmlReader,n="local"===f.p.datatype?"local":"xml";if(k&&(f.p.data=[],f.p._index={},f.p.lastSelectedData=[],f.p.localReader.id=l),f.p.reccount=0,$.isXMLDoc(a)){-1!==f.p.treeANode||f.p.scroll?d=d>1?d:1:(D.call(f,!1,!0),d=1);var o,p,q,r,s,t,v,w,x,E,F=$(f),H=0,I=f.p.multiselect===!0?1:0,J=0,K=f.p.rownumbers===!0?1:0,L=[],M={},N=[],O=f.p.altRows===!0?f.p.altclass:"";f.p.subGrid===!0&&(J=1,r=c.getMethod("addSubGridCell")),m.repeatitems||(L=B(n)),s=f.p.keyName===!1?$.isFunction(m.id)?m.id.call(f,a):m.id:f.p.keyName,t=-1===String(s).indexOf("[")?L.length?function(a,b){return $(s,a).text()||b}:function(a,b){return $(m.cell,a).eq(s).text()||b}:function(a,b){return a.getAttribute(s.replace(/[\[\]]/g,""))||b},f.p.userData={},f.p.page=u(i(a,m.page),f.p.page),f.p.lastpage=u(i(a,m.total),1),f.p.records=u(i(a,m.records)),$.isFunction(m.userdata)?f.p.userData=m.userdata.call(f,a)||{}:i(a,m.userdata,!0).each(function(){f.p.userData[this.getAttribute("name")]=$(this).text()});var P=i(a,m.root,!0);P=i(P,m.row,!0),P||(P=[]);var Q,R=P.length,S=0,T=[],U=parseInt(f.p.rowNum,10),V=f.p.scroll?c.randId():1;if(R>0&&f.p.page<=0&&(f.p.page=1),P&&R){g&&(U*=g+1);var W,X=$.isFunction(f.p.afterInsertRow),Y=!1;for(f.p.grouping&&(Y=f.p.groupingView.groupCollapse===!0,W=c.getMethod("groupingPrepare"));R>S;){w=P[S],x=t(w,V+S),x=f.p.idPrefix+x,Q=0===d?0:d+1,E=(Q+S)%2===1?O:"";var Z=N.length;if(N.push(""),K&&N.push(A(0,S,f.p.page,f.p.rowNum)),I&&N.push(z(x,K,S,!1)),J&&N.push(r.call(F,I+K,S+d)),m.repeatitems){v||(v=C(I+J+K));var _=i(w,m.cell,!0);$.each(v,function(a){var b=_[this];return b?(q=b.textContent||b.text,M[f.p.colModel[a+I+J+K].name]=q,void N.push(y(x,q,a+I+J+K,S+d,w,M))):!1})}else for(o=0;o<L.length;o++)q=i(w,L[o]),M[f.p.colModel[o+I+J+K].name]=q,N.push(y(x,q,o+I+J+K,S+d,w,M));if(N[Z]=G(x,Y,E,M,w,!1),N.push("</tr>"),f.p.grouping&&(T.push(N),f.p.groupingView._locgr||W.call(F,M,S),N=[]),(k||f.p.treeGrid===!0)&&(M[l]=j(f.p.idPrefix,x),f.p.data.push(M),f.p._index[M[l]]=f.p.data.length-1),f.p.gridview===!1&&($("tbody:first",b).append(N.join("")),F.triggerHandler("jqGridAfterInsertRow",[x,M,w]),X&&f.p.afterInsertRow.call(f,x,M,w),N=[]),M={},H++,S++,H===U)break}}if(f.p.gridview===!0&&(p=f.p.treeANode>-1?f.p.treeANode:0,f.p.grouping?k||(F.jqGrid("groupingRender",T,f.p.colModel.length,f.p.page,U),T=null):f.p.treeGrid===!0&&p>0?$(f.rows[p]).after(N.join("")):(f.firstElementChild.innerHTML+=N.join(""),f.grid.cols=f.rows[0].cells)),f.p.subGrid===!0)try{F.jqGrid("addSubGrid",I+K)}catch(ab){}if(f.p.totaltime=new Date-h,H>0&&0===f.p.records&&(f.p.records=R),N=null,f.p.treeGrid===!0)try{F.jqGrid("setTreeNode",p+1,H+p+1)}catch(bb){}if(f.p.reccount=H,f.p.treeANode=-1,f.p.userDataOnFooter&&F.jqGrid("footerData","set",f.p.userData,!0),k&&(f.p.records=R,f.p.lastpage=Math.ceil(R/U)),e||f.updatepager(!1,!0),k){for(;R>H;){if(w=P[H],x=t(w,H+V),x=f.p.idPrefix+x,m.repeatitems){v||(v=C(I+J+K));var cb=i(w,m.cell,!0);$.each(v,function(a){var b=cb[this];return b?(q=b.textContent||b.text,void(M[f.p.colModel[a+I+J+K].name]=q)):!1})}else for(o=0;o<L.length;o++)q=i(w,L[o]),M[f.p.colModel[o+I+J+K].name]=q;M[l]=j(f.p.idPrefix,x),f.p.grouping&&W.call(F,M,H),f.p.data.push(M),f.p._index[M[l]]=f.p.data.length-1,M={},H++}f.p.grouping&&(f.p.groupingView._locgr=!0,F.jqGrid("groupingRender",T,f.p.colModel.length,f.p.page,U),T=null)}}},I=function(a,b,d,e,g){var k=new Date;if(a){-1!==f.p.treeANode||f.p.scroll?d=d>1?d:1:(D.call(f,!1,!0),d=1);var l,m,n="_id_",o="local"!==f.p.datatype&&f.p.loadonce||"jsonstring"===f.p.datatype;o&&(f.p.data=[],f.p.lastSelectedData=[],f.p._index={},f.p.localReader.id=n),f.p.reccount=0,"local"===f.p.datatype?(l=f.p.localReader,m="local"):(l=f.p.jsonReader,m="json");var p,q,r,s,t,v,w,x,E,F,H,I,J,K,L,M=$(f),N=f.p.multiselect?1:0,O=f.p.subGrid===!0?1:0,P=f.p.rownumbers===!0?1:0,Q=C(N+O+P),R=B(m),S={},T=[],U=f.p.altRows===!0?f.p.altclass:"";for(f.p.page=u(i(a,l.page),f.p.page),f.p.lastpage=u(i(a,l.total),1),f.p.records=u(i(a,l.records)),f.p.userData=i(a,l.userdata)||{},O&&(w=c.getMethod("addSubGridCell")),H=f.p.keyName===!1?$.isFunction(l.id)?l.id.call(f,a):l.id:f.p.keyName,isNaN(H)||(I=Number(H)),r=0;r<f.p.colModel.length;r++)if(f.p.colModel[r].name===H){I=r;break}F=i(a,l.root),null==F&&$.isArray(a)&&(F=a),F||(F=[]),E=F.length,E>0&&f.p.page<=0&&(f.p.page=1);var V,W,X=parseInt(f.p.rowNum,10),Y=f.p.scroll?c.randId():1,Z=!1;g&&(X*=g+1),"local"!==f.p.datatype||f.p.deselectAfterSort||(Z=!0);var _,ab,bb=$.isFunction(f.p.afterInsertRow),cb=[],db=!1;for(f.p.grouping&&(db=f.p.groupingView.groupCollapse===!0,_=c.getMethod("groupingPrepare")),r=0;E>r&&X>r;r++){for(t=F[r],v=l.repeatitems&&l.cell?i(t,l.cell)||t:t,x=l.repeatitems&&$.isArray(v)?Q:R,K=f.p.keyName===!1?i(t,H):i(v,x[I]),void 0===K&&(isNaN(H)||null==f.p.colModel[Number(H)+N+O+P]||(K=i(v,x[Number(H)])),void 0===K&&(K=Y+r)),K=f.p.idPrefix+K,V=1===d?0:d,L=(V+r)%2===1?U:"",Z&&(W=f.p.multiselect?-1!==$.inArray(K,f.p.selarrrow):K===f.p.selrow),ab=T.length,T.push(""),P&&T.push(A(0,r,f.p.page,f.p.rowNum)),N&&T.push(z(K,P,r,W)),O&&T.push(w.call(M,N+P,r+d)),s=0;s<x.length;s++)q=i(v,x[s]),S[f.p.colModel[s+N+O+P].name]=q,T.push(y(K,q,s+N+O+P,r+d,v,S));T[ab]=G(K,db,L,S,v,W),T.push("</tr>"),f.p.grouping&&(cb.push(T),f.p.groupingView._locgr||_.call(M,S,r),T=[]),(o||f.p.treeGrid===!0)&&(S[n]=j(f.p.idPrefix,K),f.p.data.push(S),f.p._index[S[n]]=f.p.data.length-1),f.p.gridview===!1&&($("#"+h(f.p.id)+" tbody:first").append(T.join("")),M.triggerHandler("jqGridAfterInsertRow",[K,S,v]),bb&&f.p.afterInsertRow.call(f,K,S,v),T=[]),S={}}if(f.p.gridview===!0&&(J=f.p.treeANode>-1?f.p.treeANode:0,f.p.grouping?o||(M.jqGrid("groupingRender",cb,f.p.colModel.length,f.p.page,X),cb=null):f.p.treeGrid===!0&&J>0?$(f.rows[J]).after(T.join("")):(f.firstElementChild.innerHTML+=T.join(""),f.grid.cols=f.rows[0].cells)),f.p.subGrid===!0)try{M.jqGrid("addSubGrid",N+P)}catch(eb){}if(f.p.totaltime=new Date-k,r>0&&0===f.p.records&&(f.p.records=E),T=null,f.p.treeGrid===!0)try{M.jqGrid("setTreeNode",J+1,r+J+1)}catch(fb){}if(f.p.reccount=r,f.p.treeANode=-1,f.p.userDataOnFooter&&M.jqGrid("footerData","set",f.p.userData,!0),o&&(f.p.records=E,f.p.lastpage=Math.ceil(E/X)),e||f.updatepager(!1,!0),o){for(p=r;E>p&&F[p];p++)if(t=F[p],v=l.repeatitems&&l.cell?i(t,l.cell)||t:t,x=l.repeatitems&&$.isArray(v)?Q:R,K=f.p.keyName===!1?i(t,H):i(v,x[I]),void 0===K&&(isNaN(H)||null==f.p.colModel[Number(H)+N+O+P]||(K=i(v,x[Number(H)])),void 0===K&&(K=Y+p)),v){for(s=0;s<x.length;s++)S[f.p.colModel[s+N+O+P].name]=i(v,x[s]);S[n]=j(f.p.idPrefix,K),f.p.grouping&&_.call(M,S,p),f.p.data.push(S),f.p._index[S[n]]=f.p.data.length-1,S={}}f.p.grouping&&(f.p.groupingView._locgr=!0,M.jqGrid("groupingRender",cb,f.p.colModel.length,f.p.page,X),cb=null)}}},J=function(){function a(b){var c,e,f,g,h,i=0;if(null!=b.groups){for(e=b.groups.length&&"OR"===b.groupOp.toString().toUpperCase(),e&&r.orBegin(),c=0;c<b.groups.length;c++){i>0&&e&&r.or();try{a(b.groups[c])}catch(j){d(j)}i++}e&&r.orEnd()}if(null!=b.rules)try{for(f=b.rules.length&&"OR"===b.groupOp.toString().toUpperCase(),f&&r.orBegin(),c=0;c<b.rules.length;c++)h=b.rules[c],g=b.groupOp.toString().toUpperCase(),q[h.op]&&h.field&&(i>0&&g&&"OR"===g&&(r=r.or()),r=q[h.op](r,g)(h.field,h.data,k[h.field])),i++;f&&r.orEnd()}catch(l){d(l)}}var b,e,g,h=f.p.multiSort?[]:"",i=[],j=!1,k={},l=[],m=[];if($.isArray(f.p.data)){var n,o,p=f.p.grouping?f.p.groupingView:!1;if($.each(f.p.colModel,function(){if(e=this.sorttype||"text","date"===e||"datetime"===e?(this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?(b=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:c.formatter.date.srcformat,g=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:c.formatter.date.newformat):b=g=this.datefmt||"Y-m-d",k[this.name]={stype:e,srcfmt:b,newfmt:g,sfunc:this.sortfunc||null}):k[this.name]={stype:e,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},f.p.grouping)for(o=0,n=p.groupField.length;n>o;o++)if(this.name===p.groupField[o]){var a=this.name;this.index&&(a=this.index),l[o]=k[a],m[o]=a}if(f.p.multiSort){if(this.lso){h.push(this.name);var d=this.lso.split("-");i.push(d[d.length-1])}}else j||this.index!==f.p.sortname&&this.name!==f.p.sortname||(h=this.name,j=!0)}),f.p.treeGrid)return void $(f).jqGrid("SortTree",h,f.p.sortorder,null!=k[h]&&k[h].stype?k[h].stype:"text",null!=k[h]&&k[h].srcfmt?k[h].srcfmt:"");var q={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a,b){return"OR"===b?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return"OR"===b?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return"OR"===b?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return"OR"===b?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return"OR"===b?a.orNot().isNull:a.andNot().isNull}},r=c.from(f.p.data);if(f.p.ignoreCase&&(r=r.ignoreCase()),f.p.search===!0){var s=f.p.postData.filters;if(s)"string"==typeof s&&(s=c.parse(s)),a(s);else try{r=q[f.p.postData.searchOper](r)(f.p.postData.searchField,f.p.postData.searchString,k[f.p.postData.searchField])}catch(t){}}if(f.p.grouping)for(o=0;n>o;o++)r.orderBy(m[o],p.groupOrder[o],l[o].stype,l[o].srcfmt);f.p.multiSort?$.each(h,function(a){r.orderBy(this,i[a],k[this].stype,k[this].srcfmt,k[this].sfunc)}):h&&f.p.sortorder&&j&&("DESC"===f.p.sortorder.toUpperCase()?r.orderBy(f.p.sortname,"d",k[h].stype,k[h].srcfmt,k[h].sfunc):r.orderBy(f.p.sortname,"a",k[h].stype,k[h].srcfmt,k[h].sfunc)),f.p.lastSelectedData=r.select();var u=parseInt(f.p.rowNum,10),v=f.p.lastSelectedData.length,w=parseInt(f.p.page,10),x=Math.ceil(v/u),y={};if((f.p.search||f.p.resetsearch)&&f.p.grouping&&f.p.groupingView._locgr){f.p.groupingView.groups=[];var z,A,B,C=c.getMethod("groupingPrepare");if(f.p.footerrow&&f.p.userDataOnFooter){for(A in f.p.userData)f.p.userData.hasOwnProperty(A)&&(f.p.userData[A]=0);B=!0}for(z=0;v>z;z++){if(B)for(A in f.p.userData)f.p.userData[A]+=parseFloat(f.p.lastSelectedData[z][A]||0);C.call($(f),f.p.lastSelectedData[z],z,u)}}return r=null,k=null,y[f.p.localReader.total]=x,y[f.p.localReader.page]=w,y[f.p.localReader.records]=v,y[f.p.localReader.root]=f.p.lastSelectedData.slice((w-1)*u,w*u),y[f.p.localReader.userdata]=f.p.userData,y}},K=function(a,b){var d,e,g,h,i,j,k,l,m=f.p.pager||"",n=f.p.pager?"_"+f.p.pager.substr(1):"",o=f.p.toppager?"_"+f.p.toppager.substr(1):"";if(g=parseInt(f.p.page,10)-1,0>g&&(g=0),g*=parseInt(f.p.rowNum,10),i=g+f.p.reccount,f.p.scroll){var p=$("tbody:first > tr:gt(0)",f.grid.bDiv);g=i-p.length,f.p.reccount=p.length;var q=p.outerHeight()||f.grid.prevRowHeight;if(q){var r=g*q,s=parseInt(f.p.records,10)*q;$(">div:first",f.grid.bDiv).css({height:s}).children("div:first").css({height:r,display:r?"":"none"}),0===f.grid.bDiv.scrollTop&&f.p.page>1&&(f.grid.bDiv.scrollTop=f.p.rowNum*(f.p.page-1)*q)}f.grid.bDiv.scrollLeft=f.grid.hDiv.scrollLeft}m+=f.p.toppager?(m?",":"")+f.p.toppager:"",m&&(k=c.formatter.integer||{},d=u(f.p.page),e=u(f.p.lastpage),$(".selbox",m)[f.p.useProp?"prop":"attr"]("disabled",!1),f.p.pginput===!0&&($(".ui-pg-input",m).val(f.p.page),l=f.p.toppager?"#sp_1"+n+",#sp_1"+o:"#sp_1"+n,$(l).html($.fmatter?$.fmatter.util.NumberFormat(f.p.lastpage,k):f.p.lastpage)),f.p.viewrecords&&(0===f.p.reccount?$(".ui-paging-info",m).html(f.p.emptyrecords):(h=g+1,j=f.p.records,$.fmatter&&(h=$.fmatter.util.NumberFormat(h,k),i=$.fmatter.util.NumberFormat(i,k),j=$.fmatter.util.NumberFormat(j,k)),$(".ui-paging-info",m).html(c.format(f.p.recordtext,h,i,j)))),f.p.pgbuttons===!0&&(0>=d&&(d=e=0),1===d||0===d?($("#first"+n+", #prev"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),f.p.toppager&&$("#first_t"+o+", #prev_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+n+", #prev"+n).removeClass("ui-state-disabled"),f.p.toppager&&$("#first_t"+o+", #prev_t"+o).removeClass("ui-state-disabled")),d===e||0===d?($("#next"+n+", #last"+n).addClass("ui-state-disabled").removeClass("ui-state-hover"),f.p.toppager&&$("#next_t"+o+", #last_t"+o).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+n+", #last"+n).removeClass("ui-state-disabled"),f.p.toppager&&$("#next_t"+o+", #last_t"+o).removeClass("ui-state-disabled")))),a===!0&&f.p.rownumbers===!0&&$(">td.jqgrid-rownum",f.rows).each(function(a){$(this).html(g+1+a)}),b&&f.p.jqgdnd&&$(f).jqGrid("gridDnD","updateDnD"),$(f).triggerHandler("jqGridGridComplete"),$.isFunction(f.p.gridComplete)&&f.p.gridComplete.call(f),$(f).triggerHandler("jqGridAfterGridComplete")},L=function(){f.grid.hDiv.loading=!0,f.p.hiddengrid||$(f).jqGrid("progressBar",{method:"show",loadtype:f.p.loadui,htmlcontent:f.p.loadtext})},M=function(){f.grid.hDiv.loading=!1,$(f).jqGrid("progressBar",{method:"hide",loadtype:f.p.loadui})},N=function(a){if(!f.grid.hDiv.loading){var b,c,d=f.p.scroll&&a===!1,e={},g=f.p.prmNames;f.p.page<=0&&(f.p.page=Math.min(1,f.p.lastpage)),null!==g.search&&(e[g.search]=f.p.search),null!==g.nd&&(e[g.nd]=(new Date).getTime()),(isNaN(parseInt(f.p.rowNum,10))||parseInt(f.p.rowNum,10)<=0)&&(f.p.rowNum=f.p.maxRowNum),null!==g.rows&&(e[g.rows]=f.p.rowNum),null!==g.page&&(e[g.page]=f.p.page),null!==g.sort&&(e[g.sort]=f.p.sortname),null!==g.order&&(e[g.order]=f.p.sortorder),null!==f.p.rowTotal&&null!==g.totalrows&&(e[g.totalrows]=f.p.rowTotal);var h=$.isFunction(f.p.loadComplete),i=h?f.p.loadComplete:null,j=0;if(a=a||1,a>1?null!==g.npage?(e[g.npage]=a,j=a-1,a=1):i=function(b){f.p.page++,f.grid.hDiv.loading=!1,h&&f.p.loadComplete.call(f,b),N(a-1)}:null!==g.npage&&delete f.p.postData[g.npage],f.p.grouping){$(f).jqGrid("groupingSetup");var k,l=f.p.groupingView,m="";for(k=0;k<l.groupField.length;k++){var n=l.groupField[k];$.each(f.p.colModel,function(a,b){b.name===n&&b.index&&(n=b.index)}),m+=n+" "+l.groupOrder[k]+", "}e[g.sort]=m+e[g.sort]}$.extend(f.p.postData,e);var o=f.p.scroll?f.rows.length-1:1,p=$(f).triggerHandler("jqGridBeforeRequest");if(p===!1||"stop"===p)return;if($.isFunction(f.p.datatype))return void f.p.datatype.call(f,f.p.postData,"load_"+f.p.id,o,a,j);if($.isFunction(f.p.beforeRequest)&&(p=f.p.beforeRequest.call(f),void 0===p&&(p=!0),p===!1))return;if(null!=f.p.url&&"local"!=f.p.datatype)$.ajax($.extend({url:f.p.url,type:f.p.mtype,data:$.isFunction(f.p.serializeGridData)?f.p.serializeGridData.call(f,f.p.postData):f.p.postData,success:function(b,c,e){if($.isFunction(f.p.beforeProcessing)&&f.p.beforeProcessing.call(f,b,c,e)===!1)return void M();if(void 0!==e.responseJSON)f.p.datatype="json",I(b,f.grid.bDiv,o,a>1,j);else if(void 0!==e.responseXML)f.p.datatype="xml",H(b,f.grid.bDiv,o,a>1,j);else try{b=$.parseJSON(b),f.p.datatype="json",I(b,f.grid.bDiv,o,a>1,j)}catch(g){try{b=$.parseXML(b),f.p.datatype="xml",H(b,f.grid.bDiv,o,a>1,j)}catch(h){}}$(f).triggerHandler("jqGridLoadComplete",[b]),i&&i.call(f,b),f.p.autoresizeOnLoad&&$(f).jqGrid("autoResizeAllColumns"),$(f).triggerHandler("jqGridAfterLoadComplete",[b]),d&&f.grid.populateVisible(),(f.p.loadonce||f.p.treeGrid)&&(f.p.dataTypeOrg=f.p.datatype,f.p.datatype="local"),b=null,1===a&&M()},error:function(b,c,d){$.isFunction(f.p.loadError)&&f.p.loadError.call(f,b,c,d),1===a&&M(),b=null},beforeSend:function(a,b){var c=!0;return $.isFunction(f.p.loadBeforeSend)&&(c=f.p.loadBeforeSend.call(f,a,b)),void 0===c&&(c=!0),c===!1?!1:void L()}},$.jgrid.ajaxOptions,f.p.ajaxGridOptions));else switch(b=f.p.datatype.toLowerCase()){case"xmlstring":L(),c="string"!=typeof f.p.datastr?f.p.datastr:$.parseXML(f.p.datastr),H(c,f.grid.bDiv),$(f).triggerHandler("jqGridLoadComplete",[c]),h&&f.p.loadComplete.call(f,c),f.p.autoresizeOnLoad&&$(f).jqGrid("autoResizeAllColumns"),$(f).triggerHandler("jqGridAfterLoadComplete",[c]),f.p.datatype="local",f.p.datastr=null,M();break;case"jsonstring":L(),c="string"==typeof f.p.datastr?$.jgrid.parse(f.p.datastr):f.p.datastr,I(c,f.grid.bDiv),$(f).triggerHandler("jqGridLoadComplete",[c]),h&&f.p.loadComplete.call(f,c),f.p.autoresizeOnLoad&&$(f).jqGrid("autoResizeAllColumns"),$(f).triggerHandler("jqGridAfterLoadComplete",[c]),f.p.datatype="local",f.p.datastr=null,M();break;case"local":case"clientside":L(),f.p.datatype="local";var q=J();I(q,f.grid.bDiv,o,a>1,j),$(f).triggerHandler("jqGridLoadComplete",[q]),i&&i.call(f,q),f.p.autoresizeOnLoad&&$(f).jqGrid("autoResizeAllColumns"),$(f).triggerHandler("jqGridAfterLoadComplete",[q]),d&&f.grid.populateVisible(),M()}}},O=function(a){$("#cb_"+h(f.p.id),f.grid.hDiv)[f.p.useProp?"prop":"attr"]("checked",a);var b=f.p.frozenColumns?f.p.id+"_frozen":"";b&&$("#cb_"+h(f.p.id),f.grid.fhDiv)[f.p.useProp?"prop":"attr"]("checked",a)},P=function(a,b){var d,e,g,i,j,k,l,m="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",o="",p="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",q="",r=function(a){var b;return $.isFunction(f.p.onPaging)&&(b=f.p.onPaging.call(f,a)),"stop"===b?!1:(f.p.selrow=null,f.p.multiselect&&(f.p.selarrrow=[],O(!1)),f.p.savedRow=[],!0)};if(b+="_"+a,d="pg_"+a,e=a+"_left",g=a+"_center",i=a+"_right",$("#"+h(a)).append("<div id='"+d+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+e+"' style='text-align:left;'></td><td id='"+g+"' style='text-align:center;white-space:pre;'></td><td id='"+i+"' style='text-align:right;'></td></tr></tbody></table></div>").attr("dir","ltr"),d="#"+h(d),f.p.rowList.length>0){q="<td dir='"+n+"'>",q+="<select class='ui-pg-selbox' role='listbox' "+(f.p.pgrecs?"title='"+f.p.pgrecs+"'":"")+">";var s;for(l=0;l<f.p.rowList.length;l++)s=f.p.rowList[l].toString().split(":"),1===s.length&&(s[1]=s[0]),q+='<option role="option" value="'+s[0]+'"'+(u(f.p.rowNum,0)===u(s[0],0)?' selected="selected"':"")+">"+s[1]+"</option>";q+="</select></td>"}if("rtl"===n&&(p+=q),f.p.pginput===!0&&(o="<td dir='"+n+"'>"+c.format(f.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+a+"'></span>")+"</td>"),a="#"+h(a),f.p.pgbuttons===!0){var t=["first"+b,"prev"+b,"next"+b,"last"+b];"rtl"===n&&t.reverse(),p+="<td id='"+t[0]+"' class='ui-pg-button ui-corner-all' "+(f.p.pgfirst?"title='"+f.p.pgfirst+"'":"")+"><span class='ui-icon ui-icon-seek-first'></span></td>",p+="<td id='"+t[1]+"' class='ui-pg-button ui-corner-all' "+(f.p.pgprev?"title='"+f.p.pgprev+"'":"")+"><span class='ui-icon ui-icon-seek-prev'></span></td>",p+=""!==o?m+o+m:"",p+="<td id='"+t[2]+"' class='ui-pg-button ui-corner-all' "+(f.p.pgnext?"title='"+f.p.pgnext+"'":"")+"><span class='ui-icon ui-icon-seek-next'></span></td>",p+="<td id='"+t[3]+"' class='ui-pg-button ui-corner-all' "+(f.p.pglast?"title='"+f.p.pglast+"'":"")+"><span class='ui-icon ui-icon-seek-end'></span></td>"}else""!==o&&(p+=o);"ltr"===n&&(p+=q),p+="</tr></tbody></table>",f.p.viewrecords===!0&&$("td"+a+"_"+f.p.recordpos,d).append("<div dir='"+n+"' style='text-align:"+f.p.recordpos+"' class='ui-paging-info'></div>"),$("td"+a+"_"+f.p.pagerpos,d).append(p),k=$(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ></div>"),j=$(p).clone().appendTo("#testpg").width(),$("#testpg").remove(),j>0&&(""!==o&&(j+=50),$("td"+a+"_"+f.p.pagerpos,d).width(j)),f.p._nvtd=[],f.p._nvtd[0]=Math.floor(j?(f.p.width-j)/2:f.p.width/3),f.p._nvtd[1]=0,p=null,$(".ui-pg-selbox",d).bind("change",function(){return r("records")?(f.p.page=Math.round(f.p.rowNum*(f.p.page-1)/this.value-.5)+1,f.p.rowNum=this.value,f.p.pager&&$(".ui-pg-selbox",f.p.pager).val(this.value),f.p.toppager&&$(".ui-pg-selbox",f.p.toppager).val(this.value),N(),!1):!1}),f.p.pgbuttons===!0&&($(".ui-pg-button",d).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+h(b)+", #prev"+h(b)+", #next"+h(b)+", #last"+h(b)).click(function(){if($(this).hasClass("ui-state-disabled"))return!1;var a=u(f.p.page,1),c=u(f.p.lastpage,1),d=!1,e=!0,g=!0,h=!0,i=!0;return 0===c||1===c?(e=!1,g=!1,h=!1,i=!1):c>1&&a>=1?1===a?(e=!1,g=!1):a===c&&(h=!1,i=!1):c>1&&0===a&&(h=!1,i=!1,a=c-1),r(this.id)?(this.id==="first"+b&&e&&(f.p.page=1,d=!0),this.id==="prev"+b&&g&&(f.p.page=a-1,d=!0),this.id==="next"+b&&h&&(f.p.page=a+1,d=!0),this.id==="last"+b&&i&&(f.p.page=c,d=!0),d&&N(),!1):!1})),f.p.pginput===!0&&$("input.ui-pg-input",d).keypress(function(a){var b=a.charCode||a.keyCode||0;return 13===b?r("user")?($(this).val(u($(this).val(),1)),f.p.page=$(this).val()>0?$(this).val():f.p.page,N(),!1):!1:this})},Q=function(a,b){var c,d,e="",g=f.p.colModel,h=!1,i=f.p.frozenColumns?b:f.grid.headers[a].el,j="";$("span.ui-grid-ico-sort",i).addClass("ui-state-disabled"),$(i).attr("aria-selected","false"),g[a].lso?"asc"===g[a].lso?(g[a].lso+="-desc",j="desc"):"desc"===g[a].lso?(g[a].lso+="-asc",j="asc"):("asc-desc"===g[a].lso||"desc-asc"===g[a].lso)&&(g[a].lso=""):g[a].lso=j=g[a].firstsortorder||"asc",j?($("span.s-ico",i).show(),$("span.ui-icon-"+j,i).removeClass("ui-state-disabled"),$(i).attr("aria-selected","true")):f.p.viewsortcols[0]||$("span.s-ico",i).hide(),f.p.sortorder="",$.each(g,function(a){this.lso&&(a>0&&h&&(e+=", "),c=this.lso.split("-"),e+=g[a].index||g[a].name,e+=" "+c[c.length-1],h=!0,f.p.sortorder=c[c.length-1])}),d=e.lastIndexOf(f.p.sortorder),e=e.substring(0,d),f.p.sortname=e},R=function(a,b,c,d,e){if(f.p.colModel[b].sortable&&!(f.p.savedRow.length>0)){if(c||(f.p.lastsort===b&&""!==f.p.sortname?"asc"===f.p.sortorder?f.p.sortorder="desc":"desc"===f.p.sortorder&&(f.p.sortorder="asc"):f.p.sortorder=f.p.colModel[b].firstsortorder||"asc",f.p.page=1),f.p.multiSort)Q(b,e);else{if(d){if(f.p.lastsort===b&&f.p.sortorder===d&&!c)return;f.p.sortorder=d}var g=f.grid.headers[f.p.lastsort]?f.grid.headers[f.p.lastsort].el:null,i=f.p.frozenColumns?e:f.grid.headers[b].el;$("span.ui-grid-ico-sort",g).addClass("ui-state-disabled"),$(g).attr("aria-selected","false"),f.p.frozenColumns&&(f.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled"),f.grid.fhDiv.find("th").attr("aria-selected","false")),$("span.ui-icon-"+f.p.sortorder,i).removeClass("ui-state-disabled"),$(i).attr("aria-selected","true"),f.p.viewsortcols[0]||(f.p.lastsort!==b?(f.p.frozenColumns&&f.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",g).hide(),$("span.s-ico",i).show()):""===f.p.sortname&&$("span.s-ico",i).show()),a=a.substring(5+f.p.id.length+1),f.p.sortname=f.p.colModel[b].index||a}if("stop"===$(f).triggerHandler("jqGridSortCol",[f.p.sortname,b,f.p.sortorder]))return void(f.p.lastsort=b);if($.isFunction(f.p.onSortCol)&&"stop"===f.p.onSortCol.call(f,f.p.sortname,b,f.p.sortorder))return void(f.p.lastsort=b);if("local"===f.p.datatype?f.p.deselectAfterSort&&$(f).jqGrid("resetSelection"):(f.p.selrow=null,f.p.multiselect&&O(!1),f.p.selarrrow=[],f.p.savedRow=[]),f.p.scroll){var j=f.grid.bDiv.scrollLeft;D.call(f,!0,!1),f.grid.hDiv.scrollLeft=j}f.p.subGrid&&"local"===f.p.datatype&&$("td.sgexpanded","#"+h(f.p.id)).each(function(){$(this).trigger("click")}),N(),f.p.lastsort=b,f.p.sortname!==a&&b&&(f.p.lastsort=b)}},S=function(){var a,b,d,e,g=0,h=c.cell_width?0:u(f.p.cellLayout,0),i=0,j=u(f.p.scrollOffset,0),k=!1,m=0;$.each(f.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),f.p.grouping&&f.p.autowidth){var a=$.inArray(this.name,f.p.groupingView.groupField);a>=0&&f.p.groupingView.groupColumnShow.length>a&&(this.hidden=!f.p.groupingView.groupColumnShow[a])}this.widthOrg=b=u(this.width,0),this.hidden===!1&&(g+=b+h,this.fixed?m+=b+h:i++)}),isNaN(f.p.width)&&(f.p.width=g+(f.p.shrinkToFit!==!1||isNaN(f.p.height)?0:j)),l.width=f.p.width,f.p.tblwidth=g,f.p.shrinkToFit===!1&&f.p.forceFit===!0&&(f.p.forceFit=!1),f.p.shrinkToFit===!0&&i>0&&(d=l.width-h*i-m,isNaN(f.p.height)||(d-=j,k=!0),g=0,$.each(f.p.colModel,function(c){this.hidden!==!1||this.fixed||(b=Math.round(d*this.width/(f.p.tblwidth-h*i-m)),this.width=b,g+=b,a=c)}),e=0,k?l.width-m-(g+h*i)!==j&&(e=l.width-m-(g+h*i)-j):k||1===Math.abs(l.width-m-(g+h*i))||(e=l.width-m-(g+h*i)),f.p.colModel[a].width+=e,f.p.tblwidth=g+e+h*i+m,f.p.tblwidth>f.p.width&&(f.p.colModel[a].width-=f.p.tblwidth-parseInt(f.p.width,10),f.p.tblwidth=f.p.width))},T=function(a){var b,c=a,d=a;for(b=a+1;b<f.p.colModel.length;b++)if(f.p.colModel[b].hidden!==!0){d=b;break}return d-c},U=function(a){var b=$(f.grid.headers[a].el),c=[b.position().left+b.outerWidth()];return"rtl"===f.p.direction&&(c[0]=f.p.width-c[0]),c[0]-=f.grid.bDiv.scrollLeft,c.push($(f.grid.hDiv).position().top),c.push($(f.grid.bDiv).offset().top-$(f.grid.hDiv).offset().top+$(f.grid.bDiv).height()),c},V=function(a){var b,c=f.grid.headers,d=k(a);for(b=0;b<c.length;b++)if(a===c[b].el){d=b;break}return d};for(this.p.id=this.id,-1===$.inArray(f.p.multikey,t)&&(f.p.multikey=!1),f.p.keyName=!1,m=0;m<f.p.colModel.length;m++)s="string"==typeof f.p.colModel[m].template?null!=c.cmTemplate&&"object"==typeof c.cmTemplate[f.p.colModel[m].template]?c.cmTemplate[f.p.colModel[m].template]:{}:f.p.colModel[m].template,f.p.colModel[m]=$.extend(!0,{},f.p.cmTemplate,s||{},f.p.colModel[m]),f.p.keyName===!1&&f.p.colModel[m].key===!0&&(f.p.keyName=f.p.colModel[m].name);if(f.p.sortorder=f.p.sortorder.toLowerCase(),c.cell_width=c.cellWidth(),f.p.grouping===!0&&(f.p.scroll=!1,f.p.rownumbers=!1,f.p.treeGrid=!1,f.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(W){}"local"!==f.p.datatype&&(f.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(f).jqGrid("setSubGrid")}catch(X){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox' aria-checked='false'/>"),this.p.colModel.unshift({name:"cb",width:c.cell_width?f.p.multiselectWidth+f.p.cellLayout:f.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:f.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),f.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},f.p.xmlReader),f.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},f.p.jsonReader),f.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},f.p.localReader),f.p.scroll&&(f.p.pgbuttons=!1,f.p.pginput=!1,f.p.rowList=[]),f.p.data.length&&(E(),F());var Y,Z,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb="<thead><tr class='ui-jqgrid-labels' role='row'>",kb="",lb="",mb=[],nb=[],ob=[];if(f.p.shrinkToFit===!0&&f.p.forceFit===!0)for(m=f.p.colModel.length-1;m>=0;m--)if(f.p.colModel[m].hidden!==!0){f.p.colModel[m].resizable=!1;break}if("horizontal"===f.p.viewsortcols[1]&&(kb=" ui-i-asc",lb=" ui-i-desc"),Y=p?"ui-th-div-ie":"",ib="<span class='s-ico' style='display:none'><span class='ui-grid-ico-sort ui-icon-asc"+kb+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+n+"'></span>",ib+="<span class='ui-grid-ico-sort ui-icon-desc"+lb+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+n+"'></span></span>",f.p.multiSort)for(mb=f.p.sortname.split(","),m=0;m<mb.length;m++)ob=$.trim(mb[m]).split(" "),mb[m]=$.trim(ob[0]),nb[m]=ob[1]?$.trim(ob[1]):f.p.sortorder||"asc";for(m=0;m<this.p.colNames.length;m++){switch(cb=f.p.colModel[m],db=f.p.headertitles?' title="'+c.stripHtml(f.p.colNames[m])+'"':"",jb+="<th id='"+f.p.id+"_"+cb.name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+n+"'"+db+">",Z=cb.index||cb.name,cb.labelAlign){case"left":eb="text-align:left;";break;case"right":eb="text-align:right;"+(cb.sortable===!1?"":"padding-right:"+e.autoResizing.widthOfVisiblePartOfSortIcon+"px;");break;case"likeData":eb=void 0===cb.align||"left"===cb.align?"text-align:left;":"right"===cb.align?"text-align:right;"+(cb.sortable===!1?"":"padding-right:"+e.autoResizing.widthOfVisiblePartOfSortIcon+"px;"):"";break;default:eb=""}jb+="<div id='jqgh_"+f.p.id+"_"+cb.name+"'"+(""!==Y||cb.labelClasses?" class='"+(""!==Y?Y+" ":"")+cb.labelClasses+"'":"")+(""===eb?"":" style='"+eb+"'")+">"+(cb.autoResizable&&"actions"!==cb.formatter?"<span class='"+f.p.autoResizing.wrapperClassName+"'>"+f.p.colNames[m]+"</span>":f.p.colNames[m]),cb.width=cb.width?parseInt(cb.width,10):150,"boolean"!=typeof cb.title&&(cb.title=!0),cb.lso="",Z===f.p.sortname&&(f.p.lastsort=m),f.p.multiSort&&(ob=$.inArray(Z,mb),-1!==ob&&(cb.lso=nb[ob])),jb+=ib+"</div></th>"}if(jb+="</tr></thead>",ib=null,$(this).append(jb),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect){var pb,qb=[];$("#cb_"+h(f.p.id),this).bind("click",function(){f.p.selarrrow=[];var a=f.p.frozenColumns===!0?f.p.id+"_frozen":"";this.checked?($(f.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||$(this).hasClass("jqfoot")||($("#jqg_"+h(f.p.id)+"_"+h(this.id))[f.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),f.p.selarrrow.push(this.id),f.p.selrow=this.id,a&&($("#jqg_"+h(f.p.id)+"_"+h(this.id),f.grid.fbDiv)[f.p.useProp?"prop":"attr"]("checked",!0),$("#"+h(this.id),f.grid.fbDiv).addClass("ui-state-highlight"))))}),pb=!0,qb=[]):($(f.rows).each(function(b){b>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||$(this).hasClass("jqfoot")||($("#jqg_"+h(f.p.id)+"_"+h(this.id))[f.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),qb.push(this.id),a&&($("#jqg_"+h(f.p.id)+"_"+h(this.id),f.grid.fbDiv)[f.p.useProp?"prop":"attr"]("checked",!1),$("#"+h(this.id),f.grid.fbDiv).removeClass("ui-state-highlight"))))}),f.p.selrow=null,pb=!1),$(f).triggerHandler("jqGridSelectAll",[pb?f.p.selarrrow:qb,pb]),$.isFunction(f.p.onSelectAll)&&f.p.onSelectAll.call(f,pb?f.p.selarrrow:qb,pb)})}if(f.p.autowidth===!0){var rb=$(r).innerWidth();f.p.width=rb>0?rb:"nw"}S(),$(r).css("width",l.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+f.p.id+"'>&#160;</div>"),$("#rs_m"+h(e.id)).click(g).dblclick(function(a){var b,c,d,g,h,i=$(this).data("idx"),j=$(this).data("pageX"),k=e.colModel[i];return null==j?!1:(b=String(j).split(";"),c=parseFloat(b[0]),d=parseFloat(b[1]),2===b.length&&(Math.abs(c-d)>5||Math.abs(a.pageX-c)>5||Math.abs(a.pageX-d)>5)?!1:(g=$(f).triggerHandler("jqGridResizeDblClick",[i,k]),g=g===!1||"stop"===g?!1:!0,$.isFunction(e.resizeDblClick)&&(h=e.resizeDblClick.call(f,i,k),(h===!1||"stop"===h)&&(g=!1)),g&&null!=k&&k.autoResizable&&$(f).jqGrid("autoResizeColumn",i),!1))}),$(o).css("width",l.width+"px"),jb=$("thead:first",f).get(0);var sb="";f.p.footerrow&&(sb+="<table role='presentation' style='width:"+f.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+n+"'>");
var tb=$("tr:first",jb),ub="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(f.p.disableClick=!1,$("th",tb).each(function(a){_=f.p.colModel[a].width,void 0===f.p.colModel[a].resizable&&(f.p.colModel[a].resizable=!0),f.p.colModel[a].resizable?(ab=document.createElement("span"),$(ab).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+n).css("cursor","col-resize"),$(this).addClass(f.p.resizeclass)):ab="",$(this).css("width",_+"px").prepend(ab),ab=null;var b="";f.p.colModel[a].hidden===!0&&($(this).css("display","none"),b="display:none;"),ub+="<td role='gridcell' style='height:0;width:"+_+"px;"+b+"'></td>",l.headers[a]={width:_,el:this},bb=f.p.colModel[a].sortable,"boolean"!=typeof bb&&(f.p.colModel[a].sortable=!0,bb=!0);var c=f.p.colModel[a].name;"cb"!==c&&"subgrid"!==c&&"rn"!==c&&f.p.viewsortcols[2]&&bb&&$(">div",this).addClass("ui-jqgrid-sortable"),bb&&(f.p.multiSort?f.p.viewsortcols[0]?($("div span.s-ico",this).show(),f.p.colModel[a].lso&&$("div span.ui-icon-"+f.p.colModel[a].lso,this).removeClass("ui-state-disabled")):f.p.colModel[a].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+f.p.colModel[a].lso,this).removeClass("ui-state-disabled")):f.p.viewsortcols[0]?($("div span.s-ico",this).show(),a===f.p.lastsort&&$("div span.ui-icon-"+f.p.sortorder,this).removeClass("ui-state-disabled")):a===f.p.lastsort&&""!==f.p.sortname&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+f.p.sortorder,this).removeClass("ui-state-disabled"))),f.p.footerrow&&(sb+="<td role='gridcell' "+v(a,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(a){if(1===$(a.target).closest("th>span.ui-jqgrid-resize").length){var b=V(this);return f.p.forceFit===!0&&(f.p.nv=T(b)),l.dragStart(b,a,U(b)),!1}}).click(function(a){if(f.p.disableClick)return f.p.disableClick=!1,!1;var b,c,d="th>div.ui-jqgrid-sortable";f.p.viewsortcols[2]||(d="th>div>span>span.ui-grid-ico-sort");var e=$(a.target).closest(d);if(1===e.length){var g;if(f.p.frozenColumns){var h=$(this)[0].id.substring(f.p.id.length+1);$(f.p.colModel).each(function(a){return this.name===h?(g=a,!1):void 0})}else g=V(this);return f.p.viewsortcols[2]||(b=!0,c=e.hasClass("ui-icon-desc")?"desc":"asc"),null!=g&&R($("div",this)[0].id,g,b,c,this),!1}}),f.p.sortable&&$.fn.sortable)try{$(f).jqGrid("sortableColumns",tb)}catch(vb){}f.p.footerrow&&(sb+="</tr></tbody></table>"),ub+="</tr>",hb=document.createElement("tbody"),this.appendChild(hb),$(this).addClass("ui-jqgrid-btable").append(ub),ub=null;var wb=$("<table class='ui-jqgrid-htable' style='width:"+f.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'"+(q?" cellspacing='0'":"")+"></table>").append(jb),xb=f.p.caption&&f.p.hiddengrid===!0?!0:!1,yb=$("<div class='ui-jqgrid-hbox"+("rtl"===n?"-rtl":"")+"'></div>");if(jb=null,l.hDiv=document.createElement("div"),$(l.hDiv).css({width:l.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(yb),$(yb).append(wb),wb=null,xb&&$(l.hDiv).hide(),f.p.pager){var zb,Ab;"string"==typeof f.p.pager&&"#"!==f.p.pager.substr(0,1)?(Ab=f.p.pager,zb=$("#"+h(f.p.pager))):(zb=$(f.p.pager),Ab=zb.attr("id")),zb.length>0?(zb.css({width:l.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(r),xb&&zb.hide(),P(Ab,""),f.p.pager="#"+h(Ab)):f.p.pager=""}f.p.cellEdit===!1&&f.p.hoverrows===!0&&$(f).bind("mouseover",function(a){gb=$(a.target).closest("tr.jqgrow"),"ui-subgrid"!==$(gb).attr("class")&&$(gb).addClass("ui-state-hover")}).bind("mouseout",function(a){gb=$(a.target).closest("tr.jqgrow"),$(gb).removeClass("ui-state-hover")});var Bb,Cb,Db;$(f).before(l.hDiv).click(function(a){if(fb=a.target,gb=$(fb,f.rows).closest("tr.jqgrow"),0===$(gb).length||gb[0].className.indexOf("ui-state-disabled")>-1||($(fb,f).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==f.id)return this;var b=$(fb).hasClass("cbox"),c=$(f).triggerHandler("jqGridBeforeSelectRow",[gb[0].id,a]);if(c=c===!1||"stop"===c?!1:!0,$.isFunction(f.p.beforeSelectRow)){var d=f.p.beforeSelectRow.call(f,gb[0].id,a);(d===!1||"stop"===d)&&(c=!1)}if("A"!==fb.tagName&&("INPUT"!==fb.tagName&&"TEXTAREA"!==fb.tagName&&"OPTION"!==fb.tagName&&"SELECT"!==fb.tagName||b))if(Bb=gb[0].id,fb=$(fb).closest("tr.jqgrow>td"),fb.length>0&&(Cb=k(fb),Db=$(fb).closest("td,th").html(),$(f).triggerHandler("jqGridCellSelect",[Bb,Cb,Db,a]),$.isFunction(f.p.onCellSelect)&&f.p.onCellSelect.call(f,Bb,Cb,Db,a)),f.p.cellEdit!==!0){if(c)if(f.p.multikey)a[f.p.multikey]?$(f).jqGrid("setSelection",Bb,!0,a):f.p.multiselect&&b&&(b=$("#jqg_"+h(f.p.id)+"_"+Bb).is(":checked"),$("#jqg_"+h(f.p.id)+"_"+Bb)[f.p.useProp?"prop":"attr"]("checked",b));else if(f.p.multiselect&&f.p.multiboxonly)if(b)$(f).jqGrid("setSelection",Bb,!0,a);else{var e=f.p.frozenColumns?f.p.id+"_frozen":"";$(f.p.selarrrow).each(function(a,b){var c=$(f).jqGrid("getGridRowById",b);c&&$(c).removeClass("ui-state-highlight"),$("#jqg_"+h(f.p.id)+"_"+h(b))[f.p.useProp?"prop":"attr"]("checked",!1),e&&($("#"+h(b),"#"+h(e)).removeClass("ui-state-highlight"),$("#jqg_"+h(f.p.id)+"_"+h(b),"#"+h(e))[f.p.useProp?"prop":"attr"]("checked",!1))}),f.p.selarrrow=[],$(f).jqGrid("setSelection",Bb,!0,a)}else $(f).jqGrid("setSelection",Bb,!0,a)}else if(f.p.multiselect&&b&&c)$(f).jqGrid("setSelection",Bb,!0,a);else if(fb.length>0){Bb=gb[0].rowIndex;try{$(f).jqGrid("editCell",Bb,Cb,!0)}catch(g){}}}).bind("reloadGrid",function(a,b){var c=this.p,d=this.grid,e=$(this);if(c.treeGrid===!0&&(c.datatype=c.treedatatype),"local"===c.datatype&&c.dataTypeOrg&&c.loadonce&&(c.datatype=String(c.dataTypeOrg),delete c.dataTypeOrg),b&&b.current&&d.selectionPreserver(this),"local"===c.datatype?(e.jqGrid("resetSelection"),c.data.length&&(E(),F())):c.treeGrid||(c.selrow=null,c.multiselect&&(c.selarrrow=[],O(!1)),c.savedRow=[]),c.scroll&&D.call(this,!0,!1),b&&b.page){var f=parseInt(b.page,10);f>c.lastpage&&(f=c.lastpage),1>f&&(f=1),c.page=f,d.bDiv.scrollTop=d.prevRowHeight?(f-1)*d.prevRowHeight*c.rowNum:0}return d.prevRowHeight&&c.scroll?(delete c.lastpage,d.populateVisible()):d.populate(),c._inlinenav===!0&&e.jqGrid("showAddEditButtons"),!1}).dblclick(function(a){if(fb=a.target,gb=$(fb,f.rows).closest("tr.jqgrow"),0!==$(gb).length){Bb=gb[0].rowIndex,Cb=k(fb);var b=$(f).triggerHandler("jqGridDblClickRow",[$(gb).attr("id"),Bb,Cb,a]);return null!=b?b:$.isFunction(f.p.ondblClickRow)&&(b=f.p.ondblClickRow.call(f,$(gb).attr("id"),Bb,Cb,a),null!=b)?b:void 0}}).bind("contextmenu",function(a){if(fb=a.target,gb=$(fb,f.rows).closest("tr.jqgrow"),0!==$(gb).length){f.p.multiselect||$(f).jqGrid("setSelection",gb[0].id,!0,a),Bb=gb[0].rowIndex,Cb=k(fb);var b=$(f).triggerHandler("jqGridRightClickRow",[$(gb).attr("id"),Bb,Cb,a]);return null!=b?b:$.isFunction(f.p.onRightClickRow)&&(b=f.p.onRightClickRow.call(f,$(gb).attr("id"),Bb,Cb,a),null!=b)?b:void 0}}),l.bDiv=document.createElement("div"),p&&"auto"===String(f.p.height).toLowerCase()&&(f.p.height="100%"),$(l.bDiv).append($('<div style="position:relative;"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:f.p.height+(isNaN(f.p.height)?"":"px"),width:l.width+"px"}).scroll(l.scrollGrid),$("table:first",l.bDiv).css({width:f.p.tblwidth+"px"}),$.support.tbody||2===$("tbody",this).length&&$("tbody:gt(0)",this).remove(),f.p.multikey&&(c.msie?$(l.bDiv).bind("selectstart",function(){return!1}):$(l.bDiv).bind("mousedown",function(){return!1})),xb&&$(l.bDiv).hide(),l.cDiv=document.createElement("div");var Eb=f.p.hidegrid===!0?$("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' "+(f.p.showhide?"title='"+f.p.showhide+"'":"")+" />").hover(function(){Eb.addClass("ui-state-hover")},function(){Eb.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===n?"left":"right","0"):"";if($(l.cDiv).append(Eb).append("<span class='ui-jqgrid-title'>"+f.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===n?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix"),$(l.cDiv).insertBefore(l.hDiv),f.p.toolbar[0]&&(l.uDiv=document.createElement("div"),"top"===f.p.toolbar[1]?$(l.uDiv).insertBefore(l.hDiv):"bottom"===f.p.toolbar[1]&&$(l.uDiv).insertAfter(l.hDiv),"both"===f.p.toolbar[1]?(l.ubDiv=document.createElement("div"),$(l.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(l.hDiv),$(l.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(l.hDiv),xb&&$(l.ubDiv).hide()):$(l.uDiv).width(l.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),xb&&$(l.uDiv).hide()),f.p.datatype=f.p.datatype.toLowerCase(),f.p.toppager?(f.p.toppager=f.p.id+"_toppager",l.topDiv=$("<div id='"+f.p.toppager+"'></div>")[0],$(l.topDiv).addClass("ui-state-default ui-jqgrid-toppager").css({width:l.width+"px"}).insertBefore(l.hDiv),P(f.p.toppager,"_t"),f.p.toppager="#"+h(f.p.toppager)):""===f.p.pager&&(f.p.rowNum=f.p.maxRowNum),f.p.footerrow&&(l.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],yb=$("<div class='ui-jqgrid-hbox"+("rtl"===n?"-rtl":"")+"'></div>"),$(l.sDiv).append(yb).width(l.width).insertAfter(l.hDiv),$(yb).append(sb),l.footers=$(".ui-jqgrid-ftable",l.sDiv)[0].rows[0].cells,f.p.rownumbers&&(l.footers[0].className="ui-state-default jqgrid-rownum"),xb&&$(l.sDiv).hide()),yb=null,f.p.caption){var Fb=f.p.datatype;f.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",l.cDiv).click(function(a){var b,c=$.isFunction(f.p.onHeaderClick),d=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",e=this;return f.p.toolbar[0]===!0&&("both"===f.p.toolbar[1]&&(d+=",#"+h($(l.ubDiv).attr("id"))),d+=",#"+h($(l.uDiv).attr("id"))),b=$(d,"#gview_"+h(f.p.id)).length,f.p.toppager&&(d+=","+f.p.toppager),"visible"===f.p.gridstate?$(d,"#gbox_"+h(f.p.id)).slideUp("fast",function(){b--,0===b&&($("span",e).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),f.p.gridstate="hidden",$("#gbox_"+h(f.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+h(f.p.id)).hide(),$(f.grid.cDiv).addClass("ui-corner-bottom"),$(f).triggerHandler("jqGridHeaderClick",[f.p.gridstate,a]),c&&(xb||f.p.onHeaderClick.call(f,f.p.gridstate,a)))}):"hidden"===f.p.gridstate&&($(f.grid.cDiv).removeClass("ui-corner-bottom"),$(d,"#gbox_"+h(f.p.id)).slideDown("fast",function(){b--,0===b&&($("span",e).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),xb&&(f.p.datatype=Fb,N(),xb=!1),f.p.gridstate="visible",$("#gbox_"+h(f.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+h(f.p.id)).show(),$(f).triggerHandler("jqGridHeaderClick",[f.p.gridstate,a]),c&&(xb||f.p.onHeaderClick.call(f,f.p.gridstate,a)))})),!1}),xb&&(f.p.datatype="local",$(".ui-jqgrid-titlebar-close",l.cDiv).trigger("click")))}else $(l.cDiv).hide(),$(l.cDiv).nextAll("div:visible").filter(":first").addClass("ui-corner-top");$(l.hDiv).after(l.bDiv).mousemove(function(a){return l.resizing?(l.dragMove(a),!1):void 0}),$(r).click(g).dblclick(function(a){var b,c,d,e,g,i=f.p,j=$("#rs_m"+h(i.id)),k=j.offset(),l=j.data("idx"),m=i.colModel[l],n=$(this).data("pageX")||j.data("pageX");return null==n?!1:(d=String(n).split(";"),e=parseFloat(d[0]),g=parseFloat(d[1]),2===d.length&&(Math.abs(e-g)>5||Math.abs(a.pageX-e)>5||Math.abs(a.pageX-g)>5)?!1:(b=$(f).triggerHandler("jqGridResizeDblClick",[l,m]),b=b===!1||"stop"===b?!1:!0,$.isFunction(i.resizeDblClick)&&(c=i.resizeDblClick.call(f,l,m),(c===!1||"stop"===c)&&(b=!1)),b&&k.left-1<=a.pageX&&a.pageX<=k.left+j.outerWidth()+1&&null!=m&&m.autoResizable&&$(f).jqGrid("autoResizeColumn",l),!1))}),f.p.pager||$(l.cDiv).nextAll("div:visible").filter(":last").addClass("ui-corner-bottom"),$(".ui-jqgrid-labels",l.hDiv).bind("selectstart",function(){return!1}),$(document).bind("mouseup.jqGrid"+f.p.id,function(){return l.resizing!==!1?(l.dragEnd(),!1):!0}),f.formatCol=v,f.sortData=R,f.updatepager=K,f.refreshIndex=F,f.setHeadCheckBox=O,f.constructTr=G,f.formatter=function(a,b,c,d,e){return x(a,b,c,d,e)},$.extend(l,{populate:N,emptyRows:D,beginReq:L,endReq:M}),this.grid=l,f.addXmlData=function(a){H(a,f.grid.bDiv)},f.addJSONData=function(a){I(a,f.grid.bDiv)},this.grid.cols=this.rows[0].cells,$(f).triggerHandler("jqGridInitGrid"),$.isFunction(f.p.onInitGrid)&&f.p.onInitGrid.call(f),N(),f.p.hiddengrid=!1}})},$.jgrid.extend({getGridParam:function(a){var b=this[0];if(b&&b.grid)return a?void 0!==b.p[a]?b.p[a]:null:b.p},setGridParam:function(a,b){return this.each(function(){if(null==b&&(b=!1),this.grid&&"object"==typeof a)if(b===!0){var c=$.extend({},this.p,a);this.p=c}else $.extend(!0,this.p,a)})},getGridRowById:function(a){var b;return this.each(function(){try{for(var c=this.rows.length;c--;)if(a.toString()===this.rows[c].id){b=this.rows[c];break}}catch(d){b=$(this.grid.bDiv).find("#"+$.jgrid.jqID(a))}}),b},getDataIDs:function(){var a,b=[],c=0,d=0;return this.each(function(){if(a=this.rows.length,a&&a>0)for(;a>c;)$(this.rows[c]).hasClass("jqgrow")&&(b[d]=this.rows[c].id,d++),c++}),b},setSelection:function(a,b,c){return this.each(function(){function d(a){var b=$(l.grid.bDiv)[0].clientHeight,c=$(l.grid.bDiv)[0].scrollTop,d=$(l.rows[a]).position().top,e=l.rows[a].clientHeight;d+e>=b+c?$(l.grid.bDiv)[0].scrollTop=d-(b+c)+e+c:b+c>d&&c>d&&($(l.grid.bDiv)[0].scrollTop=d)}var e,f,g,h,i,j,k,l=this,m=$.jgrid.jqID;void 0!==a&&(b=b===!1?!1:!0,f=$(l).jqGrid("getGridRowById",a),!f||!f.className||f.className.indexOf("ui-state-disabled")>-1||(l.p.scrollrows===!0&&(g=$(l).jqGrid("getGridRowById",a).rowIndex,g>=0&&d(g)),l.p.frozenColumns===!0&&(j=l.p.id+"_frozen"),l.p.multiselect?(l.setHeadCheckBox(!1),l.p.selrow=f.id,h=$.inArray(l.p.selrow,l.p.selarrrow),-1===h?("ui-subgrid"!==f.className&&$(f).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,l.p.selarrrow.push(l.p.selrow)):("ui-subgrid"!==f.className&&$(f).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,l.p.selarrrow.splice(h,1),i=l.p.selarrrow[0],l.p.selrow=void 0===i?null:i),$("#jqg_"+m(l.p.id)+"_"+m(f.id))[l.p.useProp?"prop":"attr"]("checked",e),j&&(-1===h?$("#"+m(a),"#"+m(j)).addClass("ui-state-highlight"):$("#"+m(a),"#"+m(j)).removeClass("ui-state-highlight"),$("#jqg_"+m(l.p.id)+"_"+m(a),"#"+m(j))[l.p.useProp?"prop":"attr"]("checked",e)),b&&($(l).triggerHandler("jqGridSelectRow",[f.id,e,c]),l.p.onSelectRow&&l.p.onSelectRow.call(l,f.id,e,c))):"ui-subgrid"!==f.className&&(l.p.selrow!==f.id?(k=$(l).jqGrid("getGridRowById",l.p.selrow),k&&$(k).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(f).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),j&&($("#"+m(l.p.selrow),"#"+m(j)).removeClass("ui-state-highlight"),$("#"+m(a),"#"+m(j)).addClass("ui-state-highlight")),e=!0):e=!1,l.p.selrow=f.id,b&&($(l).triggerHandler("jqGridSelectRow",[f.id,e,c]),l.p.onSelectRow&&l.p.onSelectRow.call(l,f.id,e,c)))))})},resetSelection:function(a){return this.each(function(){var b,c,d=this,e=$.jgrid.jqID;if(d.p.frozenColumns===!0&&(c=d.p.id+"_frozen"),void 0!==a){if(b=a===d.p.selrow?d.p.selrow:a,$("#"+e(d.p.id)+" tbody:first tr#"+e(b)).removeClass("ui-state-highlight").attr("aria-selected","false"),c&&$("#"+e(b),"#"+e(c)).removeClass("ui-state-highlight"),d.p.multiselect){$("#jqg_"+e(d.p.id)+"_"+e(b),"#"+e(d.p.id))[d.p.useProp?"prop":"attr"]("checked",!1),c&&$("#jqg_"+e(d.p.id)+"_"+e(b),"#"+e(c))[d.p.useProp?"prop":"attr"]("checked",!1),d.setHeadCheckBox(!1);var f=$.inArray(e(b),d.p.selarrrow);-1!==f&&d.p.selarrrow.splice(f,1)}b=null}else d.p.multiselect?($(d.p.selarrrow).each(function(a,b){$($(d).jqGrid("getGridRowById",b)).removeClass("ui-state-highlight").attr("aria-selected","false"),$("#jqg_"+e(d.p.id)+"_"+e(b))[d.p.useProp?"prop":"attr"]("checked",!1),c&&($("#"+e(b),"#"+e(c)).removeClass("ui-state-highlight"),$("#jqg_"+e(d.p.id)+"_"+e(b),"#"+e(c))[d.p.useProp?"prop":"attr"]("checked",!1))}),d.setHeadCheckBox(!1),d.p.selarrrow=[],d.p.selrow=null):d.p.selrow&&($("#"+e(d.p.id)+" tbody:first tr#"+e(d.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),c&&$("#"+e(d.p.selrow),"#"+e(c)).removeClass("ui-state-highlight"),d.p.selrow=null);d.p.cellEdit===!0&&parseInt(d.p.iCol,10)>=0&&parseInt(d.p.iRow,10)>=0&&($("td:eq("+d.p.iCol+")",d.rows[d.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(d.rows[d.p.iRow]).removeClass("selected-row ui-state-hover")),d.p.savedRow=[]})},getRowData:function(a){var b,c,d={},e=!1,f=0;return this.each(function(){var g,h,i=this;if(void 0===a)e=!0,b=[],c=i.rows.length;else{if(h=$(i).jqGrid("getGridRowById",a),!h)return d;c=2}for(;c>f;)e&&(h=i.rows[f]),$(h).hasClass("jqgrow")&&($('td[role="gridcell"]',h).each(function(a){if(g=i.p.colModel[a].name,"cb"!==g&&"subgrid"!==g&&"rn"!==g)if(i.p.treeGrid===!0&&g===i.p.ExpandColumn)d[g]=$.jgrid.htmlDecode($("span:first",this).html());else try{d[g]=$.unformat.call(i,this,{rowId:h.id,colModel:i.p.colModel[a]},a)}catch(b){d[g]=$.jgrid.htmlDecode($(this).html())}}),e&&(b.push(d),d={})),f++}),b||d},delRowData:function(a){var b,c,d,e=!1;return this.each(function(){var f=this;if(b=$(f).jqGrid("getGridRowById",a),!b)return!1;if(f.p.subGrid&&(d=$(b).next(),d.hasClass("ui-subgrid")&&d.remove()),$(b).remove(),f.p.records--,f.p.reccount--,f.updatepager(!0,!1),e=!0,f.p.multiselect&&(c=$.inArray(a,f.p.selarrrow),-1!==c&&f.p.selarrrow.splice(c,1)),f.p.selrow=f.p.multiselect&&f.p.selarrrow.length>0?f.p.selarrrow[f.p.selarrrow.length-1]:null,"local"===f.p.datatype){var g=$.jgrid.stripPref(f.p.idPrefix,a),h=f.p._index[g];void 0!==h&&(f.p.data.splice(h,1),f.refreshIndex())}if(f.p.altRows===!0&&e){var i=f.p.altclass;$(f.rows).each(function(a){a%2===1?$(this).addClass(i):$(this).removeClass(i)})}}),e},setRowData:function(a,b,c){var d,e,f=!0;return this.each(function(){if(!this.grid)return!1;var g,h,i=this,j=typeof c,k={};if(h=$(this).jqGrid("getGridRowById",a),!h)return!1;if(b)try{if($(this.p.colModel).each(function(c){d=this.name;var f=$.jgrid.getAccessor(b,d);void 0!==f&&(k[d]=this.formatter&&"string"==typeof this.formatter&&"date"===this.formatter?$.unformat.date.call(i,f,this):f,g=i.formatter(a,k[d],c,b,"edit"),e=this.title?{title:$.jgrid.stripHtml(g)}:{},i.p.treeGrid===!0&&d===i.p.ExpandColumn?$("td[role='gridcell']:eq("+c+") > span:first",h).html(g).attr(e):$("td[role='gridcell']:eq("+c+")",h).html(g).attr(e))}),"local"===i.p.datatype){var l,m=$.jgrid.stripPref(i.p.idPrefix,a),n=i.p._index[m];if(i.p.treeGrid)for(l in i.p.treeReader)i.p.treeReader.hasOwnProperty(l)&&delete k[i.p.treeReader[l]];void 0!==n&&(i.p.data[n]=$.extend(!0,i.p.data[n],k)),k=null}}catch(o){f=!1}f&&("string"===j?$(h).addClass(c):null!==c&&"object"===j&&$(h).css(c),$(i).triggerHandler("jqGridAfterGridComplete"))}),f},addRowData:function(a,b,c,d){-1===["first","last","before","after"].indexOf(c)&&(c="last");var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=!1,t="";return b&&($.isArray(b)?(m=!0,n=a):(b=[b],m=!1),this.each(function(){var u=this,v=b.length;i=u.p.rownumbers===!0?1:0,g=u.p.multiselect===!0?1:0,h=u.p.subGrid===!0?1:0,m||(void 0!==a?a=String(a):(a=$.jgrid.randId(),u.p.keyName!==!1&&(n=u.p.keyName,void 0!==b[0][n]&&(a=b[0][n])))),o=u.p.altclass;for(var w=0,x="",y={},z=$.isFunction(u.p.afterInsertRow)?!0:!1;v>w;){if(p=b[w],f=[],m){try{a=p[n],void 0===a&&(a=$.jgrid.randId())}catch(A){a=$.jgrid.randId()}x=u.p.altRows===!0&&(u.rows.length-1)%2===0?o:""}for(r=a,a=u.p.idPrefix+a,i&&(t=u.formatCol(0,1,"",null,a,!0),f.push('<td role="gridcell" class="ui-state-default jqgrid-rownum" '+t+">0</td>")),g&&(l='<input role="checkbox" type="checkbox" id="jqg_'+u.p.id+"_"+a+'" class="cbox" aria-checked="false"/>',t=u.formatCol(i,1,"",null,a,!0),f.push('<td role="gridcell" '+t+">"+l+"</td>")),h&&f.push($(u).jqGrid("addSubGridCell",g+i,1)),k=g+h+i;k<u.p.colModel.length;k++)q=u.p.colModel[k],e=q.name,y[e]=p[e],l=u.formatter(a,$.jgrid.getAccessor(p,e),k,p),t=u.formatCol(k,1,l,p,a,y),f.push('<td role="gridcell" '+t+">"+l+"</td>");if(f.unshift(u.constructTr(a,!1,x,y,p,!1)),f.push("</tr>"),f=f.join(""),0===u.rows.length)$("table:first",u.grid.bDiv).append(f);else switch(c){case"last":$(u.rows[u.rows.length-1]).after(f),j=u.rows.length-1;break;case"first":$(u.rows[0]).after(f),j=1;break;case"after":j=$(u).jqGrid("getGridRowById",d),j&&($(u.rows[j.rowIndex+1]).hasClass("ui-subgrid")?($(u.rows[j.rowIndex+1]).after(f),j=j.rowIndex+2):($(j).after(f),j=j.rowIndex+1));break;case"before":j=$(u).jqGrid("getGridRowById",d),j&&($(j).before(f),j=j.rowIndex-1)}u.p.subGrid===!0&&$(u).jqGrid("addSubGrid",g+i,j),u.p.records++,u.p.reccount++,$(u).triggerHandler("jqGridAfterInsertRow",[a,p,p]),z&&u.p.afterInsertRow.call(u,a,p,p),w++,"local"===u.p.datatype&&(y[u.p.localReader.id]=r,u.p._index[r]=u.p.data.length,u.p.data.push(y),y={})}u.p.altRows!==!0||m||("last"===c?(u.rows.length-1)%2===1&&$(u.rows[u.rows.length-1]).addClass(o):$(u.rows).each(function(a){a%2===1?$(this).addClass(o):$(this).removeClass(o)})),u.updatepager(!0,!0),s=!0})),s},footerData:function(a,b,c){function d(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0}var e,f,g=!1,h={};return void 0===a&&(a="get"),"boolean"!=typeof c&&(c=!0),a=a.toLowerCase(),this.each(function(){var i,j=this;return j.grid&&j.p.footerrow?"set"===a&&d(b)?!1:(g=!0,void $(this.p.colModel).each(function(d){e=this.name,"set"===a?void 0!==b[e]&&(i=c?j.formatter("",b[e],d,b,"edit"):b[e],f=this.title?{title:$.jgrid.stripHtml(i)}:{},$("tr.footrow td:eq("+d+")",j.grid.sDiv).html(i).attr(f),g=!0):"get"===a&&(h[e]=$("tr.footrow td:eq("+d+")",j.grid.sDiv).html())})):!1}),"get"===a?h:g},showHideCol:function(a,b){return this.each(function(){var c,d=this,e=!1,f=$.jgrid.cell_width?0:d.p.cellLayout;if(d.grid){"string"==typeof a&&(a=[a]),b="none"!==b?"":"none";var g=""===b?!0:!1,h=d.p.groupHeader&&("object"==typeof d.p.groupHeader||$.isFunction(d.p.groupHeader));h&&$(d).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(h){if(-1!==$.inArray(this.name,a)&&this.hidden===g){if(d.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr[role=row]",d.grid.hDiv).each(function(){$(this.cells[h]).css("display",b)}),$(d.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[h]).css("display",b)}),d.p.footerrow&&$("tr.footrow td:eq("+h+")",d.grid.sDiv).css("display",b),c=parseInt(this.width,10),"none"===b?d.p.tblwidth-=c+f:d.p.tblwidth+=c+f,this.hidden=!g,e=!0,$(d).triggerHandler("jqGridShowHideCol",[g,this.name,h])}}),e===!0&&(d.p.shrinkToFit!==!0||isNaN(d.p.height)||(d.p.tblwidth+=parseInt(d.p.scrollOffset,10)),$(d).jqGrid("setGridWidth",d.p.shrinkToFit===!0?d.p.tblwidth:d.p.width)),h&&$(d).jqGrid("setGroupHeaders",d.p.groupHeader)}})},hideCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"none")})},showCol:function(a){return this.each(function(){$(this).jqGrid("showHideCol",a,"")})},remapColumns:function(a,b,c){function d(b){var c;c=b.length?$.makeArray(b):$.extend({},b),$.each(a,function(a){b[a]=c[this]})}function e(b,c){$(">tr"+(c||""),b).each(function(){var b=this,c=$.makeArray(b.cells);$.each(a,function(){var a=c[this];a&&b.appendChild(a)})})}var f=this.get(0);d(f.p.colModel),d(f.p.colNames),d(f.grid.headers),e($("thead:first",f.grid.hDiv),c&&":not(.ui-jqgrid-labels)"),b&&e($("#"+$.jgrid.jqID(f.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),f.p.footerrow&&e($("tbody:first",f.grid.sDiv)),f.p.remapColumns&&(f.p.remapColumns.length?d(f.p.remapColumns):f.p.remapColumns=$.makeArray(a)),f.p.lastsort=$.inArray(f.p.lastsort,a),f.p.treeGrid&&(f.p.expColInd=$.inArray(f.p.expColInd,a)),$(f).triggerHandler("jqGridRemapColumns",[a,b,c])},setGridWidth:function(a,b){return this.each(function(){if(this.grid){var c,d,e,f,g=this,h=$.jgrid.jqID(g.p.id),i=0,j=$.jgrid.cell_width?0:g.p.cellLayout,k=0,l=!1,m=g.p.scrollOffset,n=0;if("boolean"!=typeof b&&(b=g.p.shrinkToFit),!isNaN(a)){if(a=parseInt(a,10),g.grid.width=g.p.width=a,$("#gbox_"+h).css("width",a+"px"),$("#gview_"+h).css("width",a+"px"),$(g.grid.bDiv).css("width",a+"px"),$(g.grid.hDiv).css("width",a+"px"),g.p.pager&&$(g.p.pager).css("width",a+"px"),g.p.toppager&&$(g.p.toppager).css("width",a+"px"),g.p.toolbar[0]===!0&&($(g.grid.uDiv).css("width",a+"px"),"both"===g.p.toolbar[1]&&$(g.grid.ubDiv).css("width",a+"px")),g.p.footerrow&&$(g.grid.sDiv).css("width",a+"px"),b===!1&&g.p.forceFit===!0&&(g.p.forceFit=!1),b===!0){if($.each(g.p.colModel,function(){this.hidden===!1&&(c=this.widthOrg,i+=c+j,this.fixed?n+=c+j:k++)}),0===k)return;g.p.tblwidth=i,e=a-j*k-n,isNaN(g.p.height)||($(g.grid.bDiv)[0].clientHeight<$(g.grid.bDiv)[0].scrollHeight||1===g.rows.length)&&(l=!0,e-=m),i=0;var o=g.grid.cols.length>0;if($.each(g.p.colModel,function(a){if(this.hidden===!1&&!this.fixed){if(c=this.widthOrg,c=Math.round(e*c/(g.p.tblwidth-j*k-n)),0>c)return;this.width=c,i+=c,g.grid.headers[a].width=c,g.grid.headers[a].el.style.width=c+"px",g.p.footerrow&&(g.grid.footers[a].style.width=c+"px"),o&&(g.grid.cols[a].style.width=c+"px"),d=a}}),!d)return;if(f=0,l?a-n-(i+j*k)!==m&&(f=a-n-(i+j*k)-m):1!==Math.abs(a-n-(i+j*k))&&(f=a-n-(i+j*k)),g.p.colModel[d].width+=f,g.p.tblwidth=i+f+j*k+n,g.p.tblwidth>a){var p=g.p.tblwidth-parseInt(a,10);g.p.tblwidth=a,c=g.p.colModel[d].width=g.p.colModel[d].width-p}else c=g.p.colModel[d].width;g.grid.headers[d].width=c,g.grid.headers[d].el.style.width=c+"px",o&&(g.grid.cols[d].style.width=c+"px"),g.p.footerrow&&(g.grid.footers[d].style.width=c+"px")}g.p.tblwidth&&($("table:first",g.grid.bDiv).css("width",g.p.tblwidth+"px"),$("table:first",g.grid.hDiv).css("width",g.p.tblwidth+"px"),g.grid.hDiv.scrollLeft=g.grid.bDiv.scrollLeft,g.p.footerrow&&$("table:first",g.grid.sDiv).css("width",g.p.tblwidth+"px"))}}})},setGridHeight:function(a){return this.each(function(){var b=this;if(b.grid){var c=$(b.grid.bDiv);c.css({height:a+(isNaN(a)?"":"px")}),b.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(b.p.id)+"_frozen").parent().height(c.height()-16),b.p.height=a,b.p.scroll&&b.grid.populateVisible()}})},setCaption:function(a){return this.each(function(){this.p.caption=a,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(a),$(this.grid.cDiv).show(),$(this.grid.cDiv).nextAll("div").removeClass("ui-corner-top")})},setLabel:function(a,b,c,d){return this.each(function(){var e=this,f=-1;if(e.grid&&void 0!==a&&($(e.p.colModel).each(function(b){return this.name===a?(f=b,!1):void 0}),f>=0)){var g=$("tr.ui-jqgrid-labels th:eq("+f+")",e.grid.hDiv);if(b){var h=$(".s-ico",g);$("[id^=jqgh_]",g).empty().html(b).append(h),e.p.colNames[f]=b}c&&("string"==typeof c?$(g).addClass(c):$(g).css(c)),"object"==typeof d&&$(g).attr(d)}})},setCell:function(a,b,c,d,e,f){return this.each(function(){var g,h,i=this,j=-1;if(i.grid&&(isNaN(b)?$(i.p.colModel).each(function(a){return this.name===b?(j=a,!1):void 0}):j=parseInt(b,10),j>=0)){var k=$(i).jqGrid("getGridRowById",a);if(k){var l=$("td:eq("+j+")",k),m=0,n=[];if(""!==c||f===!0){for(;m<k.cells.length;)n.push(k.cells[m].innerHTML),m++;if(g=i.formatter(a,c,j,n,"edit"),h=i.p.colModel[j].title?{title:$.jgrid.stripHtml(g)}:{},i.p.treeGrid&&$(".tree-wrap",$(l)).length>0?$("span",$(l)).html(g).attr(h):$(l).html(g).attr(h),"local"===i.p.datatype){var o,p=i.p.colModel[j];c=p.formatter&&"string"==typeof p.formatter&&"date"===p.formatter?$.unformat.date.call(i,c,p):c,o=i.p._index[$.jgrid.stripPref(i.p.idPrefix,a)],void 0!==o&&(i.p.data[o][p.name]=c)}}"string"==typeof d?$(l).addClass(d):d&&$(l).css(d),"object"==typeof e&&$(l).attr(e)}}})},getCell:function(a,b){var c=!1;return this.each(function(){var d=this,e=-1;if(d.grid&&(isNaN(b)?$(d.p.colModel).each(function(a){return this.name===b?(e=a,!1):void 0}):e=parseInt(b,10),e>=0)){var f=$(d).jqGrid("getGridRowById",a);if(f)try{c=$.unformat.call(d,$("td:eq("+e+")",f),{rowId:f.id,colModel:d.p.colModel[e]},e)}catch(g){c=$.jgrid.htmlDecode($("td:eq("+e+")",f).html())}}}),c},getCol:function(a,b,c){var d,e,f,g,h=[],i=0;return b="boolean"!=typeof b?!1:b,void 0===c&&(c=!1),this.each(function(){var j=this,k=-1;if(j.grid&&(isNaN(a)?$(j.p.colModel).each(function(b){return this.name===a?(k=b,!1):void 0}):k=parseInt(a,10),k>=0)){var l=j.rows.length,m=0,n=0;if(l&&l>0){for(;l>m;){if($(j.rows[m]).hasClass("jqgrow")){try{d=$.unformat.call(j,$(j.rows[m].cells[k]),{rowId:j.rows[m].id,colModel:j.p.colModel[k]},k)}catch(o){d=$.jgrid.htmlDecode(j.rows[m].cells[k].innerHTML)}c?(g=parseFloat(d),isNaN(g)||(i+=g,void 0===f&&(f=e=g),e=Math.min(e,g),f=Math.max(f,g),n++)):h.push(b?{id:j.rows[m].id,value:d}:d)}m++}if(c)switch(c.toLowerCase()){case"sum":h=i;break;case"avg":h=i/n;break;case"count":h=l-1;break;case"min":h=e;break;case"max":h=f}}}}),h},clearGridData:function(a){return this.each(function(){var b=this,c=$.jgrid.jqID(b.p.id);if(b.grid){if("boolean"!=typeof a&&(a=!1),b.p.deepempty)$("#"+c+" tbody:first tr:gt(0)").remove();else{var d=$("#"+c+" tbody:first tr:first")[0];$("#"+c+" tbody:first").empty().append(d)}b.p.footerrow&&a&&$(".ui-jqgrid-ftable td",b.grid.sDiv).html("&#160;"),b.p.selrow=null,b.p.selarrrow=[],b.p.savedRow=[],b.p.records=0,b.p.page=1,b.p.lastpage=0,b.p.reccount=0,b.p.data=[],b.p.lastSelectedData=[],b.p._index={},b.updatepager(!0,!1)}})},getInd:function(a,b){var c,d=!1;return this.each(function(){c=$(this).jqGrid("getGridRowById",a),c&&(d=b===!0?c:c.rowIndex)}),d},bindKeys:function(a){var b=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},a||{});return this.each(function(){var a=this;$("body").is("[role]")||$("body").attr("role","application"),a.p.scrollrows=b.scrollingRows,$(a).keydown(function(c){var d,e,f,g=$(a).find("tr[tabindex=0]")[0],h=a.p.treeReader.expanded_field;if(g)if(f=a.p._index[$.jgrid.stripPref(a.p.idPrefix,g.id)],37===c.keyCode||38===c.keyCode||39===c.keyCode||40===c.keyCode){if(38===c.keyCode){if(e=g.previousSibling,d="",e)if($(e).is(":hidden")){for(;e;)if(e=e.previousSibling,!$(e).is(":hidden")&&$(e).hasClass("jqgrow")){d=e.id;break}}else d=e.id;$(a).jqGrid("setSelection",d,!0,c),c.preventDefault()}if(40===c.keyCode){if(e=g.nextSibling,d="",e)if($(e).is(":hidden")){for(;e;)if(e=e.nextSibling,!$(e).is(":hidden")&&$(e).hasClass("jqgrow")){d=e.id;break}}else d=e.id;$(a).jqGrid("setSelection",d,!0,c),c.preventDefault()}37===c.keyCode&&(a.p.treeGrid&&a.p.data[f][h]&&$(g).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyLeft",[a.p.selrow]),$.isFunction(b.onLeftKey)&&b.onLeftKey.call(a,a.p.selrow)),39===c.keyCode&&(a.p.treeGrid&&!a.p.data[f][h]&&$(g).find("div.treeclick").trigger("click"),$(a).triggerHandler("jqGridKeyRight",[a.p.selrow]),$.isFunction(b.onRightKey)&&b.onRightKey.call(a,a.p.selrow))}else 13===c.keyCode?($(a).triggerHandler("jqGridKeyEnter",[a.p.selrow]),$.isFunction(b.onEnter)&&b.onEnter.call(a,a.p.selrow)):32===c.keyCode&&($(a).triggerHandler("jqGridKeySpace",[a.p.selrow]),$.isFunction(b.onSpace)&&b.onSpace.call(a,a.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(a){var b,c=!1;return this.each(function(){void 0!==a&&(b=this.p._index[$.jgrid.stripPref(this.p.idPrefix,a)],b>=0&&(c=this.p.data[b]))}),c},progressBar:function(a){return a=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},a||{}),this.each(function(){var b="show"===a.method?!0:!1,c=$.jgrid.jqID(this.p.id);switch(""!==a.htmlcontent&&$("#load_"+c).html(a.htmlcontent),a.loadtype){case"disable":break;case"enable":$("#load_"+c).toggle(b);break;case"block":$("#lui_"+c).toggle(b),$("#load_"+c).toggle(b)}})},setColWidth:function(a,b,c){return this.each(function(){var d,e,f,g,h=$(this),i=this.grid;if("string"==typeof a){for(d=a,e=h.jqGrid("getGridParam","colModel"),f=0,g=e.length;g>f;f++)if(e[f].name===d){a=f;break}if(f>=g)return}else if("number"!=typeof a)return;i.headers[a].newWidth=b,c!==!1&&(i.newWidth=i.width+b-i.headers[a].width),i.resizeColumn(a,this,!0),c!==!1&&h.jqGrid("setGridWidth",i.newWidth,!1)})},autoResizeColumn:function(a){return this.each(function(){var b,c,d,e,f,g,h=this.rows,i=this.p,j=i.colModel[a],k=$($(this.grid.hDiv).find(".ui-jqgrid-labels>.ui-th-column")[a]),l=k.find(">div"),m=parseFloat(k.css("padding-left")),n=parseFloat(k.css("padding-right")),o=l.find("span.s-ico"),p=l.find(">."+i.autoResizing.wrapperClassName),q=p.outerWidth(),r=parseFloat(p.css("width")),s=0,t=i.autoResizing.wrapperClassName;
if(null!=j&&j.autoResizable&&0!==p.length&&!j.hidden&&!j.fixed){for((!(null!=j.autoResizing&&void 0!==j.autoResizingOption.compact?j.autoResizingOption.compact:i.autoResizing.compact)||o.is(":visible")||"none"!==o.css("display"))&&(s=i.autoResizing.widthOfVisiblePartOfSortIcon,"center"===l.css("text-align")&&(s+=s),"horizontal"===i.viewsortcols[1]&&(s+=s)),s+=q+m+(r===q?m+n:0)+parseFloat(l.css("margin-left"))+parseFloat(l.css("margin-right")),d=0,h=this.rows;d<h.length;d++)b=h[d],$(b).hasClass("jqgrow")&&(c=b.cells[a],null!=c&&(e=$(c),f=$(c.firstChild),f.hasClass(t)&&(s=Math.max(s,f.outerWidth()+($.jgrid.cell_width?parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")):0)+parseFloat(f.css("margin-left"))+parseFloat(f.css("margin-right"))))));s=Math.max(s,null!=j.autoResizing&&void 0!==j.autoResizingOption.minColWidth?j.autoResizingOption.minColWidth:i.autoResizing.minColWidth),$(this).jqGrid("setColWidth",a,Math.min(s,null!=j.autoResizing&&void 0!==j.autoResizingOption.maxColWidth?j.autoResizingOption.maxColWidth:i.autoResizing.maxColWidth),i.autoResizing.adjustGridWidth&&!i.autoResizing.fixWidthOnShrink),i.autoResizing.fixWidthOnShrink&&i.shrinkToFit&&(j.fixed=!0,g=j.widthOrg,j.widthOrg=j.width,$(this).jqGrid("setGridWidth",i.width,!0),j.widthOrg=g,j.fixed=!1)}})},autoResizeAllColumns:function(){return this.each(function(){var a,b,c=$(this),d=this.p.colModel,e=d.length,f=$.jgrid.getMethod("autoResizeColumn");for(a=0;e>a;a++)b=d[a],b.autoResizable&&"actions"!==b.formatter&&f.call(c,a)})}})}(jQuery),function(a){"use strict";a.jgrid.extend({editCell:function(b,c,d){return this.each(function(){var e,f,g,h,i=this;if(i.grid&&i.p.cellEdit===!0){if(b=parseInt(b,10),c=parseInt(c,10),i.p.selrow=i.rows[b].id,i.p.knv||a(i).jqGrid("GridNav"),i.p.savedRow.length>0){if(d===!0&&b===i.p.iRow&&c===i.p.iCol)return;a(i).jqGrid("saveCell",i.p.savedRow[0].id,i.p.savedRow[0].ic)}else window.setTimeout(function(){a("#"+a.jgrid.jqID(i.p.knv)).attr("tabindex","-1").focus()},1);if(h=i.p.colModel[c],e=h.name,"subgrid"!==e&&"cb"!==e&&"rn"!==e){if(g=a("td:eq("+c+")",i.rows[b]),h.editable!==!0||d!==!0||g.hasClass("not-editable-cell"))parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&(a("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")),g.addClass("edit-cell ui-state-highlight"),a(i.rows[b]).addClass("selected-row ui-state-hover"),f=g.html().replace(/\&#160\;/gi,""),a(i).triggerHandler("jqGridSelectCell",[i.rows[b].id,e,f,b,c]),a.isFunction(i.p.onSelectCell)&&i.p.onSelectCell.call(i,i.rows[b].id,e,f,b,c);else{parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0&&(a("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight"),a(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")),a(g).addClass("edit-cell ui-state-highlight"),a(i.rows[b]).addClass("selected-row ui-state-hover");try{f=a.unformat.call(i,g,{rowId:i.rows[b].id,colModel:h},c)}catch(j){f=h.edittype&&"textarea"===h.edittype?a(g).text():a(g).html()}if(i.p.autoencode&&(f=a.jgrid.htmlDecode(f)),h.edittype||(h.edittype="text"),i.p.savedRow.push({id:b,ic:c,name:e,v:f}),("&nbsp;"===f||"&#160;"===f||1===f.length&&160===f.charCodeAt(0))&&(f=""),a.isFunction(i.p.formatCell)){var k=i.p.formatCell.call(i,i.rows[b].id,e,f,b,c);void 0!==k&&(f=k)}a(i).triggerHandler("jqGridBeforeEditCell",[i.rows[b].id,e,f,b,c]),a.isFunction(i.p.beforeEditCell)&&i.p.beforeEditCell.call(i,i.rows[b].id,e,f,b,c);var l=a.extend({},h.editoptions||{},{id:b+"_"+e,name:e,rowId:i.rows[b].id}),m=a.jgrid.createEl.call(i,h.edittype,l,f,!0,a.extend({},a.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));a(g).html("").append(m).attr("tabindex","0"),a.jgrid.bindEv.call(i,m,l),window.setTimeout(function(){a(m).focus()},1),a("input, select, textarea",g).bind("keydown",function(d){if(27===d.keyCode&&(a("input.hasDatepicker",g).length>0?a(".ui-datepicker").is(":hidden")?a(i).jqGrid("restoreCell",b,c):a("input.hasDatepicker",g).datepicker("hide"):a(i).jqGrid("restoreCell",b,c)),13===d.keyCode&&!d.shiftKey)return a(i).jqGrid("saveCell",b,c),!1;if(9===d.keyCode){if(i.grid.hDiv.loading)return!1;d.shiftKey?a(i).jqGrid("prevCell",b,c):a(i).jqGrid("nextCell",b,c)}d.stopPropagation()}),a(i).triggerHandler("jqGridAfterEditCell",[i.rows[b].id,e,f,b,c]),a.isFunction(i.p.afterEditCell)&&i.p.afterEditCell.call(i,i.rows[b].id,e,f,b,c)}i.p.iCol=c,i.p.iRow=b}}})},saveCell:function(b,c){return this.each(function(){var d,e=this;if(e.grid&&e.p.cellEdit===!0){if(d=e.p.savedRow.length>=1?0:null,null!==d){var f,g,h=a("td:eq("+c+")",e.rows[b]),i=e.p.colModel[c],j=i.name,k=a.jgrid.jqID(j);switch(i.edittype){case"select":if(i.editoptions.multiple){var l=a("#"+b+"_"+k,e.rows[b]),m=[];f=a(l).val(),f?f.join(","):f="",a("option:selected",l).each(function(b,c){m[b]=a(c).text()}),g=m.join(",")}else f=a("#"+b+"_"+k+" option:selected",e.rows[b]).val(),g=a("#"+b+"_"+k+" option:selected",e.rows[b]).text();i.formatter&&(g=f);break;case"checkbox":var n=["Yes","No"];i.editoptions&&(n=i.editoptions.value.split(":")),f=a("#"+b+"_"+k,e.rows[b]).is(":checked")?n[0]:n[1],g=f;break;case"password":case"text":case"textarea":case"button":f=a("#"+b+"_"+k,e.rows[b]).val(),g=f;break;case"custom":try{if(!i.editoptions||!a.isFunction(i.editoptions.custom_value))throw"e1";if(f=i.editoptions.custom_value.call(e,a(".customelement",h),"get"),void 0===f)throw"e2";g=f}catch(o){"e1"===o&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===o?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,o.message,a.jgrid.edit.bClose)}}if(g!==e.p.savedRow[d].v){var p=a(e).triggerHandler("jqGridBeforeSaveCell",[e.rows[b].id,j,f,b,c]);if(p&&(f=p,g=p),a.isFunction(e.p.beforeSaveCell)){var q=e.p.beforeSaveCell.call(e,e.rows[b].id,j,f,b,c);q&&(f=q,g=q)}var r=a.jgrid.checkValues.call(e,f,c);if(r[0]===!0){var s=a(e).triggerHandler("jqGridBeforeSubmitCell",[e.rows[b].id,j,f,b,c])||{};if(a.isFunction(e.p.beforeSubmitCell)&&(s=e.p.beforeSubmitCell.call(e,e.rows[b].id,j,f,b,c),s||(s={})),a("input.hasDatepicker",h).length>0&&a("input.hasDatepicker",h).datepicker("hide"),"remote"===e.p.cellsubmit)if(e.p.cellurl){var t={};e.p.autoencode&&(f=a.jgrid.htmlEncode(f)),t[j]=f;var u,v,w;w=e.p.prmNames,u=w.id,v=w.oper,t[u]=a.jgrid.stripPref(e.p.idPrefix,e.rows[b].id),t[v]=w.editoper,t=a.extend(s,t),a(e).jqGrid("progressBar",{method:"show",loadtype:e.p.loadui,htmlcontent:a.jgrid.defaults.savetext||"Saving..."}),e.grid.hDiv.loading=!0,a.ajax(a.extend({url:e.p.cellurl,data:a.isFunction(e.p.serializeCellData)?e.p.serializeCellData.call(e,t):t,type:"POST",complete:function(d,i){if(a(e).jqGrid("progressBar",{method:"hide",loadtype:e.p.loadui}),e.grid.hDiv.loading=!1,"success"===i){var k=a(e).triggerHandler("jqGridAfterSubmitCell",[e,d,t.id,j,f,b,c])||[!0,""];k[0]===!0&&a.isFunction(e.p.afterSubmitCell)&&(k=e.p.afterSubmitCell.call(e,d,t.id,j,f,b,c)),k[0]===!0?(a(h).empty(),a(e).jqGrid("setCell",e.rows[b].id,c,g,!1,!1,!0),a(h).addClass("dirty-cell"),a(e.rows[b]).addClass("edited"),a(e).triggerHandler("jqGridAfterSaveCell",[e.rows[b].id,j,f,b,c]),a.isFunction(e.p.afterSaveCell)&&e.p.afterSaveCell.call(e,e.rows[b].id,j,f,b,c),e.p.savedRow.splice(0,1)):(a.jgrid.info_dialog(a.jgrid.errors.errcap,k[1],a.jgrid.edit.bClose),a(e).jqGrid("restoreCell",b,c))}},error:function(d,f,g){a("#lui_"+a.jgrid.jqID(e.p.id)).hide(),e.grid.hDiv.loading=!1,a(e).triggerHandler("jqGridErrorCell",[d,f,g]),a.isFunction(e.p.errorCell)?(e.p.errorCell.call(e,d,f,g),a(e).jqGrid("restoreCell",b,c)):(a.jgrid.info_dialog(a.jgrid.errors.errcap,d.status+" : "+d.statusText+"<br/>"+f,a.jgrid.edit.bClose),a(e).jqGrid("restoreCell",b,c))}},a.jgrid.ajaxOptions,e.p.ajaxCellOptions||{}))}else try{a.jgrid.info_dialog(a.jgrid.errors.errcap,a.jgrid.errors.nourl,a.jgrid.edit.bClose),a(e).jqGrid("restoreCell",b,c)}catch(o){}"clientArray"===e.p.cellsubmit&&(a(h).empty(),a(e).jqGrid("setCell",e.rows[b].id,c,g,!1,!1,!0),a(h).addClass("dirty-cell"),a(e.rows[b]).addClass("edited"),a(e).triggerHandler("jqGridAfterSaveCell",[e.rows[b].id,j,f,b,c]),a.isFunction(e.p.afterSaveCell)&&e.p.afterSaveCell.call(e,e.rows[b].id,j,f,b,c),e.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){a.jgrid.info_dialog(a.jgrid.errors.errcap,f+" "+r[1],a.jgrid.edit.bClose)},100),a(e).jqGrid("restoreCell",b,c)}catch(o){}}else a(e).jqGrid("restoreCell",b,c)}window.setTimeout(function(){a("#"+a.jgrid.jqID(e.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(b,c){return this.each(function(){var d,e=this;if(e.grid&&e.p.cellEdit===!0){if(d=e.p.savedRow.length>=1?0:null,null!==d){var f=a("td:eq("+c+")",e.rows[b]);if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker",f).datepicker("hide")}catch(g){}a(f).empty().attr("tabindex","-1"),a(e).jqGrid("setCell",e.rows[b].id,c,e.p.savedRow[d].v,!1,!1,!0),a(e).triggerHandler("jqGridAfterRestoreCell",[e.rows[b].id,e.p.savedRow[d].v,b,c]),a.isFunction(e.p.afterRestoreCell)&&e.p.afterRestoreCell.call(e,e.rows[b].id,e.p.savedRow[d].v,b,c),e.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+e.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(b,c){return this.each(function(){var d,e=this,f=!1;if(e.grid&&e.p.cellEdit===!0){for(d=c+1;d<e.p.colModel.length;d++)if(e.p.colModel[d].editable===!0){f=d;break}f!==!1?a(e).jqGrid("editCell",b,f,!0):e.p.savedRow.length>0&&a(e).jqGrid("saveCell",b,c)}})},prevCell:function(b,c){return this.each(function(){var d,e=this,f=!1;if(e.grid&&e.p.cellEdit===!0){for(d=c-1;d>=0;d--)if(e.p.colModel[d].editable===!0){f=d;break}f!==!1?a(e).jqGrid("editCell",b,f,!0):e.p.savedRow.length>0&&a(e).jqGrid("saveCell",b,c)}})},GridNav:function(){return this.each(function(){function b(b,c,e){if("v"===e.substr(0,1)){var f=a(d.grid.bDiv)[0].clientHeight,g=a(d.grid.bDiv)[0].scrollTop,h=d.rows[b].offsetTop+d.rows[b].clientHeight,i=d.rows[b].offsetTop;"vd"===e&&h>=f&&(a(d.grid.bDiv)[0].scrollTop=a(d.grid.bDiv)[0].scrollTop+d.rows[b].clientHeight),"vu"===e&&g>i&&(a(d.grid.bDiv)[0].scrollTop=a(d.grid.bDiv)[0].scrollTop-d.rows[b].clientHeight)}if("h"===e){var j=a(d.grid.bDiv)[0].clientWidth,k=a(d.grid.bDiv)[0].scrollLeft,l=d.rows[b].cells[c].offsetLeft+d.rows[b].cells[c].clientWidth,m=d.rows[b].cells[c].offsetLeft;l>=j+parseInt(k,10)?a(d.grid.bDiv)[0].scrollLeft=a(d.grid.bDiv)[0].scrollLeft+d.rows[b].cells[c].clientWidth:k>m&&(a(d.grid.bDiv)[0].scrollLeft=a(d.grid.bDiv)[0].scrollLeft-d.rows[b].cells[c].clientWidth)}}function c(a,b){var c,e;if("lft"===b)for(c=a+1,e=a;e>=0;e--)if(d.p.colModel[e].hidden!==!0){c=e;break}if("rgt"===b)for(c=a-1,e=a;e<d.p.colModel.length;e++)if(d.p.colModel[e].hidden!==!0){c=e;break}return c}var d=this;if(d.grid&&d.p.cellEdit===!0){d.p.knv=d.p.id+"_kn";var e,f,g=a("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+d.p.knv+"'></div></div>");a(g).insertBefore(d.grid.cDiv),a("#"+d.p.knv).focus().keydown(function(g){switch(f=g.keyCode,"rtl"===d.p.direction&&(37===f?f=39:39===f&&(f=37)),f){case 38:d.p.iRow-1>0&&(b(d.p.iRow-1,d.p.iCol,"vu"),a(d).jqGrid("editCell",d.p.iRow-1,d.p.iCol,!1));break;case 40:d.p.iRow+1<=d.rows.length-1&&(b(d.p.iRow+1,d.p.iCol,"vd"),a(d).jqGrid("editCell",d.p.iRow+1,d.p.iCol,!1));break;case 37:d.p.iCol-1>=0&&(e=c(d.p.iCol-1,"lft"),b(d.p.iRow,e,"h"),a(d).jqGrid("editCell",d.p.iRow,e,!1));break;case 39:d.p.iCol+1<=d.p.colModel.length-1&&(e=c(d.p.iCol+1,"rgt"),b(d.p.iRow,e,"h"),a(d).jqGrid("editCell",d.p.iRow,e,!1));break;case 13:parseInt(d.p.iCol,10)>=0&&parseInt(d.p.iRow,10)>=0&&a(d).jqGrid("editCell",d.p.iRow,d.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(b){var c=[];return b||(b="all"),this.each(function(){var d,e=this;e.grid&&e.p.cellEdit===!0&&a(e.rows).each(function(f){var g={};a(this).hasClass("edited")&&(a("td",this).each(function(c){if(d=e.p.colModel[c].name,"cb"!==d&&"subgrid"!==d)if("dirty"===b){if(a(this).hasClass("dirty-cell"))try{g[d]=a.unformat.call(e,this,{rowId:e.rows[f].id,colModel:e.p.colModel[c]},c)}catch(h){g[d]=a.jgrid.htmlDecode(a(this).html())}}else try{g[d]=a.unformat.call(e,this,{rowId:e.rows[f].id,colModel:e.p.colModel[c]},c)}catch(h){g[d]=a.jgrid.htmlDecode(a(this).html())}}),g.id=this.id,c.push(g))})}),c}})}(jQuery),function(a){"use strict";a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true"),a.o&&a.o.remove()},hideModal:function(b,c){c=a.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},c||{});var d=c.gb&&"string"==typeof c.gb&&"#gbox_"===c.gb.substr(0,6)?a("#"+c.gb.substr(6))[0]:!1;if(c.onClose){var e=d?c.onClose.call(d,b):c.onClose(b);if("boolean"==typeof e&&!e)return}if(c.formprop&&d&&c.form){var f=a(b)[0].style.height;f.indexOf("px")>-1&&(f=parseFloat(f));var g,h;"edit"===c.form?(g="#"+a.jgrid.jqID("FrmGrid_"+c.gb.substr(6)),h="formProp"):"view"===c.form&&(g="#"+a.jgrid.jqID("ViewGrid_"+c.gb.substr(6)),h="viewProp"),a(d).data(h,{top:parseFloat(a(b).css("top")),left:parseFloat(a(b).css("left")),width:a(b).width(),height:f,dataheight:a(g).height(),datawidth:a(g).width()})}if(a.fn.jqm&&c.jqm===!0)a(b).attr("aria-hidden","true").jqmHide();else{if(""!==c.gb)try{a(".jqgrid-overlay:first",c.gb).hide()}catch(i){}a(b).hide().attr("aria-hidden","true")}c.removemodal&&a(b).remove()},findPos:function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return[b,c]},createModal:function(b,c,d,e,f,g,h){d=a.extend(!0,{},a.jgrid.jqModal||{},d);var i,j=document.createElement("div"),k=this,l="#"+a.jgrid.jqID(b.themodal),m=b.scrollelm?"#"+a.jgrid.jqID(b.scrollelm):!1;h=a.extend({},h||{}),i="rtl"===a(d.gbox).attr("dir")?!0:!1,j.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",j.id=b.themodal;var n=document.createElement("div");n.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",n.id=b.modalhead,a(n).append("<span class='ui-jqdialog-title'>"+d.caption+"</span>");var o=a("<a class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){o.addClass("ui-state-hover")},function(){o.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(n).append(o),i?(j.dir="rtl",a(".ui-jqdialog-title",n).css("float","right"),a(".ui-jqdialog-titlebar-close",n).css("left","0.3em")):(j.dir="ltr",a(".ui-jqdialog-title",n).css("float","left"),a(".ui-jqdialog-titlebar-close",n).css("right","0.3em"));var p=document.createElement("div");a(p).addClass("ui-jqdialog-content ui-widget-content").attr("id",b.modalcontent),a(p).append(c),j.appendChild(p),a(j).prepend(n),g===!0?a("body").append(j):"string"==typeof g?a(g).append(j):a(j).insertBefore(e),a(j).css(h),void 0===d.jqModal&&(d.jqModal=!0);var q={};if(a.fn.jqm&&d.jqModal===!0){if(0===d.left&&0===d.top&&d.overlay){var r=[];r=a.jgrid.findPos(f),d.left=r[0]+4,d.top=r[1]+4}q.top=d.top+"px",q.left=d.left}else(0!==d.left||0!==d.top)&&(q.left=d.left,q.top=d.top+"px");if(a("a.ui-jqdialog-titlebar-close",n).click(function(){var b=a(l).data("onClose")||d.onClose,c=a(l).data("gbox")||d.gbox;return k.hideModal(l,{gb:c,jqm:d.jqModal,onClose:b,removemodal:d.removemodal||!1,formprop:!d.recreateForm||!1,form:d.form||""}),!1}),0!==d.width&&d.width||(d.width=300),0!==d.height&&d.height||(d.height=200),!d.zIndex){var s=a(e).parents("*[role=dialog]").filter(":first").css("z-index");d.zIndex=s?parseInt(s,10)+2:950}var t=0;if(i&&q.left&&!g&&(t=a(d.gbox).width()-(isNaN(d.width)?0:parseInt(d.width,10))-8,q.left=parseInt(q.left,10)+parseInt(t,10)),q.left&&(q.left+="px"),a(j).css(a.extend({width:isNaN(d.width)?"auto":d.width+"px",height:isNaN(d.height)?"auto":d.height+"px",zIndex:d.zIndex,overflow:"hidden"},q)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":b.modalhead,"aria-hidden":"true"}),void 0===d.drag&&(d.drag=!0),void 0===d.resize&&(d.resize=!0),d.drag)if(a(n).css("cursor","move"),a.fn.jqDrag)a(j).jqDrag(n);else try{a(j).draggable({handle:a("#"+a.jgrid.jqID(n.id))})}catch(u){}if(d.resize)if(a.fn.jqResize)a(j).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),a(l).jqResize(".jqResize",m);else try{a(j).resizable({handles:"se, sw",alsoResize:m})}catch(v){}d.closeOnEscape===!0&&a(j).keydown(function(b){if(27===b.which){var c=a(l).data("onClose")||d.onClose;k.hideModal(l,{gb:d.gbox,jqm:d.jqModal,onClose:c,removemodal:d.removemodal||!1,formprop:!d.recreateForm||!1,form:d.form||""})}})},viewModal:function(b,c){if(c=a.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:a.jgrid.showModal,onHide:a.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},c||{}),a.fn.jqm&&c.jqm===!0)c.jqM?a(b).attr("aria-hidden","false").jqm(c).jqmShow():a(b).attr("aria-hidden","false").jqmShow();else{""!==c.gbox&&(a(".jqgrid-overlay:first",c.gbox).show(),a(b).data("gbox",c.gbox)),a(b).show().attr("aria-hidden","false");try{a(":input:visible",b)[0].focus()}catch(d){}}},info_dialog:function(b,c,d,e){var f={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(!0,f,a.jgrid.jqModal||{},{caption:"<b>"+b+"</b>"},e||{});var g=f.jqModal,h=this;a.fn.jqm&&!g&&(g=!1);var i,j="";if(f.buttons.length>0)for(i=0;i<f.buttons.length;i++)void 0===f.buttons[i].id&&(f.buttons[i].id="info_button_"+i),j+="<a id='"+f.buttons[i].id+"' class='fm-button ui-state-default ui-corner-all'>"+f.buttons[i].text+"</a>";var k=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",l="text-align:"+f.align+";",m="<div id='info_id'>";m+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+k+";"+l+"'>"+c+"</div>",m+=d?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+d+"</a>"+j+"</div>":""!==j?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+j+"</div>":"",m+="</div>";try{"false"===a("#info_dialog").attr("aria-hidden")&&a.jgrid.hideModal("#info_dialog",{jqm:g}),a("#info_dialog").remove()}catch(n){}a.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},m,f,"","",!0),j&&a.each(f.buttons,function(b){a("#"+a.jgrid.jqID(this.id),"#info_id").bind("click",function(){return f.buttons[b].onClick.call(a("#info_dialog")),!1})}),a("#closedialog","#info_id").click(function(){return h.hideModal("#info_dialog",{jqm:g,onClose:a("#info_dialog").data("onClose")||f.onClose,gb:a("#info_dialog").data("gbox")||f.gbox}),!1}),a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),a.isFunction(f.beforeOpen)&&f.beforeOpen(),a.jgrid.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove(),a.o&&a.o.remove()},modal:f.modal,jqm:g}),a.isFunction(f.afterOpen)&&f.afterOpen();try{a("#info_dialog").focus()}catch(o){}},bindEv:function(b,c){var d=this;a.isFunction(c.dataInit)&&c.dataInit.call(d,b,c),c.dataEvents&&a.each(c.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)})},createEl:function(b,c,d,e,f){function g(b,c,d){var e=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value"];void 0!==d&&a.isArray(d)&&a.merge(e,d),a.each(c,function(c,d){-1===a.inArray(c,e)&&a(b).attr(c,d)}),c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var h="",i=this;switch(b){case"textarea":h=document.createElement("textarea"),e?c.cols||a(h).css({width:"98%"}):c.cols||(c.cols=20),c.rows||(c.rows=2),("&nbsp;"===d||"&#160;"===d||1===d.length&&160===d.charCodeAt(0))&&(d=""),h.value=d,g(h,c),a(h).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(h=document.createElement("input"),h.type="checkbox",c.value){var j=c.value.split(":");d===j[0]&&(h.checked=!0,h.defaultChecked=!0),h.value=j[0],a(h).attr("offval",j[1])}else{var k=(d+"").toLowerCase();k.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==k?(h.checked=!0,h.defaultChecked=!0,h.value=d):h.value="on",a(h).attr("offval","off")}g(h,c,["value"]),a(h).attr("role","checkbox");break;case"select":h=document.createElement("select"),h.setAttribute("role","select");var l,m=[];if(c.multiple===!0?(l=!0,h.multiple="multiple",a(h).attr("aria-multiselectable","true")):l=!1,void 0!==c.dataUrl){var n=null,o=c.postData||f.postData;try{n=c.rowId}catch(p){}i.p&&i.p.idPrefix&&(n=a.jgrid.stripPref(i.p.idPrefix,n)),a.ajax(a.extend({url:a.isFunction(c.dataUrl)?c.dataUrl.call(i,n,d,String(c.name)):c.dataUrl,type:"GET",dataType:"html",data:a.isFunction(o)?o.call(i,n,d,String(c.name)):o,context:{elem:h,options:c,vl:d},success:function(b){var c=[],d=this.elem,e=this.vl,f=a.extend({},this.options),h=f.multiple===!0,j=a.isFunction(f.buildSelect)?f.buildSelect.call(i,b):b;"string"==typeof j&&(j=a(a.trim(j)).html()),j&&(a(d).append(j),g(d,f,o?["postData"]:void 0),void 0===f.size&&(f.size=h?3:1),h?(c=e.split(","),c=a.map(c,function(b){return a.trim(b)})):c[0]=a.trim(e),setTimeout(function(){a("option",d).each(function(b){0===b&&d.multiple&&(this.selected=!1),a(this).attr("role","option"),(a.inArray(a.trim(a(this).text()),c)>-1||a.inArray(a.trim(a(this).val()),c)>-1)&&(this.selected="selected")})},0))}},f||{}))}else if(c.value){var q;void 0===c.size&&(c.size=l?3:1),l&&(m=d.split(","),m=a.map(m,function(b){return a.trim(b)})),"function"==typeof c.value&&(c.value=c.value());var r,s,t,u=void 0===c.separator?":":c.separator,v=void 0===c.delimiter?";":c.delimiter;if("string"==typeof c.value)for(r=c.value.split(v),q=0;q<r.length;q++)s=r[q].split(u),s.length>2&&(s[1]=a.map(s,function(a,b){return b>0?a:void 0}).join(u)),t=document.createElement("option"),t.setAttribute("role","option"),t.value=s[0],t.innerHTML=s[1],h.appendChild(t),l||a.trim(s[0])!==a.trim(d)&&a.trim(s[1])!==a.trim(d)||(t.selected="selected"),l&&(a.inArray(a.trim(s[1]),m)>-1||a.inArray(a.trim(s[0]),m)>-1)&&(t.selected="selected");else if("object"==typeof c.value){var w,x=c.value;for(w in x)x.hasOwnProperty(w)&&(t=document.createElement("option"),t.setAttribute("role","option"),t.value=w,t.innerHTML=x[w],h.appendChild(t),l||a.trim(w)!==a.trim(d)&&a.trim(x[w])!==a.trim(d)||(t.selected="selected"),l&&(a.inArray(a.trim(x[w]),m)>-1||a.inArray(a.trim(w),m)>-1)&&(t.selected="selected"))}g(h,c,["value"])}break;case"text":case"password":case"button":var y;y="button"===b?"button":"textbox",h=document.createElement("input"),h.type=b,h.value=d,g(h,c),"button"!==b&&(e?c.size||a(h).css({width:"98%"}):c.size||(c.size=20)),a(h).attr("role",y);break;case"image":case"file":h=document.createElement("input"),h.type=b,g(h,c);break;case"custom":h=document.createElement("span");try{if(!a.isFunction(c.custom_element))throw"e1";var z=c.custom_element.call(i,d,c);if(!z)throw"e2";z=a(z).addClass("customelement").attr({id:c.id,name:c.name}),a(h).empty().append(z)}catch(p){"e1"===p&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===p?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,"string"==typeof p?p:p.message,a.jgrid.edit.bClose)}}return h},checkDate:function(a,b){var c,d=function(a){return a%4!==0||a%100===0&&a%400!==0?28:29},e={};if(a=a.toLowerCase(),c=-1!==a.indexOf("/")?"/":-1!==a.indexOf("-")?"-":-1!==a.indexOf(".")?".":"/",a=a.split(c),b=b.split(c),3!==b.length)return!1;var f,g,h=-1,i=-1,j=-1;for(g=0;g<a.length;g++){var k=isNaN(b[g])?0:parseInt(b[g],10);e[a[g]]=k,f=a[g],-1!==f.indexOf("y")&&(h=g),-1!==f.indexOf("m")&&(j=g),-1!==f.indexOf("d")&&(i=g)}f="y"===a[h]||"yyyy"===a[h]?4:"yy"===a[h]?2:-1;var l,m=[0,31,29,31,30,31,30,31,31,30,31,30,31];return-1===h?!1:(l=e[a[h]].toString(),2===f&&1===l.length&&(f=1),l.length!==f||0===e[a[h]]&&"00"!==b[h]?!1:-1===j?!1:(l=e[a[j]].toString(),l.length<1||e[a[j]]<1||e[a[j]]>12?!1:-1===i?!1:(l=e[a[i]].toString(),l.length<1||e[a[i]]<1||e[a[i]]>31||2===e[a[j]]&&e[a[i]]>d(e[a[h]])||e[a[i]]>m[e[a[j]]]?!1:!0)))},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(b){var c,d=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!a.jgrid.isEmpty(b)){if(c=b.match(d),!c)return!1;if(c[3]){if(c[1]<1||c[1]>12)return!1}else if(c[1]>23)return!1;if(c[2]>59)return!1}return!0},checkValues:function(b,c,d,e){var f,g,h,i,j,k=this,l=k.p.colModel;if(void 0===d)if("string"==typeof c){for(g=0,j=l.length;j>g;g++)if(l[g].name===c){f=l[g].editrules,c=g,null!=l[g].formoptions&&(h=l[g].formoptions.label);break}}else c>=0&&(f=l[c].editrules);else f=d,h=void 0===e?"_":e;if(f){if(h||(h=null!=k.p.colNames?k.p.colNames[c]:l[c].label),f.required===!0&&a.jgrid.isEmpty(b))return[!1,h+": "+a.jgrid.edit.msg.required,""];var m=f.required===!1?!1:!0;if(f.number===!0&&(m!==!1||!a.jgrid.isEmpty(b))&&isNaN(b))return[!1,h+": "+a.jgrid.edit.msg.number,""];if(void 0!==f.minValue&&!isNaN(f.minValue)&&parseFloat(b)<parseFloat(f.minValue))return[!1,h+": "+a.jgrid.edit.msg.minValue+" "+f.minValue,""];if(void 0!==f.maxValue&&!isNaN(f.maxValue)&&parseFloat(b)>parseFloat(f.maxValue))return[!1,h+": "+a.jgrid.edit.msg.maxValue+" "+f.maxValue,""];var n;if(f.email===!0&&!(m===!1&&a.jgrid.isEmpty(b)||(n=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,n.test(b))))return[!1,h+": "+a.jgrid.edit.msg.email,""];if(f.integer===!0&&(m!==!1||!a.jgrid.isEmpty(b))){if(isNaN(b))return[!1,h+": "+a.jgrid.edit.msg.integer,""];if(b%1!==0||-1!==b.indexOf("."))return[!1,h+": "+a.jgrid.edit.msg.integer,""]}if(f.date===!0&&!(m===!1&&a.jgrid.isEmpty(b)||(l[c].formatoptions&&l[c].formatoptions.newformat?(i=l[c].formatoptions.newformat,a.jgrid.formatter.date.masks.hasOwnProperty(i)&&(i=a.jgrid.formatter.date.masks[i])):i=l[c].datefmt||"Y-m-d",a.jgrid.checkDate(i,b))))return[!1,h+": "+a.jgrid.edit.msg.date+" - "+i,""];if(f.time===!0&&!(m===!1&&a.jgrid.isEmpty(b)||a.jgrid.checkTime(b)))return[!1,h+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(f.url===!0&&!(m===!1&&a.jgrid.isEmpty(b)||(n=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,n.test(b))))return[!1,h+": "+a.jgrid.edit.msg.url,""];if(f.custom===!0&&(m!==!1||!a.jgrid.isEmpty(b))){if(a.isFunction(f.custom_func)){var o=f.custom_func.call(k,b,h,c);return a.isArray(o)?o:[!1,a.jgrid.edit.msg.customarray,""]}return[!1,a.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})}(jQuery),function(a){"use strict";a.jgrid.extend({getColProp:function(a){var b={},c=this[0];if(!c.grid)return!1;var d,e=c.p.colModel;for(d=0;d<e.length;d++)if(e[d].name===a){b=e[d];break}return b},setColProp:function(b,c){return this.each(function(){if(this.grid&&c){var d,e=this.p.colModel;for(d=0;d<e.length;d++)if(e[d].name===b){a.extend(!0,this.p.colModel[d],c);break}}})},sortGrid:function(a,b,c){return this.each(function(){var d,e=this,f=-1,g=!1;if(e.grid){for(a||(a=e.p.sortname),d=0;d<e.p.colModel.length;d++)if(e.p.colModel[d].index===a||e.p.colModel[d].name===a){f=d,e.p.frozenColumns===!0&&e.p.colModel[d].frozen===!0&&(g=e.grid.fhDiv.find("#"+e.p.id+"_"+a));break}if(-1!==f){var h=e.p.colModel[f].sortable;g||(g=e.grid.headers[f].el),"boolean"!=typeof h&&(h=!0),"boolean"!=typeof b&&(b=!1),h&&e.sortData("jqgh_"+e.p.id+"_"+a,f,b,c,g)}}})},clearBeforeUnload:function(){return this.each(function(){var b=this.grid;a.isFunction(b.emptyRows)&&b.emptyRows.call(this,!0,!0),a(document).unbind("mouseup.jqGrid"+this.p.id),a(b.hDiv).unbind("mousemove"),a(this).unbind(),b.dragEnd=null,b.dragMove=null,b.dragStart=null,b.emptyRows=null,b.populate=null,b.populateVisible=null,b.scrollGrid=null,b.selectionPreserver=null,b.bDiv=null,b.cDiv=null,b.hDiv=null,b.cols=null;var c,d=b.headers.length;for(c=0;d>c;c++)b.headers[c].el=null;this.formatCol=null,this.sortData=null,this.updatepager=null,this.refreshIndex=null,this.setHeadCheckBox=null,this.constructTr=null,this.formatter=null,this.addXmlData=null,this.addJSONData=null,this.grid=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&a(this.p.pager).remove();try{a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+a.jgrid.jqID(this.id)).remove(),a("#alertmod_"+a.jgrid.jqID(this.id)).remove()}catch(b){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var b={id:a(this).attr("id"),cl:a(this).attr("class")};this.p.pager&&a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");var c=document.createElement("table");a(c).attr({id:b.id}),c.className=b.cl;var d=a.jgrid.jqID(this.id);a(c).removeClass("ui-jqgrid-btable"),1===a(this.p.pager).parents("#gbox_"+d).length?(a(c).insertBefore("#gbox_"+d).show(),a(this.p.pager).insertBefore("#gbox_"+d)):a(c).insertBefore("#gbox_"+d).show(),a(this).jqGrid("clearBeforeUnload"),a("#gbox_"+d).remove()}})},setGridState:function(b){return this.each(function(){if(this.grid){var c=this;"hidden"===b?(a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.jgrid.jqID(c.p.id)).slideUp("fast"),c.p.pager&&a(c.p.pager).slideUp("fast"),c.p.toppager&&a(c.p.toppager).slideUp("fast"),c.p.toolbar[0]===!0&&("both"===c.p.toolbar[1]&&a(c.grid.ubDiv).slideUp("fast"),a(c.grid.uDiv).slideUp("fast")),c.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(c.p.id)).slideUp("fast"),a(".ui-jqgrid-titlebar-close span",c.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),c.p.gridstate="hidden"):"visible"===b&&(a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(c.p.id)).slideDown("fast"),c.p.pager&&a(c.p.pager).slideDown("fast"),c.p.toppager&&a(c.p.toppager).slideDown("fast"),c.p.toolbar[0]===!0&&("both"===c.p.toolbar[1]&&a(c.grid.ubDiv).slideDown("fast"),a(c.grid.uDiv).slideDown("fast")),c.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+a.jgrid.jqID(c.p.id)).slideDown("fast"),a(".ui-jqgrid-titlebar-close span",c.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),c.p.gridstate="visible")}})},filterToolbar:function(b){return b=a.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},a.jgrid.search,b||{}),this.each(function(){var c=this;if(!this.ftoolbar){var d,e=function(){var d,e,f,g={},h=0,i={};a.each(c.p.colModel,function(){var j=a("#gs_"+a.jgrid.jqID(this.name),this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv);if(e=this.index||this.name,f=b.searchOperators?j.parent().prev("a").attr("soper")||b.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":b.defaultSearch,d="custom"===this.stype&&a.isFunction(this.searchoptions.custom_value)&&j.length>0&&"SPAN"===j[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(c,j.children(".customelement:first"),"get"):j.val(),d||"nu"===f||"nn"===f)g[e]=d,i[e]=f,h++;
else try{delete c.p.postData[e]}catch(k){}});var j=h>0?!0:!1;if(b.stringResult===!0||"local"===c.p.datatype||b.searchOperators===!0){var k='{"groupOp":"'+b.groupOp+'","rules":[',l=0;a.each(g,function(a,b){l>0&&(k+=","),k+='{"field":"'+a+'",',k+='"op":"'+i[a]+'",',b+="",k+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',l++}),k+="]}",a.extend(c.p.postData,{filters:k}),a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,g);var m;c.p.searchurl&&(m=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));var n="stop"===a(c).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!n&&a.isFunction(b.beforeSearch)&&(n=b.beforeSearch.call(c)),n||a(c).jqGrid("setGridParam",{search:j}).trigger("reloadGrid",[{page:1}]),m&&a(c).jqGrid("setGridParam",{url:m}),a(c).triggerHandler("jqGridToolbarAfterSearch"),a.isFunction(b.afterSearch)&&b.afterSearch.call(c)},f=function(d){var e,f={},g=0;d="boolean"!=typeof d?!0:d,a.each(c.p.colModel,function(){var b,d=a("#gs_"+a.jgrid.jqID(this.name),this.frozen===!0&&c.p.frozenColumns===!0?c.grid.fhDiv:c.grid.hDiv);switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(b=this.searchoptions.defaultValue),e=this.index||this.name,this.stype){case"select":if(d.find("option").each(function(c){return 0===c&&(this.selected=!0),a(this).val()===b?(this.selected=!0,!1):void 0}),void 0!==b)f[e]=b,g++;else try{delete c.p.postData[e]}catch(h){}break;case"text":if(d.val(b||""),void 0!==b)f[e]=b,g++;else try{delete c.p.postData[e]}catch(i){}break;case"custom":a.isFunction(this.searchoptions.custom_value)&&d.length>0&&"SPAN"===d[0].nodeName.toUpperCase()&&this.searchoptions.custom_value.call(c,d.children(".customelement:first"),"set",b||"")}});var h=g>0?!0:!1;if(c.p.resetsearch=!0,b.stringResult===!0||"local"===c.p.datatype){var i='{"groupOp":"'+b.groupOp+'","rules":[',j=0;a.each(f,function(a,b){j>0&&(i+=","),i+='{"field":"'+a+'",',i+='"op":"eq",',b+="",i+='"data":"'+b.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',j++}),i+="]}",a.extend(c.p.postData,{filters:i}),a.each(["searchField","searchString","searchOper"],function(a,b){c.p.postData.hasOwnProperty(b)&&delete c.p.postData[b]})}else a.extend(c.p.postData,f);var k;c.p.searchurl&&(k=c.p.url,a(c).jqGrid("setGridParam",{url:c.p.searchurl}));var l="stop"===a(c).triggerHandler("jqGridToolbarBeforeClear")?!0:!1;!l&&a.isFunction(b.beforeClear)&&(l=b.beforeClear.call(c)),l||d&&a(c).jqGrid("setGridParam",{search:h}).trigger("reloadGrid",[{page:1}]),k&&a(c).jqGrid("setGridParam",{url:k}),a(c).triggerHandler("jqGridToolbarAfterClear"),a.isFunction(b.afterClear)&&b.afterClear()},g=function(){var b=a("tr.ui-search-toolbar",c.grid.hDiv),d=c.p.frozenColumns===!0?a("tr.ui-search-toolbar",c.grid.fhDiv):!1;"none"===b.css("display")?(b.show(),d&&d.show()):(b.hide(),d&&d.hide())},h=function(d,f,g){f=parseInt(f,10),g=parseInt(g,10)+18;var h,i='<div id="sopt_menu" class="ui-search-menu" role="menu" style="left:'+f+"px;top:"+g+'px;">',j=(a(d).attr("soper"),a("#sopt_menu")),k=[],l=0,m=a(d).attr("colname"),n=c.p.colModel.length;for(j.remove();n>l&&c.p.colModel[l].name!==m;)l++;var o=c.p.colModel[l],p=a.extend({},o.searchoptions);for(p.sopt||(p.sopt=[],p.sopt[0]="select"===o.stype?"eq":b.defaultSearch),a.each(b.odata,function(){k.push(this.oper)}),l=0;l<p.sopt.length;l++)h=a.inArray(p.sopt[l],k),-1!==h&&(i+='<a class="ui-corner-all g-menu-item" role="menuitem" value="'+b.odata[h].oper+'" oper="'+b.operands[b.odata[h].oper]+'"><span class="sopt-menu-operand">'+b.operands[b.odata[h].oper]+"</span> <span>"+b.odata[h].text+"</span></a>");i+="</div>",a("body").append(i);var j=a("#sopt_menu");j.addClass("ui-menu ui-widget"),a("a",j).hover(function(){a(this).addClass("ui-state-hover").css("font-weight","normal")},function(){a(this).removeClass("ui-state-hover")}).click(function(){var f=a(this).attr("value"),g=a(this).attr("oper");if(a(c).triggerHandler("jqGridToolbarSelectOper",[f,g,d]),j.hide(),a(d).text(g).attr("soper",f),b.autosearch===!0){var h=a(d).parent().next().children()[0];(a(h).val()||"nu"===f||"nn"===f)&&e()}})},i=a("<tr class='ui-search-toolbar' role='row'></tr>");a.each(c.p.colModel,function(){var f,g,h,j,k,l=this,m="",n="=",o=a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+c.p.direction+"'></th>");if(this.hidden===!0&&a(o).css("display","none"),this.search=this.search===!1?!1:!0,f=a.extend({},this.searchoptions||{}),this.search){void 0===this.stype&&(this.stype="text");var p=a("<div class='ui-search-box'><span class='ui-search-input'></span><span class='ui-search-clear'></span></div>");if(b.searchOperators&&"checkbox"!==l.edittype){for(j=f.sopt?f.sopt[0]:"select"===l.stype?"eq":b.defaultSearch,k=0;k<b.odata.length;k++)if(b.odata[k].oper===j){n=b.operands[j]||"";break}var q=null!=f.searchtitle?f.searchtitle:b.operandTitle;m="<a title='"+q+"' soper='"+j+"' class='soptclass' colname='"+this.name+"'>"+n+"</a>",a(p).prepend(m)}if((null==f.sopt||1===f.sopt.length)&&a("td.ui-search-oper",p).hide(),void 0===f.clearSearch&&(f.clearSearch="text"===this.stype?!0:!1),f.clearSearch&&"select"!==l.stype){{b.resetTitle||"Clear Search Value"}a("span.ui-search-clear",p).append("<a title='Clear Search Value' class='clearsearchclass'>x</a>")}else a("span.ui-search-clear",p).hide();switch(this.stype){case"select":if(g=this.surl||f.dataUrl)h=o,a.ajax(a.extend({url:g,dataType:"html",success:function(d){if(void 0!==f.buildSelect){var g=f.buildSelect(d);g&&a("span.ui-search-input",p).append(g)}else a("span.ui-search-input",p).append(d);a(h).append(p),void 0!==f.defaultValue&&a("select",h).val(f.defaultValue),a("select",h).attr({name:l.index||l.name,id:"gs_"+l.name}),f.attr&&a("select",h).attr(f.attr),a.jgrid.bindEv.call(c,a("select",h)[0],f),b.autosearch===!0&&a("select",h).change(function(){return e(),!1}),d=null}},a.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{}));else{var r,s,t;if(l.searchoptions?(r=void 0===l.searchoptions.value?!1:l.searchoptions.value,s=void 0===l.searchoptions.separator?":":l.searchoptions.separator,t=void 0===l.searchoptions.delimiter?";":l.searchoptions.delimiter):l.editoptions&&(r=void 0===l.editoptions.value?!1:l.editoptions.value,s=void 0===l.editoptions.separator?":":l.editoptions.separator,t=void 0===l.editoptions.delimiter?";":l.editoptions.delimiter),r!==!1){var u=document.createElement("select");a(u).attr({name:l.index||l.name,id:"gs_"+l.name});var v,w,x,y;if("string"==typeof r)for(j=r.split(t),y=0;y<j.length;y++)v=j[y].split(s),w=document.createElement("option"),w.value=v[0],w.innerHTML=v[1],u.appendChild(w);else if("object"==typeof r)for(x in r)r.hasOwnProperty(x)&&(w=document.createElement("option"),w.value=x,w.innerHTML=r[x],u.appendChild(w));void 0!==f.defaultValue&&a(u).val(f.defaultValue),f.attr&&a(u).attr(f.attr),a("span.ui-search-input",p).append(u),a(o).append(p),a.jgrid.bindEv.call(c,u,f),b.autosearch===!0&&a(u).change(function(){return e(),!1})}}break;case"text":var z=void 0!==f.defaultValue?f.defaultValue:"";a("span.ui-search-input",p).append("<input type='text' name='"+(l.index||l.name)+"' id='gs_"+l.name+"' value='"+z+"'/>"),a(o).append(p),f.attr&&a("input",o).attr(f.attr),a.jgrid.bindEv.call(c,a("input",o)[0],f),b.autosearch===!0&&(b.searchOnEnter?a("input",o).keypress(function(a){var b=a.charCode||a.keyCode||0;return 13===b?(e(),!1):this}):a("input",o).keydown(function(a){var c=a.which;switch(c){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:d&&clearTimeout(d),d=setTimeout(function(){e()},b.autosearchDelay)}}));break;case"custom":a("span.ui-search-input",p).append("<span style='width:95%;padding:0;' name='"+(l.index||l.name)+"' id='gs_"+l.name+"'/>"),a(o).append(p);try{if(!a.isFunction(f.custom_element))throw"e1";var A=f.custom_element.call(c,void 0!==f.defaultValue?f.defaultValue:"",f);if(!A)throw"e2";A=a(A).addClass("customelement"),a(o).find("span[name='"+(l.index||l.name)+"']").append(A)}catch(B){"e1"===B&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===B?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,"string"==typeof B?B:B.message,a.jgrid.edit.bClose)}}}a(i).append(o),b.searchOperators||a("a:eq(0)",p).hide()}),a("table thead",c.grid.hDiv).append(i),b.searchOperators&&(a(".soptclass",i).click(function(b){var c=a(this).offset(),d=c.left,e=c.top;h(this,d,e),b.stopPropagation()}),a("body").on("click",function(b){"soptclass"!==b.target.className&&a("#sopt_menu").hide()})),a(".clearsearchclass",i).click(function(){var d=a(this).parents("tr:first"),f=parseInt(a("td.ui-search-oper",d).data("colindex"),10),g=a.extend({},c.p.colModel[f].searchoptions||{}),h=g.defaultValue?g.defaultValue:"";"select"===c.p.colModel[f].stype?h?a("td.ui-search-input select",d).val(h):a("td.ui-search-input select",d)[0].selectedIndex=0:a("td.ui-search-input input",d).val(h),b.autosearch===!0&&e()}),this.ftoolbar=!0,this.triggerToolbar=e,this.clearToolbar=f,this.toggleToolbar=g}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.ftoolbar=!1,a(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(b){return void 0===b&&(b=!0),this.each(function(){var c,d,e,f,g,h,i,j=this,k=j.grid,l=a("table.ui-jqgrid-htable thead",k.hDiv),m=j.p.colModel;if(k){for(a(this).unbind(".setGroupHeaders"),c=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),f=k.headers,d=0,e=f.length;e>d;d++){i=m[d].hidden?"none":"",g=a(f[d].el).width(f[d].width).css("display",i);try{g.removeAttr("rowSpan")}catch(n){g.attr("rowSpan",1)}c.append(g),h=g.children("span.ui-jqgrid-resize"),h.length>0&&(h[0].style.height=""),g.children("div")[0].style.top=""}a(l).children("tr.ui-jqgrid-labels").remove(),a(l).prepend(c),b===!0&&a(j).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(b){return b=a.extend({useColSpanStyle:!1,groupHeaders:[]},b||{}),this.each(function(){this.p.groupHeader=b;var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this,q=0,r=p.p.colModel,s=r.length,t=p.grid.headers,u=a("table.ui-jqgrid-htable",p.grid.hDiv),v=u.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),w=u.children("thead"),x=u.find(".jqg-first-row-header");void 0===x[0]?x=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):x.empty();var y,z=function(a,b){var c,d=b.length;for(c=0;d>c;c++)if(b[c].startColumnName===a)return c;return-1};for(a(p).prepend(w),e=a("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),c=0;s>c;c++)if(g=t[c].el,h=a(g),d=r[c],i={height:"0",width:t[c].width+"px",display:d.hidden?"none":""},a("<th>",{role:"gridcell"}).css(i).addClass("ui-first-th-"+p.p.direction).appendTo(x),g.style.width="",j=z(d.name,b.groupHeaders),j>=0){for(k=b.groupHeaders[j],l=k.numberOfColumns,m=k.titleText,n=0,j=0;l>j&&s>c+j;j++)r[c+j].hidden||n++;f=a("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+p.p.direction).css({height:"22px","border-top":"0 none"}).html(m),n>0&&f.attr("colspan",String(n)),p.p.headertitles&&f.attr("title",f.text()),0===n&&f.hide(),h.before(f),e.append(g),q=l-1}else 0===q?b.useColSpanStyle?h.attr("rowspan","2"):(a("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+p.p.direction).css({display:d.hidden?"none":"","border-top":"0 none"}).insertBefore(h),e.append(g)):(e.append(g),q--);o=a(p).children("thead"),o.prepend(x),e.insertAfter(v),u.append(o),b.useColSpanStyle&&(u.find("span.ui-jqgrid-resize").each(function(){var b=a(this).parent();b.is(":visible")&&(this.style.cssText="height: "+b.height()+"px !important; cursor: col-resize;")}),u.find("div.ui-jqgrid-sortable").each(function(){var b=a(this),c=b.parent();c.is(":visible")&&c.is(":has(span.ui-jqgrid-resize)")&&b.css("top",(c.height()-b.outerHeight())/2+"px")})),y=o.find("tr.jqg-first-row-header"),a(p).bind("jqGridResizeStop.setGroupHeaders",function(a,b,c){y.find("th").eq(c).width(b)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var b=this,c=b.p.colModel,d=0,e=c.length,f=-1,g=!1;if(b.p.subGrid!==!0&&b.p.treeGrid!==!0&&b.p.cellEdit!==!0&&!b.p.sortable&&!b.p.scroll){for(b.p.rownumbers&&d++,b.p.multiselect&&d++;e>d&&c[d].frozen===!0;)g=!0,f=d,d++;if(f>=0&&g){var h=b.p.caption?a(b.grid.cDiv).outerHeight():0,i=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).height();b.p.toppager&&(h+=a(b.grid.topDiv).outerHeight()),b.p.toolbar[0]===!0&&"bottom"!==b.p.toolbar[1]&&(h+=a(b.grid.uDiv).outerHeight()),b.grid.fhDiv=a('<div style="position:absolute;left:0;top:'+h+"px;height:"+i+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),b.grid.fbDiv=a('<div style="position:absolute;left:0;top:'+(parseInt(h,10)+parseInt(i,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fhDiv);var j=a(".ui-jqgrid-htable","#gview_"+a.jgrid.jqID(b.p.id)).clone(!0);if(b.p.groupHeader){a("tr.jqg-first-row-header, tr.jqg-third-row-header",j).each(function(){a("th:gt("+f+")",this).remove()});var k,l,m=-1,n=-1;a("tr.jqg-second-row-header th",j).each(function(){return k=parseInt(a(this).attr("colspan"),10),l=parseInt(a(this).attr("rowspan"),10),l&&(m++,n++),k&&(m+=k,n++),m===f?!1:void 0}),m!==f&&(n=f),a("tr.jqg-second-row-header",j).each(function(){a("th:gt("+n+")",this).remove()})}else a("tr",j).each(function(){a("th:gt("+f+")",this).remove()});if(a(j).width(1),a(b.grid.fhDiv).append(j).mousemove(function(a){return b.grid.resizing?(b.grid.dragMove(a),!1):void 0}),b.p.footerrow){var o=a(".ui-jqgrid-bdiv","#gview_"+a.jgrid.jqID(b.p.id)).height();b.grid.fsDiv=a('<div style="position:absolute;left:0;top:'+(parseInt(h,10)+parseInt(i,10)+parseInt(o,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"></div>'),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fsDiv);var p=a(".ui-jqgrid-ftable","#gview_"+a.jgrid.jqID(b.p.id)).clone(!0);a("tr",p).each(function(){a("td:gt("+f+")",this).remove()}),a(p).width(1),a(b.grid.fsDiv).append(p)}a(b).bind("jqGridResizeStop.setFrozenColumns",function(c,d,e){var f=a(".ui-jqgrid-htable",b.grid.fhDiv);a("th:eq("+e+")",f).width(d);var g=a(".ui-jqgrid-btable",b.grid.fbDiv);if(a("tr:first td:eq("+e+")",g).width(d),b.p.footerrow){var h=a(".ui-jqgrid-ftable",b.grid.fsDiv);a("tr:first td:eq("+e+")",h).width(d)}}),a(b).bind("jqGridSortCol.setFrozenColumns",function(c,d,e){var f=a("tr.ui-jqgrid-labels:last th:eq("+b.p.lastsort+")",b.grid.fhDiv),g=a("tr.ui-jqgrid-labels:last th:eq("+e+")",b.grid.fhDiv);a("span.ui-grid-ico-sort",f).addClass("ui-state-disabled"),a(f).attr("aria-selected","false"),a("span.ui-icon-"+b.p.sortorder,g).removeClass("ui-state-disabled"),a(g).attr("aria-selected","true"),b.p.viewsortcols[0]||b.p.lastsort!==e&&(a("span.s-ico",f).hide(),a("span.s-ico",g).show())}),a("#gview_"+a.jgrid.jqID(b.p.id)).append(b.grid.fbDiv),a(b.grid.bDiv).scroll(function(){a(b.grid.fbDiv).scrollTop(a(this).scrollTop())}),b.p.hoverrows===!0&&a("#"+a.jgrid.jqID(b.p.id)).unbind("mouseover").unbind("mouseout"),a(b).bind("jqGridAfterGridComplete.setFrozenColumns",function(){a("#"+a.jgrid.jqID(b.p.id)+"_frozen").remove(),a(b.grid.fbDiv).height(a(b.grid.bDiv).height()-16);var c=a("#"+a.jgrid.jqID(b.p.id)).clone(!0);a("tr[role=row]",c).each(function(){a("td[role=gridcell]:gt("+f+")",this).remove()}),a(c).width(1).attr("id",b.p.id+"_frozen"),a(b.grid.fbDiv).append(c),b.p.hoverrows===!0&&(a("tr.jqgrow",c).hover(function(){a(this).addClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)).removeClass("ui-state-hover")}),a("tr.jqgrow","#"+a.jgrid.jqID(b.p.id)).hover(function(){a(this).addClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover"),a("#"+a.jgrid.jqID(this.id),"#"+a.jgrid.jqID(b.p.id)+"_frozen").removeClass("ui-state-hover")})),c=null}),b.grid.hDiv.loading||a(b).triggerHandler("jqGridAfterGridComplete"),b.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&this.p.frozenColumns===!0){var b=this;if(a(b.grid.fhDiv).remove(),a(b.grid.fbDiv).remove(),b.grid.fhDiv=null,b.grid.fbDiv=null,b.p.footerrow&&(a(b.grid.fsDiv).remove(),b.grid.fsDiv=null),a(this).unbind(".setFrozenColumns"),b.p.hoverrows===!0){var c;a("#"+a.jgrid.jqID(b.p.id)).bind("mouseover",function(b){c=a(b.target).closest("tr.jqgrow"),"ui-subgrid"!==a(c).attr("class")&&a(c).addClass("ui-state-hover")}).bind("mouseout",function(b){c=a(b.target).closest("tr.jqgrow"),a(c).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),function(a){"use strict";a.fn.jqFilter=function(b){if("string"==typeof b){var c=a.fn.jqFilter[b];if(!c)throw"jqFilter - No such method: "+b;var d=a.makeArray(arguments).slice(1);return c.apply(this,d)}var e=a.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},a.jgrid.filter,b||{});return this.each(function(){if(!this.filter){this.p=e,(null===this.p.filter||void 0===this.p.filter)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]});var b,c,d=this.p.columns.length,f=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p.initFilter=a.extend(!0,{},this.p.filter),d){for(b=0;d>b;b++)c=this.p.columns[b],c.stype?c.inputtype=c.stype:c.inputtype||(c.inputtype="text"),c.sorttype?c.searchtype=c.sorttype:c.searchtype||(c.searchtype="string"),void 0===c.hidden&&(c.hidden=!1),c.label||(c.label=c.name),c.index&&(c.name=c.index),c.hasOwnProperty("searchoptions")||(c.searchoptions={}),c.hasOwnProperty("searchrules")||(c.searchrules={});this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var g=function(){return a("#"+a.jgrid.jqID(e.id))[0]||null},h=function(b,c){var d=[!0,""],f=g();if(a.isFunction(c.searchrules))d=c.searchrules.call(f,b,c);else if(a.jgrid&&a.jgrid.checkValues)try{d=a.jgrid.checkValues.call(f,b,-1,c.searchrules,c.label)}catch(h){}d&&d.length&&d[0]===!1&&(e.error=!d[0],e.errmsg=d[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1},this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(e.filter,null);a(this).append(b),a.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(b,c){var d,f=this,g=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),h="left";"rtl"===this.p.direction&&(h="right",g.attr("dir","rtl")),null===c&&g.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+h+"'></th></tr>");var i=a("<tr></tr>");g.append(i);var j=a("<th colspan='5' align='"+h+"'></th>");if(i.append(j),this.p.ruleButtons===!0){var k=a("<select class='opsel'></select>");j.append(k);var l,m="";for(d=0;d<e.groupOps.length;d++)l=b.groupOp===f.p.groupOps[d].op?" selected='selected'":"",m+="<option value='"+f.p.groupOps[d].op+"'"+l+">"+f.p.groupOps[d].text+"</option>";k.append(m).bind("change",function(){b.groupOp=a(k).val(),f.onchange()})}var n="<span></span>";if(this.p.groupButton&&(n=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),n.bind("click",function(){return void 0===b.groups&&(b.groups=[]),b.groups.push({groupOp:e.groupOps[0].op,rules:[],groups:[]}),f.reDraw(),f.onchange(),!1})),j.append(n),this.p.ruleButtons===!0){var o,p=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");p.bind("click",function(){for(void 0===b.rules&&(b.rules=[]),d=0;d<f.p.columns.length;d++){var c=void 0===f.p.columns[d].search?!0:f.p.columns[d].search,e=f.p.columns[d].hidden===!0,g=f.p.columns[d].searchoptions.searchhidden===!0;if(g&&c||c&&!e){o=f.p.columns[d];break}}var h;return h=o.searchoptions.sopt?o.searchoptions.sopt:f.p.sopt?f.p.sopt:-1!==a.inArray(o.searchtype,f.p.strarr)?f.p.stropts:f.p.numopts,b.rules.push({field:o.name,op:h[0],data:""}),f.reDraw(),!1}),j.append(p)}if(null!==c){var q=a("<input type='button' value='-' title='Delete group' class='delete-group'/>");j.append(q),q.bind("click",function(){for(d=0;d<c.groups.length;d++)if(c.groups[d]===b){c.groups.splice(d,1);break}return f.reDraw(),f.onchange(),!1})}if(void 0!==b.groups)for(d=0;d<b.groups.length;d++){var r=a("<tr></tr>");g.append(r);var s=a("<td class='first'></td>");r.append(s);var t=a("<td colspan='4'></td>");t.append(this.createTableForGroup(b.groups[d],b)),r.append(t)}if(void 0===b.groupOp&&(b.groupOp=f.p.groupOps[0].op),void 0!==b.rules)for(d=0;d<b.rules.length;d++)g.append(this.createTableRowForRule(b.rules[d],b));return g},this.createTableRowForRule=function(b,c){var d,h,i,j,k,l=this,m=g(),n=a("<tr></tr>"),o="";n.append("<td class='first'></td>");var p=a("<td class='columns'></td>");n.append(p);var q,r=a("<select></select>"),s=[];p.append(r),r.bind("change",function(){for(b.field=a(r).val(),i=a(this).parents("tr:first"),d=0;d<l.p.columns.length;d++)if(l.p.columns[d].name===b.field){j=l.p.columns[d];break}if(j){j.searchoptions.id=a.jgrid.randId(),f&&"text"===j.inputtype&&(j.searchoptions.size||(j.searchoptions.size=10));var c=a.jgrid.createEl.call(m,j.inputtype,j.searchoptions,"",!0,l.p.ajaxSelectOptions||{},!0);a(c).addClass("input-elm"),h=j.searchoptions.sopt?j.searchoptions.sopt:l.p.sopt?l.p.sopt:-1!==a.inArray(j.searchtype,l.p.strarr)?l.p.stropts:l.p.numopts;var e="",g=0;for(s=[],a.each(l.p.ops,function(){s.push(this.oper)}),d=0;d<h.length;d++)q=a.inArray(h[d],s),-1!==q&&(0===g&&(b.op=l.p.ops[q].oper),e+="<option value='"+l.p.ops[q].oper+"'>"+l.p.ops[q].text+"</option>",g++);if(a(".selectopts",i).empty().append(e),a(".selectopts",i)[0].selectedIndex=0,a.jgrid.msie&&a.jgrid.msiever()<9){var k=parseInt(a("select.selectopts",i)[0].offsetWidth,10)+1;a(".selectopts",i).width(k),a(".selectopts",i).css("width","auto")}a(".data",i).empty().append(c),a.jgrid.bindEv.call(m,c,j.searchoptions),a(".input-elm",i).bind("change",function(c){var d=c.target;b.data="SPAN"===d.nodeName.toUpperCase()&&j.searchoptions&&a.isFunction(j.searchoptions.custom_value)?j.searchoptions.custom_value.call(m,a(d).children(".customelement:first"),"get"):d.value,l.onchange()}),setTimeout(function(){b.data=a(c).val(),l.onchange()},0)}});var t=0;for(d=0;d<l.p.columns.length;d++){var u=void 0===l.p.columns[d].search?!0:l.p.columns[d].search,v=l.p.columns[d].hidden===!0,w=l.p.columns[d].searchoptions.searchhidden===!0;(w&&u||u&&!v)&&(k="",b.field===l.p.columns[d].name&&(k=" selected='selected'",t=d),o+="<option value='"+l.p.columns[d].name+"'"+k+">"+l.p.columns[d].label+"</option>")}r.append(o);var x=a("<td class='operators'></td>");n.append(x),j=e.columns[t],j.searchoptions.id=a.jgrid.randId(),f&&"text"===j.inputtype&&(j.searchoptions.size||(j.searchoptions.size=10));var y=a.jgrid.createEl.call(m,j.inputtype,j.searchoptions,b.data,!0,l.p.ajaxSelectOptions||{},!0);("nu"===b.op||"nn"===b.op)&&(a(y).attr("readonly","true"),a(y).attr("disabled","true"));var z=a("<select class='selectopts'></select>");for(x.append(z),z.bind("change",function(){b.op=a(z).val(),i=a(this).parents("tr:first");var c=a(".input-elm",i)[0];"nu"===b.op||"nn"===b.op?(b.data="","SELECT"!==c.tagName.toUpperCase()&&(c.value=""),c.setAttribute("readonly","true"),c.setAttribute("disabled","true")):("SELECT"===c.tagName.toUpperCase()&&(b.data=c.value),c.removeAttribute("readonly"),c.removeAttribute("disabled")),l.onchange()}),h=j.searchoptions.sopt?j.searchoptions.sopt:l.p.sopt?l.p.sopt:-1!==a.inArray(j.searchtype,l.p.strarr)?l.p.stropts:l.p.numopts,o="",a.each(l.p.ops,function(){s.push(this.oper)}),d=0;d<h.length;d++)q=a.inArray(h[d],s),-1!==q&&(k=b.op===l.p.ops[q].oper?" selected='selected'":"",o+="<option value='"+l.p.ops[q].oper+"'"+k+">"+l.p.ops[q].text+"</option>");z.append(o);var A=a("<td class='data'></td>");n.append(A),A.append(y),a.jgrid.bindEv.call(m,y,j.searchoptions),a(y).addClass("input-elm").bind("change",function(){b.data="custom"===j.inputtype?j.searchoptions.custom_value.call(m,a(this).children(".customelement:first"),"get"):a(this).val(),l.onchange()});var B=a("<td></td>");if(n.append(B),this.p.ruleButtons===!0){var C=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");B.append(C),C.bind("click",function(){for(d=0;d<c.rules.length;d++)if(c.rules[d]===b){c.rules.splice(d,1);break}return l.reDraw(),l.onchange(),!1})}return n},this.getStringForGroup=function(a){var b,c="(";if(void 0!==a.groups)for(b=0;b<a.groups.length;b++){c.length>1&&(c+=" "+a.groupOp+" ");try{c+=this.getStringForGroup(a.groups[b])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(b=0;b<a.rules.length;b++)c.length>1&&(c+=" "+a.groupOp+" "),c+=this.getStringForRule(a.rules[b])}catch(e){alert(e)}return c+=")","()"===c?"":c},this.getStringForRule=function(b){var c,d,f,g,i="",j="",k=["int","integer","float","number","currency"];for(c=0;c<this.p.ops.length;c++)if(this.p.ops[c].oper===b.op){i=this.p.operands.hasOwnProperty(b.op)?this.p.operands[b.op]:"",j=this.p.ops[c].oper;break}for(c=0;c<this.p.columns.length;c++)if(this.p.columns[c].name===b.field){d=this.p.columns[c];break}return void 0===d?"":(g=b.data,("bw"===j||"bn"===j)&&(g+="%"),("ew"===j||"en"===j)&&(g="%"+g),("cn"===j||"nc"===j)&&(g="%"+g+"%"),("in"===j||"ni"===j)&&(g=" ("+g+")"),e.errorcheck&&h(b.data,d),f=-1!==a.inArray(d.searchtype,k)||"nn"===j||"nu"===j?b.field+" "+i+" "+g:b.field+" "+i+' "'+g+'"')},this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){a("th.ui-state-error",this).html(""),a("tr.error",this).hide()},this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg),a("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(e.filter)},this.toString=function(){function a(a){if(c.p.errorcheck){var b,d;for(b=0;b<c.p.columns.length;b++)if(c.p.columns[b].name===a.field){d=c.p.columns[b];break}d&&h(a.data,d)}return a.op+"(item."+a.field+",'"+a.data+"')"}function b(c){var d,e="(";if(void 0!==c.groups)for(d=0;d<c.groups.length;d++)e.length>1&&(e+="OR"===c.groupOp?" || ":" && "),e+=b(c.groups[d]);if(void 0!==c.rules)for(d=0;d<c.rules.length;d++)e.length>1&&(e+="OR"===c.groupOp?" || ":" && "),e+=a(c.rules[d]);return e+=")","()"===e?"":e}var c=this;return b(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},a.extend(a.fn.jqFilter,{toSQLString:function(){var a="";return this.each(function(){a=this.toUserFriendlyString()}),a},filterData:function(){var a;return this.each(function(){a=this.p.filter}),a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(b){"string"==typeof b&&(b=a.jgrid.parse(b)),this.each(function(){this.p.filter=b,this.reDraw(),this.onchange()})}})}(jQuery),function(a){"use strict";var b={};a.jgrid.extend({searchGrid:function(b){return b=a.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},a.jgrid.search,b||{}),this.each(function(){function c(c){k=e.triggerHandler("jqGridFilterBeforeShow",[c]),void 0===k&&(k=!0),k&&a.isFunction(b.beforeShowSearch)&&(k=b.beforeShowSearch.call(d,c)),k&&(f.viewModal(n,{gbox:o,jqm:b.jqModal,modal:b.modal,overlay:b.overlay,toTop:b.toTop}),e.triggerHandler("jqGridFilterAfterShow",[c]),a.isFunction(b.afterShowSearch)&&b.afterShowSearch.call(d,c))}var d=this,e=a(d),f=a.jgrid,g=f.jqID,h=d.p;if(d.grid){var i,j="fbox_"+h.id,k=!0,l=!0,m={themodal:"searchmod"+j,modalhead:"searchhd"+j,modalcontent:"searchcnt"+j,scrollelm:j},n="#"+g(m.themodal),o="#gbox_"+g(h.id),p="#gview_"+g(h.id),q=h.postData[b.sFilter];if("string"==typeof q&&(q=f.parse(q)),b.recreateFilter===!0&&a(n).remove(),void 0!==a(n)[0])c(a("#fbox_"+g(+h.id)));else{var r=a("<div><div id='"+j+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore(p),s="left",t="";"rtl"===h.direction&&(s="right",t=" style='text-align:left'",r.attr("dir","rtl"));var u,v,w=a.extend([],h.colModel),x="<a id='"+j+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+b.Find+"</a>",y="<a id='"+j+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+b.Reset+"</a>",z="",A="",B=!1,C=-1;if(b.showQuery&&(z="<a id='"+j+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),b.columns.length?(w=b.columns,C=0,u=w[0].index||w[0].name):a.each(w,function(a,b){if(b.label||(b.label=h.colNames[a]),!B){var c=void 0===b.search?!0:b.search,d=b.hidden===!0,e=b.searchoptions&&b.searchoptions.searchhidden===!0;(e&&c||c&&!d)&&(B=!0,u=b.index||b.name,C=a)}}),!q&&u||b.multipleSearch===!1){var D="eq";C>=0&&w[C].searchoptions&&w[C].searchoptions.sopt?D=w[C].searchoptions.sopt[0]:b.sopt&&b.sopt.length&&(D=b.sopt[0]),q={groupOp:"AND",rules:[{field:u,op:D,data:""}]}}B=!1,b.tmplNames&&b.tmplNames.length&&(B=!0,A=b.tmplLabel,A+="<select class='ui-template'>",A+="<option value='default'>Default</option>",a.each(b.tmplNames,function(a,b){A+="<option value='"+a+"'>"+b+"</option>"}),A+="</select>"),v="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+j+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+s+"'>"+y+A+"</td><td class='EditButton' "+t+">"+z+x+"</td></tr></tbody></table>",j=g(j),b.gbox="#gbox_"+j,j="#"+j,a(j).jqFilter({columns:w,filter:b.loadDefaults?q:null,showQuery:b.showQuery,errorcheck:b.errorcheck,sopt:b.sopt,groupButton:b.multipleGroup,ruleButtons:b.multipleSearch,afterRedraw:b.afterRedraw,ops:b.odata,operands:b.operands,ajaxSelectOptions:h.ajaxSelectOptions,groupOps:b.groupOps,onChange:function(){this.p.showQuery&&a(".query",this).html(this.toUserFriendlyString()),a.isFunction(b.afterChange)&&b.afterChange.call(d,a(j),b)},direction:h.direction,id:h.id}),r.append(v),B&&b.tmplFilters&&b.tmplFilters.length&&a(".ui-template",r).bind("change",function(){var c=a(this).val();return"default"===c?a(j).jqFilter("addFilter",q):a(j).jqFilter("addFilter",b.tmplFilters[parseInt(c,10)]),!1}),b.multipleGroup===!0&&(b.multipleSearch=!0),e.triggerHandler("jqGridFilterInitialize",[a(j)]),a.isFunction(b.onInitializeSearch)&&b.onInitializeSearch.call(d,a(j)),b.layer?f.createModal(m,r,b,p,a(o)[0],"#"+g(b.layer),{position:"relative"}):f.createModal(m,r,b,p,a(o)[0]),(b.searchOnEnter||b.closeOnEscape)&&a(n).keydown(function(c){var d=a(c.target);
return!b.searchOnEnter||13!==c.which||d.hasClass("add-group")||d.hasClass("add-rule")||d.hasClass("delete-group")||d.hasClass("delete-rule")||d.hasClass("fm-button")&&d.is("[id$=_query]")?b.closeOnEscape&&27===c.which?(a("#"+g(m.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(a(j+"_search").click(),!1)}),z&&a(j+"_query").bind("click",function(){return a(".queryresult",r).toggle(),!1}),void 0===b.stringResult&&(b.stringResult=b.multipleSearch),a(j+"_search").bind("click",function(){var c,g,k={};if(i=a(j),i.find(".input-elm:focus").change(),g=i.jqFilter("filterData"),b.errorcheck&&(i[0].hideError(),b.showQuery||i.jqFilter("toSQLString"),i[0].p.error))return i[0].showError(),!1;if(b.stringResult){try{c=xmlJsonClass.toJson(g,"","",!1)}catch(m){try{c=JSON.stringify(g)}catch(p){}}"string"==typeof c&&(k[b.sFilter]=c,a.each([b.sField,b.sValue,b.sOper],function(){k[this]=""}))}else b.multipleSearch?(k[b.sFilter]=g,a.each([b.sField,b.sValue,b.sOper],function(){k[this]=""})):(k[b.sField]=g.rules[0].field,k[b.sValue]=g.rules[0].data,k[b.sOper]=g.rules[0].op,k[b.sFilter]="");return h.search=!0,a.extend(h.postData,k),l=e.triggerHandler("jqGridFilterSearch"),void 0===l&&(l=!0),l&&a.isFunction(b.onSearch)&&(l=b.onSearch.call(d,h.filters)),l!==!1&&e.trigger("reloadGrid",[{page:1}]),b.closeAfterSearch&&f.hideModal(n,{gb:o,jqm:b.jqModal,onClose:b.onClose}),!1}),a(j+"_reset").bind("click",function(){var c={},g=a(j);return h.search=!1,h.resetsearch=!0,b.multipleSearch===!1?c[b.sField]=c[b.sValue]=c[b.sOper]="":c[b.sFilter]="",g[0].resetFilter(),B&&a(".ui-template",r).val("default"),a.extend(h.postData,c),l=e.triggerHandler("jqGridFilterReset"),void 0===l&&(l=!0),l&&a.isFunction(b.onReset)&&(l=b.onReset.call(d)),l!==!1&&e.trigger("reloadGrid",[{page:1}]),b.closeAfterReset&&f.hideModal(n,{gb:o,jqm:b.jqModal,onClose:b.onClose}),!1}),c(a(j)),a(".fm-button:not(.ui-state-disabled)",r).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},editGridRow:function(c,d){return d=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay",removemodal:!0,form:"edit"},a.jgrid.edit,d||{}),b[a(this)[0].p.id]=d,this.each(function(){function e(){return a(B+" > tbody > tr > td .FormElement").each(function(){var b=a(".customelement",this);if(b.length){var c=b[0],d=a(c).attr("name");a.each(t.colModel,function(){if(this.name===d&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{if(q[d]=this.editoptions.custom_value.call(o,a("#"+w(d),B),"get"),void 0===q[d])throw"e1"}catch(b){"e1"===b?v.info_dialog(v.errors.errcap,"function 'custom_value' "+v.edit.msg.novalue,v.edit.bClose):v.info_dialog(v.errors.errcap,b.message,v.edit.bClose)}return!0}})}else{switch(a(this).get(0).type){case"checkbox":if(a(this).is(":checked"))q[this.name]=a(this).val();else{var e=a(this).attr("offval");q[this.name]=e}break;case"select-one":q[this.name]=a("option:selected",this).val();break;case"select-multiple":q[this.name]=a(this).val(),q[this.name]=q[this.name]?q[this.name].join(","):"";var f=[];a("option:selected",this).each(function(b,c){f[b]=a(c).text()});break;case"password":case"text":case"textarea":case"button":q[this.name]=a(this).val()}t.autoencode&&(q[this.name]=v.htmlEncode(q[this.name]))}}),!0}function f(c,d,e){var f,g,h,i,j,k,l,m=0,n=[],q=!1,r="<td class='CaptionTD'></td><td class='DataTD'></td>",s="";for(l=1;e>=l;l++)s+=r;if("_empty"!==c&&(q=p.jqGrid("getInd",c)),a(t.colModel).each(function(l){if(f=this.name,g=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,j=g?"style='display:none'":"","cb"!==f&&"subgrid"!==f&&this.editable===!0&&"rn"!==f){if(q===!1)i="";else if(f===t.ExpandColumn&&t.treeGrid===!0)i=a("td[role='gridcell']:eq("+l+")",o.rows[q]).text();else{try{i=a.unformat.call(o,a("td[role='gridcell']:eq("+l+")",o.rows[q]),{rowId:c,colModel:this},l)}catch(p){i=this.edittype&&"textarea"===this.edittype?a("td[role='gridcell']:eq("+l+")",o.rows[q]).text():a("td[role='gridcell']:eq("+l+")",o.rows[q]).html()}(!i||"&nbsp;"===i||"&#160;"===i||1===i.length&&160===i.charCodeAt(0))&&(i="")}var r=a.extend({},this.editoptions||{},{id:f,name:f,rowId:c}),x=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),z=parseInt(x.rowpos,10)||m+1,A=parseInt(2*(parseInt(x.colpos,10)||1),10);if("_empty"===c&&r.defaultValue&&(i=a.isFunction(r.defaultValue)?r.defaultValue.call(o):r.defaultValue),this.edittype||(this.edittype="text"),t.autoencode&&(i=v.htmlDecode(i)),k=v.createEl.call(o,this.edittype,r,i,!1,a.extend({},v.ajaxOptions,t.ajaxSelectOptions||{})),(b[u].checkOnSubmit||b[u].checkOnUpdate)&&(b[u]._savedData[f]=i),a(k).addClass("FormElement"),a.inArray(this.edittype,["text","textarea","password","select"])>-1&&a(k).addClass("ui-widget-content ui-corner-all"),h=a(d).find("tr[rowpos="+z+"]"),x.rowabove){var B=a("<tr><td class='contentinfo' colspan='"+2*e+"'>"+x.rowcontent+"</td></tr>");a(d).append(B),B[0].rp=z}0===h.length&&(h=a("<tr "+j+" rowpos='"+z+"'></tr>").addClass("FormData").attr("id","tr_"+f),a(h).append(s),a(d).append(h),h[0].rp=z),a("td:eq("+(A-2)+")",h[0]).html(void 0===x.label?t.colNames[l]:x.label),a("td:eq("+(A-1)+")",h[0]).html(x.elmprefix).append(k).append(x.elmsuffix),"custom"===this.edittype&&a.isFunction(r.custom_value)&&r.custom_value.call(o,a("#"+w(f),y),"set",i),v.bindEv.call(o,k,r),n[m]=l,m++}}),m>0){var x=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+u+"_id' value='"+c+"'/></td></tr>");x[0].rp=m+999,a(d).append(x),(b[u].checkOnSubmit||b[u].checkOnUpdate)&&(b[u]._savedData[u+"_id"]=c)}return n}function g(c,d){var e,f,g,h,i,j,k=0;(b[u].checkOnSubmit||b[u].checkOnUpdate)&&(b[u]._savedData={},b[u]._savedData[u+"_id"]=c);var l=t.colModel;if("_empty"===c)return a(l).each(function(){e=this.name,h=a.extend({},this.editoptions||{}),g=a("#"+w(e),d),g&&g.length&&null!==g[0]&&(i="","custom"===this.edittype&&a.isFunction(h.custom_value)?h.custom_value.call(o,g,"set",i):h.defaultValue?(i=a.isFunction(h.defaultValue)?h.defaultValue.call(o):h.defaultValue,"checkbox"===g[0].type?(j=i.toLowerCase(),j.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==j?(g[0].checked=!0,g[0].defaultChecked=!0,g[0].value=i):(g[0].checked=!1,g[0].defaultChecked=!1)):g.val(i)):"checkbox"===g[0].type?(g[0].checked=!1,g[0].defaultChecked=!1,i=a(g).attr("offval")):g[0].type&&"select"===g[0].type.substr(0,6)?g[0].selectedIndex=0:g.val(i),(b[u].checkOnSubmit===!0||b[u].checkOnUpdate)&&(b[u]._savedData[e]=i))}),void a("#id_g",d).val(c);var m=p.jqGrid("getInd",c,!0);m&&(a('td[role="gridcell"]',m).each(function(g){if(e=l[g].name,"cb"!==e&&"subgrid"!==e&&"rn"!==e&&l[g].editable===!0){if(e===t.ExpandColumn&&t.treeGrid===!0)f=a(this).text();else try{f=a.unformat.call(o,a(this),{rowId:c,colModel:l[g]},g)}catch(h){f="textarea"===l[g].edittype?a(this).text():a(this).html()}switch(t.autoencode&&(f=v.htmlDecode(f)),(b[u].checkOnSubmit===!0||b[u].checkOnUpdate)&&(b[u]._savedData[e]=f),e="#"+w(e),l[g].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===f||"&#160;"===f||1===f.length&&160===f.charCodeAt(0))&&(f=""),a(e,d).val(f);break;case"select":var i=f.split(",");i=a.map(i,function(b){return a.trim(b)}),a(e+" option",d).each(function(){this.selected=l[g].editoptions.multiple||a.trim(f)!==a.trim(a(this).text())&&i[0]!==a.trim(a(this).text())&&i[0]!==a.trim(a(this).val())?l[g].editoptions.multiple&&(a.inArray(a.trim(a(this).text()),i)>-1||a.inArray(a.trim(a(this).val()),i)>-1)?!0:!1:!0});break;case"checkbox":if(f=String(f),l[g].editoptions&&l[g].editoptions.value){var j=l[g].editoptions.value.split(":");a(e,d)[t.useProp?"prop":"attr"](j[0]===f?{checked:!0,defaultChecked:!0}:{checked:!1,defaultChecked:!1})}else f=f.toLowerCase(),f.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==f?(a(e,d)[t.useProp?"prop":"attr"]("checked",!0),a(e,d)[t.useProp?"prop":"attr"]("defaultChecked",!0)):(a(e,d)[t.useProp?"prop":"attr"]("checked",!1),a(e,d)[t.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!l[g].editoptions||!a.isFunction(l[g].editoptions.custom_value))throw"e1";l[g].editoptions.custom_value.call(o,a(e,d),"set",f)}catch(m){"e1"===m?v.info_dialog(v.errors.errcap,"function 'custom_value' "+v.edit.msg.nodefined,v.edit.bClose):v.info_dialog(v.errors.errcap,m.message,v.edit.bClose)}}k++}}),k>0&&a("#id_g",B).val(c))}function h(){a.each(t.colModel,function(a,b){b.editoptions&&b.editoptions.NullIfEmpty===!0&&q.hasOwnProperty(b.name)&&""===q[b.name]&&(q[b.name]="null")})}function i(){var c,e,f,i,j,k,l,m=[!0,"",""],n={},r=t.prmNames,w=p.triggerHandler("jqGridAddEditBeforeCheckValues",[a(y),s]);w&&"object"==typeof w&&(q=w),a.isFunction(b[u].beforeCheckValues)&&(w=b[u].beforeCheckValues.call(o,q,a(y),s),w&&"object"==typeof w&&(q=w));for(i in q)if(q.hasOwnProperty(i)&&(m=v.checkValues.call(o,q[i],i),m[0]===!1))break;if(h(),m[0]&&(n=p.triggerHandler("jqGridAddEditClickSubmit",[b[u],q,s]),void 0===n&&a.isFunction(b[u].onclickSubmit)&&(n=b[u].onclickSubmit.call(o,b[u],q,s)||{}),m=p.triggerHandler("jqGridAddEditBeforeSubmit",[q,a(y),s]),void 0===m&&(m=[!0,"",""]),m[0]&&a.isFunction(b[u].beforeSubmit)&&(m=b[u].beforeSubmit.call(o,q,a(y),s))),m[0]&&!b[u].processing){if(b[u].processing=!0,a("#sData",C).addClass("ui-state-active"),l=b[u].url||p.jqGrid("getGridParam","editurl"),f=r.oper,e="clientArray"===l?t.keyName:r.id,q[f]="_empty"===a.trim(q[u+"_id"])?r.addoper:r.editoper,q[f]!==r.addoper?q[e]=q[u+"_id"]:void 0===q[e]&&(q[e]=q[u+"_id"]),delete q[u+"_id"],q=a.extend(q,b[u].editData,n),t.treeGrid===!0){if(q[f]===r.addoper){j=p.jqGrid("getGridParam","selrow");var z="adjacency"===t.treeGridModel?t.treeReader.parent_id_field:"parent_id";q[z]=j}for(k in t.treeReader)if(t.treeReader.hasOwnProperty(k)){var A=t.treeReader[k];if(q.hasOwnProperty(A)){if(q[f]===r.addoper&&"parent_id_field"===k)continue;delete q[A]}}}q[e]=v.stripPref(t.idPrefix,q[e]);var D=a.extend({url:l,type:b[u].mtype,data:a.isFunction(b[u].serializeEditData)?b[u].serializeEditData.call(o,q):q,complete:function(h,i){var k;if(a("#sData",C).removeClass("ui-state-active"),q[e]=t.idPrefix+q[e],h.status>=300&&304!==h.status?(m[0]=!1,m[1]=p.triggerHandler("jqGridAddEditErrorTextFormat",[h,s]),m[1]=a.isFunction(b[u].errorTextFormat)?b[u].errorTextFormat.call(o,h,s):i+" Status: '"+h.statusText+"'. Error code: "+h.status):(m=p.triggerHandler("jqGridAddEditAfterSubmit",[h,q,s]),void 0===m&&(m=[!0,"",""]),m[0]&&a.isFunction(b[u].afterSubmit)&&(m=b[u].afterSubmit.call(o,h,q,s))),m[0]===!1)a("#FormError>td",B).html(m[1]),a("#FormError",B).show();else if(t.autoencode&&a.each(q,function(a,b){q[a]=v.htmlDecode(b)}),q[f]===r.addoper?(m[2]||(m[2]=v.randId()),null==q[e]||"_empty"===q[e]?q[e]=m[2]:m[2]=q[e],b[u].reloadAfterSubmit?p.trigger("reloadGrid"):t.treeGrid===!0?p.jqGrid("addChildNode",m[2],j,q):p.jqGrid("addRowData",m[2],q,d.addedrow),b[u].closeAfterAdd?(t.treeGrid!==!0&&p.jqGrid("setSelection",m[2]),x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form})):b[u].clearAfterAdd&&g("_empty",y)):(b[u].reloadAfterSubmit?(p.trigger("reloadGrid"),b[u].closeAfterEdit||setTimeout(function(){p.jqGrid("setSelection",q[e])},1e3)):t.treeGrid===!0?p.jqGrid("setTreeRow",q[e],q):p.jqGrid("setRowData",q[e],q),b[u].closeAfterEdit&&x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form})),a.isFunction(b[u].afterComplete)&&(c=h,setTimeout(function(){p.triggerHandler("jqGridAddEditAfterComplete",[c,q,a(y),s]),b[u].afterComplete.call(o,c,q,a(y),s),c=null},500)),(b[u].checkOnSubmit||b[u].checkOnUpdate)&&(a(y).data("disabled",!1),"_empty"!==b[u]._savedData[u+"_id"]))for(k in b[u]._savedData)b[u]._savedData.hasOwnProperty(k)&&q[k]&&(b[u]._savedData[k]=q[k]);b[u].processing=!1;try{a(":input:visible",y)[0].focus()}catch(l){}}},v.ajaxOptions,b[u].ajaxEditOptions);if(D.url||b[u].useDataProxy||(a.isFunction(t.dataProxy)?b[u].useDataProxy=!0:(m[0]=!1,m[1]+=" "+v.errors.nourl)),m[0])if(b[u].useDataProxy){var G=t.dataProxy.call(o,D,"set_"+u);void 0===G&&(G=[!0,""]),G[0]===!1?(m[0]=!1,m[1]=G[1]||"Error deleting the selected row!"):(D.data.oper===r.addoper&&b[u].closeAfterAdd&&x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form}),D.data.oper===r.editoper&&b[u].closeAfterEdit&&x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form}))}else"clientArray"===D.url?(b[u].reloadAfterSubmit=!1,q=D.data,D.complete({status:200,statusText:""},"")):a.ajax(D)}m[0]===!1&&(a("#FormError>td",B).html(m[1]),a("#FormError",B).show())}function j(a,b){var c,d=!1;for(c in a)if(a.hasOwnProperty(c)&&a[c]!=b[c]){d=!0;break}return d}function k(){var c=!0;return a("#FormError",B).hide(),b[u].checkOnUpdate&&(q={},e(),r=j(q,b[u]._savedData),r&&(a(y).data("disabled",!0),a(".confirm",E).show(),c=!1)),c}function l(){var b;if("_empty"!==c&&void 0!==t.savedRow&&t.savedRow.length>0&&a.isFunction(a.fn.jqGrid.restoreRow))for(b=0;b<t.savedRow.length;b++)if(t.savedRow[b].id==c){p.jqGrid("restoreRow",c);break}}function m(b,c){var d=c[1].length-1;0===b?a("#pData",C).addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+w(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",C).addClass("ui-state-disabled"):a("#pData",C).removeClass("ui-state-disabled"),b===d?a("#nData",C).addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+w(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",C).addClass("ui-state-disabled"):a("#nData",C).removeClass("ui-state-disabled")}function n(){var b=p.jqGrid("getDataIDs"),c=a("#id_g",B).val(),d=a.inArray(c,b);return[d,b]}var o=this,p=a(o);if(o.grid&&c){var q,r,s,t=o.p,u=t.id,v=a.jgrid,w=v.jqID,x=v.hideModal,y="FrmGrid_"+u,z=y,A="TblGrid_"+u,B="#"+w(A),C=B+"_2",D={themodal:"editmod"+u,modalhead:"edithd"+u,modalcontent:"editcnt"+u,scrollelm:y},E="#"+w(D.themodal),F="#gbox_"+w(u),G=a.isFunction(b[u].beforeShowForm)?b[u].beforeShowForm:!1,H=a.isFunction(b[u].afterShowForm)?b[u].afterShowForm:!1,I=a.isFunction(b[u].beforeInitData)?b[u].beforeInitData:!1,J=a.isFunction(b[u].onInitializeForm)?b[u].onInitializeForm:!1,K=!0,L=1,M=0;y="#"+w(y),"new"===c?(c="_empty",s="add",d.caption=b[u].addCaption):(d.caption=b[u].editCaption,s="edit"),d.recreateForm||p.data("formProp")&&a.extend(b[u],p.data("formProp"));var N=!0;d.checkOnUpdate&&d.jqModal&&!d.modal&&(N=!1);var O=isNaN(b[u].dataheight)?b[u].dataheight:b[u].dataheight+"px",P=isNaN(b[u].datawidth)?b[u].datawidth:b[u].datawidth+"px",Q=a("<form name='FormPost' id='"+z+"' class='FormGrid' onSubmit='return false;' style='width:"+P+";overflow:auto;position:relative;height:"+O+";'></form>").data("disabled",!1),R=a("<table id='"+A+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");a(t.colModel).each(function(){var a=this.formoptions;L=Math.max(L,a?a.colpos||0:0),M=Math.max(M,a?a.rowpos||0:0)}),a(Q).append(R);var S=a("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*L+"'></td></tr>");if(S[0].rp=0,a(R).append(S),S=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*L+"'>"+b[u].topinfo+"</td></tr>"),S[0].rp=0,a(R).append(S),K=p.triggerHandler("jqGridAddEditBeforeInitData",[Q,s]),void 0===K&&(K=!0),K&&I&&(K=I.call(o,Q,s)),K!==!1){l();var T="rtl"===t.direction?!0:!1,U=T?"nData":"pData",V=T?"pData":"nData";f(c,R,L);var W="<a id='"+U+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",X="<a id='"+V+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",Y="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>",Z="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>",$="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+A+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(T?X+W:W+X)+"</td><td class='EditButton'>"+Y+Z+"</td></tr>";if($+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+b[u].bottominfo+"</td></tr>",$+="</tbody></table>",M>0){var _=[];a.each(a(R)[0].rows,function(a,b){_[a]=b}),_.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),a.each(_,function(b,c){a("tbody",R).append(c)})}d.gbox=F;var ab=!1;d.closeOnEscape===!0&&(d.closeOnEscape=!1,ab=!0);var bb=a("<div></div>").append(Q).append($);if(v.createModal(D,bb,b[u],"#gview_"+w(u),a(F)[0]),T&&(a("#pData, #nData",C).css("float","right"),a(".EditButton",C).css("text-align","left")),b[u].topinfo&&a(".tinfo",B).show(),b[u].bottominfo&&a(".binfo",C).show(),bb=null,$=null,a(E).keydown(function(c){var e=c.target;if(a(y).data("disabled")===!0)return!1;if(b[u].savekey[0]===!0&&c.which===b[u].savekey[1]&&"TEXTAREA"!==e.tagName)return a("#sData",C).trigger("click"),!1;if(27===c.which)return k()?(ab&&x(E,{gb:d.gbox,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form}),!1):!1;if(b[u].navkeys[0]===!0){if("_empty"===a("#id_g",B).val())return!0;if(c.which===b[u].navkeys[1])return a("#pData",C).trigger("click"),!1;if(c.which===b[u].navkeys[2])return a("#nData",C).trigger("click"),!1}}),d.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span",E).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close",E).unbind("click").click(function(){return k()?(x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form}),!1):!1})),d.saveicon=a.extend([!0,"left","ui-icon-disk"],d.saveicon),d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon),d.saveicon[0]===!0&&a("#sData",C).addClass("right"===d.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.saveicon[2]+"'></span>"),d.closeicon[0]===!0&&a("#cData",C).addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.closeicon[2]+"'></span>"),b[u].checkOnSubmit||b[u].checkOnUpdate){Y="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bYes+"</a>",X="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bNo+"</a>",Z="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bExit+"</a>";var cb=d.zIndex||999;cb++,a("<div class='"+d.overlayClass+" jqgrid-overlay confirm' style='z-index:"+cb+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(cb+1)+"'>"+d.saveData+"<br/><br/>"+Y+X+Z+"</div>").insertAfter(y),a("#sNew",E).click(function(){return i(),a(y).data("disabled",!1),a(".confirm",E).hide(),!1}),a("#nNew",E).click(function(){return a(".confirm",E).hide(),a(y).data("disabled",!1),setTimeout(function(){a(":input:visible",y)[0].focus()},0),!1}),a("#cNew",E).click(function(){return a(".confirm",E).hide(),a(y).data("disabled",!1),x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form}),!1})}p.triggerHandler("jqGridAddEditInitializeForm",[a(y),s]),J&&J.call(o,a(y),s),"_empty"!==c&&b[u].viewPagerButtons?a("#pData,#nData",C).show():a("#pData,#nData",C).hide(),p.triggerHandler("jqGridAddEditBeforeShowForm",[a(y),s]),G&&G.call(o,a(y),s),a(E).data("onClose",b[u].onClose),v.viewModal(E,{gbox:F,jqm:d.jqModal,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass,onHide:function(b){var c=a(E)[0].style.height;c.indexOf("px")>-1&&(c=parseFloat(c)),p.data("formProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:a(b.w).width(),height:c,dataheight:a(y).height(),datawidth:a(y).width()}),b.w.remove(),b.o&&b.o.remove()}}),N||a("."+w(d.overlayClass)).click(function(){return k()?(x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form}),!1):!1}),a(".fm-button",E).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),a("#sData",C).click(function(){return q={},a("#FormError",B).hide(),e(),"_empty"===q[u+"_id"]?i():d.checkOnSubmit===!0?(r=j(q,b[u]._savedData),r?(a(y).data("disabled",!0),a(".confirm",E).show()):i()):i(),!1}),a("#cData",C).click(function(){return k()?(x(E,{gb:F,jqm:d.jqModal,onClose:b[u].onClose,removemodal:b[u].removemodal,formprop:!b[u].recreateForm,form:b[u].form}),!1):!1}),a("#nData",C).click(function(){if(!k())return!1;a("#FormError",B).hide();var b=n();if(b[0]=parseInt(b[0],10),-1!==b[0]&&b[1][b[0]+1]){p.triggerHandler("jqGridAddEditClickPgButtons",["next",a(y),b[1][b[0]]]);var c;if(a.isFunction(d.onclickPgButtons)&&(c=d.onclickPgButtons.call(o,"next",a(y),b[1][b[0]]),void 0!==c&&c===!1))return!1;if(a("#"+w(b[1][b[0]+1])).hasClass("ui-state-disabled"))return!1;g(b[1][b[0]+1],y),p.jqGrid("setSelection",b[1][b[0]+1]),p.triggerHandler("jqGridAddEditAfterClickPgButtons",["next",a(y),b[1][b[0]]]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(o,"next",a(y),b[1][b[0]+1]),m(b[0]+1,b)}return!1}),a("#pData",C).click(function(){if(!k())return!1;a("#FormError",B).hide();var b=n();if(-1!==b[0]&&b[1][b[0]-1]){p.triggerHandler("jqGridAddEditClickPgButtons",["prev",a(y),b[1][b[0]]]);var c;if(a.isFunction(d.onclickPgButtons)&&(c=d.onclickPgButtons.call(o,"prev",a(y),b[1][b[0]]),void 0!==c&&c===!1))return!1;if(a("#"+w(b[1][b[0]-1])).hasClass("ui-state-disabled"))return!1;g(b[1][b[0]-1],y),p.jqGrid("setSelection",b[1][b[0]-1]),p.triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",a(y),b[1][b[0]]]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(o,"prev",a(y),b[1][b[0]-1]),m(b[0]-1,b)}return!1}),p.triggerHandler("jqGridAddEditAfterShowForm",[a(y),s]),H&&H.call(o,a(y),s);var db=n();m(db[0],db)}}})},viewGridRow:function(c,d){return d=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},a.jgrid.view,d||{}),b[a(this)[0].p.id]=d,this.each(function(){function e(){(b[m].closeOnEscape===!0||b[m].navkeys[0]===!0)&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+o(u.modalhead)).attr("tabindex","-1").focus()},0)}function f(b,c,e){var f,g,h,i,m,n,o,p,q,r=0,s=[],t=k.jqGrid("getInd",b),u="<td class='CaptionTD form-view-label ui-widget-content' width='"+d.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'></td>",v="",w="<td class='CaptionTD form-view-label ui-widget-content'></td><td class='DataTD form-view-data ui-widget-content'></td>",x=["integer","number","currency"],y=0,z=0;for(n=1;e>=n;n++)v+=1===n?u:w;if(a(l.colModel).each(function(){g=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,g||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,x)?y=Math.max(y,parseInt(this.width,10)):z=Math.max(z,parseInt(this.width,10)))}),o=0!==y?y:0!==z?z:0,a(l.colModel).each(function(b){var d;if(f=this.name,p=!1,g=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,m=g?"style='display:none'":"",q="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==f&&"subgrid"!==f&&"rn"!==f&&q){t===!1?i="":(d=a("td:eq("+b+")",j.rows[t]),i=f===l.ExpandColumn&&l.treeGrid===!0?d.text():this.autoResizable&&d.length>0&&a(d[0].firstChild).hasClass(l.autoResizableWrapperClassName)?a(d[0].firstChild).html():d.html()),p="right"===this.align&&0!==o?!0:!1;var k=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),n=parseInt(k.rowpos,10)||r+1,u=parseInt(2*(parseInt(k.colpos,10)||1),10);if(k.rowabove){var w=a("<tr><td class='contentinfo' colspan='"+2*e+"'>"+k.rowcontent+"</td></tr>");a(c).append(w),w[0].rp=n}h=a(c).find("tr[rowpos="+n+"]"),0===h.length&&(h=a("<tr "+m+" rowpos='"+n+"'></tr>").addClass("FormData").attr("id","trv_"+f),a(h).append(v),a(c).append(h),h[0].rp=n),a("td:eq("+(u-2)+")",h[0]).html("<b>"+((void 0===k.label?l.colNames[b]:k.label)||"&nbsp;")+"</b>"),a("td:eq("+(u-1)+")",h[0]).html("<span>"+(i||"&nbsp;")+"</span>").attr("id","v_"+f),p&&a("td:eq("+(u-1)+") span",h[0]).css({"text-align":"right",width:o+"px"}),s[r]=b,r++}}),r>0){var A=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*e-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>");A[0].rp=r+99,a(c).append(A)}return s}function g(b){var c,d,e,f,g=0,h=k.jqGrid("getInd",b,!0);h&&(a("td",h).each(function(b){f=l.colModel[b],c=f.name,d=f.editrules&&f.editrules.edithidden===!0?!1:f.hidden===!0?!0:!1,"cb"!==c&&"subgrid"!==c&&"rn"!==c&&(e=c===l.ExpandColumn&&l.treeGrid===!0?a(this).text():f.autoResizable&&a(this.firstChild).hasClass(l.autoResizableWrapperClassName)?a(this.firstChild).html():a(this).html(),c=o("v_"+c),a("#"+c+" span",q).html(e),d&&a("#"+c,q).parents("tr:first").hide(),g++)}),g>0&&a("#id_g",q).val(b))}function h(b,c){var d=c[1].length-1;0===b?a("#pData",r).addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+o(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",r).addClass("ui-state-disabled"):a("#pData",r).removeClass("ui-state-disabled"),b===d?a("#nData",r).addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+o(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",r).addClass("ui-state-disabled"):a("#nData",r).removeClass("ui-state-disabled")}function i(){var b=k.jqGrid("getDataIDs"),c=a("#id_g",q).val(),d=a.inArray(c,b);return[d,b]}var j=this,k=a(j);if(j.grid&&c){var l=j.p,m=l.id,n=a.jgrid,o=n.jqID,p="#ViewGrid_"+o(m),q="#ViewTbl_"+o(m),r=q+"_2",s="ViewGrid_"+m,t="ViewTbl_"+m,u={themodal:"viewmod"+m,modalhead:"viewhd"+m,modalcontent:"viewcnt"+m,scrollelm:s},v="#"+o(u.themodal),w="#gbox_"+o(m),x=a.isFunction(b[m].beforeInitData)?b[m].beforeInitData:!1,y=!0,z=1,A=0;d.recreateForm||k.data("viewProp")&&a.extend(b[m],k.data("viewProp"));var B=isNaN(b[m].dataheight)?b[m].dataheight:b[m].dataheight+"px",C=isNaN(b[m].datawidth)?b[m].datawidth:b[m].datawidth+"px",D=a("<form name='FormPost' id='"+s+"' class='FormGrid' style='width:"+C+";overflow:auto;position:relative;height:"+B+";'></form>"),E=a("<table id='"+t+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(a(l.colModel).each(function(){var a=this.formoptions;z=Math.max(z,a?a.colpos||0:0),A=Math.max(A,a?a.rowpos||0:0)}),a(D).append(E),x&&(y=x.call(j,D),void 0===y&&(y=!0)),y!==!1){f(c,E,z);var F="rtl"===l.direction?!0:!1,G=F?"nData":"pData",H=F?"pData":"nData",I="<a id='"+G+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",J="<a id='"+H+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",K="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+d.bClose+"</a>";if(A>0){var L=[];a.each(a(E)[0].rows,function(a,b){L[a]=b}),L.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),a.each(L,function(b,c){a("tbody",E).append(c)})}d.gbox=w;var M=a("<div></div>").append(D).append("<table border='0' class='EditTable' id='"+t+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+d.labelswidth+"'>"+(F?J+I:I+J)+"</td><td class='EditButton'>"+K+"</td></tr></tbody></table>");n.createModal(u,M,d,"#gview_"+o(m),a("#gview_"+o(m))[0]),F&&(a("#pData, #nData",r).css("float","right"),a(".EditButton",r).css("text-align","left")),d.viewPagerButtons||a("#pData, #nData",r).hide(),M=null,a(v).keydown(function(c){if(27===c.which)return b[m].closeOnEscape&&n.hideModal(v,{gb:w,jqm:d.jqModal,onClose:d.onClose,removemodal:b[m].removemodal,formprop:!b[m].recreateForm,form:b[m].form}),!1;if(d.navkeys[0]===!0){if(c.which===d.navkeys[1])return a("#pData",r).trigger("click"),!1;if(c.which===d.navkeys[2])return a("#nData",r).trigger("click"),!1}}),d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon),d.closeicon[0]===!0&&a("#cData",r).addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.closeicon[2]+"'></span>"),a.isFunction(d.beforeShowForm)&&d.beforeShowForm.call(j,a(p)),n.viewModal(v,{gbox:w,jqm:d.jqModal,overlay:d.overlay,modal:d.modal,onHide:function(b){k.data("viewProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:a(b.w).width(),height:a(b.w).height(),dataheight:a(p).height(),datawidth:a(p).width()}),b.w.remove(),b.o&&b.o.remove()}}),a(".fm-button:not(.ui-state-disabled)",r).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),e(),a("#cData",r).click(function(){return n.hideModal(v,{gb:w,jqm:d.jqModal,onClose:d.onClose,removemodal:b[m].removemodal,formprop:!b[m].recreateForm,form:b[m].form}),!1}),a("#nData",r).click(function(){a("#FormError",q).hide();var b=i();return b[0]=parseInt(b[0],10),-1!==b[0]&&b[1][b[0]+1]&&(a.isFunction(d.onclickPgButtons)&&d.onclickPgButtons.call(j,"next",a(p),b[1][b[0]]),g(b[1][b[0]+1]),k.jqGrid("setSelection",b[1][b[0]+1]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(j,"next",a(p),b[1][b[0]+1]),h(b[0]+1,b)),e(),!1}),a("#pData",r).click(function(){a("#FormError",q).hide();var b=i();return-1!==b[0]&&b[1][b[0]-1]&&(a.isFunction(d.onclickPgButtons)&&d.onclickPgButtons.call(j,"prev",a(p),b[1][b[0]]),g(b[1][b[0]-1]),k.jqGrid("setSelection",b[1][b[0]-1]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(j,"prev",a(p),b[1][b[0]-1]),h(b[0]-1,b)),e(),!1});var N=i();h(N[0],N)}}})},delGridRow:function(c,d){return d=a.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},a.jgrid.del,d||{}),b[a(this)[0].p.id]=d,this.each(function(){var e=this;if(e.grid&&c){var f,g,h,i,j=e.p,k=j.id,l=a.isFunction(b[k].beforeShowForm),m=a.jgrid,n=m.jqID,o=a.isFunction(b[k].afterShowForm),p="DelTbl_"+k,q=a.isFunction(b[k].beforeInitData)?b[k].beforeInitData:!1,r={themodal:"delmod"+k,modalhead:"delhd"+k,modalcontent:"delcnt"+k,scrollelm:p},s="#"+n(r.themodal),t="#gbox_"+n(k),u=!0,v="#DelTbl_"+n(k);if(a.isArray(c)&&(c=c.join()),void 0!==a(s)[0]){if(q&&(u=q.call(e,a(v)),void 0===u&&(u=!0)),u===!1)return;a("#DelData>td",v).text(c),a("#DelError",v).hide(),b[k].processing===!0&&(b[k].processing=!1,a("#dData",v).removeClass("ui-state-active")),l&&b[k].beforeShowForm.call(e,a(v)),m.viewModal(s,{gbox:t,jqm:b[k].jqModal,jqM:!1,overlay:b[k].overlay,modal:b[k].modal}),o&&b[k].afterShowForm.call(e,a(v))}else{var w=isNaN(b[k].dataheight)?b[k].dataheight:b[k].dataheight+"px",x=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",y="<div id='"+p+"' class='formdata' style='width:"+x+";overflow:auto;position:relative;height:"+w+";'>";
y+="<table class='DelTable'><tbody>",y+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",y+="<tr id='DelData' style='display:none'><td >"+c+"</td></tr>",y+='<tr><td class="delmsg" style="white-space:pre;">'+b[k].msg+"</td></tr><tr><td >&#160;</td></tr>",y+="</tbody></table></div>";var z="<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>",A="<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>";if(y+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+p+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+z+"&#160;"+A+"</td></tr></tbody></table>",d.gbox=t,m.createModal(IDs,y,j,"#gview_"+n(k),a("#gview_"+n(k))[0]),q&&(u=q.call(e,a(y)),void 0===u&&(u=!0)),u===!1)return;a(".fm-button",v+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),d.delicon=a.extend([!0,"left","ui-icon-scissors"],b[k].delicon),d.cancelicon=a.extend([!0,"left","ui-icon-cancel"],b[k].cancelicon),d.delicon[0]===!0&&a("#dData",v+"_2").addClass("right"===d.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.delicon[2]+"'></span>"),d.cancelicon[0]===!0&&a("#eData",v+"_2").addClass("right"===d.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.cancelicon[2]+"'></span>"),a("#dData",v+"_2").click(function(){var c,d=[!0,""],l=a("#DelData>td",v).text(),n={};if(a.isFunction(b[k].onclickSubmit)&&(n=b[k].onclickSubmit.call(e,b[k],l)||{}),a.isFunction(b[k].beforeSubmit)&&(d=b[k].beforeSubmit.call(e,l)),d[0]&&!b[k].processing){if(b[k].processing=!0,h=j.prmNames,f=a.extend({},b[k].delData,n),i=h.oper,f[i]=h.deloper,g=h.id,l=String(l).split(","),!l.length)return!1;for(c in l)l.hasOwnProperty(c)&&(l[c]=m.stripPref(j.idPrefix,l[c]));f[g]=l.join(),a(this).addClass("ui-state-active");var o=a.extend({url:b[k].url||a(e).jqGrid("getGridParam","editurl"),type:b[k].mtype,data:a.isFunction(b[k].serializeDelData)?b[k].serializeDelData.call(e,f):f,complete:function(c,g){var h;if(a("#dData",v+"_2").removeClass("ui-state-active"),c.status>=300&&304!==c.status?(d[0]=!1,d[1]=a.isFunction(b[k].errorTextFormat)?b[k].errorTextFormat.call(e,c):g+" Status: '"+c.statusText+"'. Error code: "+c.status):a.isFunction(b[k].afterSubmit)&&(d=b[k].afterSubmit.call(e,c,f)),d[0]===!1)a("#DelError>td",v).html(d[1]),a("#DelError",v).show();else{if(b[k].reloadAfterSubmit&&"local"!==j.datatype)a(e).trigger("reloadGrid");else{if(j.treeGrid===!0)try{a(e).jqGrid("delTreeNode",j.idPrefix+l[0])}catch(i){}else for(h=0;h<l.length;h++)a(e).jqGrid("delRowData",j.idPrefix+l[h]);j.selrow=null,j.selarrrow=[]}a.isFunction(b[k].afterComplete)&&setTimeout(function(){b[k].afterComplete.call(e,c,l)},500)}b[k].processing=!1,d[0]&&m.hideModal(s,{gb:t,jqm:b[k].jqModal,onClose:b[k].onClose})}},m.ajaxOptions,b[k].ajaxDelOptions);if(o.url||b[k].useDataProxy||(a.isFunction(j.dataProxy)?b[k].useDataProxy=!0:(d[0]=!1,d[1]+=" "+m.errors.nourl)),d[0])if(b[k].useDataProxy){var p=j.dataProxy.call(e,o,"del_"+k);void 0===p&&(p=[!0,""]),p[0]===!1?(d[0]=!1,d[1]=p[1]||"Error deleting the selected row!"):m.hideModal(s,{gb:t,jqm:b[k].jqModal,onClose:b[k].onClose})}else"clientArray"===o.url?(f=o.data,o.complete({status:200,statusText:""},"")):a.ajax(o)}return d[0]===!1&&(a("#DelError>td",v).html(d[1]),a("#DelError",v).show()),!1}),a("#eData",v+"_2").click(function(){return m.hideModal(s,{gb:t,jqm:b[k].jqModal,onClose:b[k].onClose}),!1}),l&&b[k].beforeShowForm.call(e,a(v)),m.viewModal(s,{gbox:t,jqm:b[k].jqModal,overlay:b[k].overlay,modal:b[k].modal}),o&&b[k].afterShowForm.call(e,a(v))}b[k].closeOnEscape===!0&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+n(r.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(b,c,d,e,f,g,h){return c=a.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},a.jgrid.nav,c||{}),this.each(function(){if(!this.nav){var i,j,k=this.p,l=k.id,m={themodal:"alertmod_"+l,modalhead:"alerthd_"+l,modalcontent:"alertcnt_"+l},n=this,o=a.jgrid,p=o.jqID,q=p(k.id),r="#gbox_"+q,s=function(){o.viewModal("#"+p(m.themodal),{gbox:r,jqm:!0}),a("#jqg_alrt").focus()};if(n.grid&&"string"==typeof b){void 0===a("#"+p(m.themodal))[0]&&(c.alerttop||c.alertleft||(void 0!==window.innerWidth?(c.alertleft=window.innerWidth,c.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(c.alertleft=document.documentElement.clientWidth,c.alerttop=document.documentElement.clientHeight):(c.alertleft=1024,c.alerttop=768),c.alertleft=c.alertleft/2-parseInt(c.alertwidth,10)/2,c.alerttop=c.alerttop/2-25),o.createModal(m,"<div>"+c.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:r,jqModal:!0,drag:!0,resize:!0,caption:c.alertcap,top:c.alerttop,left:c.alertleft,width:c.alertwidth,height:c.alertheight,closeOnEscape:c.closeOnEscape,zIndex:c.alertzIndex},"#gview_"+q,a(r)[0],!0));var t,u=1,v=function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},w=function(){a(this).removeClass("ui-state-hover")};for(c.cloneToTop&&k.toppager&&(u=2),t=0;u>t;t++){var x,y,z,A=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),B="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";0===t?(y=b,z=l,y===k.toppager&&(z+="_top",u=1)):(y=k.toppager,z=l+"_top"),"rtl"===k.direction&&a(A).attr("dir","rtl").css("float","right"),c.add&&(e=e||{},x=a("<td class='ui-pg-button ui-corner-all'></td>"),a(x).append("<div class='ui-pg-div'><span class='ui-icon "+c.addicon+"'></span>"+c.addtext+"</div>"),a("tr",A).append(x),a(x,A).attr({title:c.addtitle||"",id:e.id||"add_"+z}).click(function(){return a(this).hasClass("ui-state-disabled")||(a.isFunction(c.addfunc)?c.addfunc.call(n):a(n).jqGrid("editGridRow","new",e)),!1}).hover(v,w),x=null),c.edit&&(x=a("<td class='ui-pg-button ui-corner-all'></td>"),d=d||{},a(x).append("<div class='ui-pg-div'><span class='ui-icon "+c.editicon+"'></span>"+c.edittext+"</div>"),a("tr",A).append(x),a(x,A).attr({title:c.edittitle||"",id:d.id||"edit_"+z}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=k.selrow;b?a.isFunction(c.editfunc)?c.editfunc.call(n,b):a(n).jqGrid("editGridRow",b,d):s()}return!1}).hover(v,w),x=null),c.view&&(x=a("<td class='ui-pg-button ui-corner-all'></td>"),h=h||{},a(x).append("<div class='ui-pg-div'><span class='ui-icon "+c.viewicon+"'></span>"+c.viewtext+"</div>"),a("tr",A).append(x),a(x,A).attr({title:c.viewtitle||"",id:h.id||"view_"+z}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=k.selrow;b?a.isFunction(c.viewfunc)?c.viewfunc.call(n,b):a(n).jqGrid("viewGridRow",b,h):s()}return!1}).hover(v,w),x=null),c.del&&(x=a("<td class='ui-pg-button ui-corner-all'></td>"),f=f||{},a(x).append("<div class='ui-pg-div'><span class='ui-icon "+c.delicon+"'></span>"+c.deltext+"</div>"),a("tr",A).append(x),a(x,A).attr({title:c.deltitle||"",id:f.id||"del_"+z}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b;k.multiselect?(b=k.selarrrow,0===b.length&&(b=null)):b=k.selrow,b?a.isFunction(c.delfunc)?c.delfunc.call(n,b):a(n).jqGrid("delGridRow",b,f):s()}return!1}).hover(v,w),x=null),(c.add||c.edit||c.del||c.view)&&a("tr",A).append(B),c.search&&(x=a("<td class='ui-pg-button ui-corner-all'></td>"),g=g||{},a(x).append("<div class='ui-pg-div'><span class='ui-icon "+c.searchicon+"'></span>"+c.searchtext+"</div>"),a("tr",A).append(x),a(x,A).attr({title:c.searchtitle||"",id:g.id||"search_"+z}).click(function(){return a(this).hasClass("ui-state-disabled")||(a.isFunction(c.searchfunc)?c.searchfunc.call(n,g):a(n).jqGrid("searchGrid",g)),!1}).hover(v,w),g.showOnLoad&&g.showOnLoad===!0&&a(x,A).click(),x=null),c.refresh&&(x=a("<td class='ui-pg-button ui-corner-all'></td>"),a(x).append("<div class='ui-pg-div'><span class='ui-icon "+c.refreshicon+"'></span>"+c.refreshtext+"</div>"),a("tr",A).append(x),a(x,A).attr({title:c.refreshtitle||"",id:"refresh_"+z}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(c.beforeRefresh)&&c.beforeRefresh.call(n),k.search=!1,k.resetsearch=!0;try{if("currentfilter"!==c.refreshstate){k.postData.filters="";try{a("#fbox_"+q).jqFilter("resetFilter")}catch(b){}a.isFunction(n.clearToolbar)&&n.clearToolbar.call(n,!1)}}catch(d){}switch(c.refreshstate){case"firstpage":a(n).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":a(n).trigger("reloadGrid",[{current:!0}])}a.isFunction(c.afterRefresh)&&c.afterRefresh.call(n)}return!1}).hover(v,w),x=null),j=a(".ui-jqgrid").css("font-size")||"11px",a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+j+";visibility:hidden;' ></div>"),i=a(A).clone().appendTo("#testpg2").width(),a("#testpg2").remove(),a(y+"_"+c.position,y).append(A),k._nvtd&&(i>k._nvtd[0]&&(a(y+"_"+c.position,y).width(i),k._nvtd[0]=i),k._nvtd[1]=i),j=null,i=null,A=null,this.nav=!0}}}})},navButtonAdd:function(b,c){return c=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},c||{}),this.each(function(){var d=a.jgrid.jqID;if(this.grid){"string"==typeof b&&0!==b.indexOf("#")&&(b="#"+d(b));var e=a(".navtable",b)[0],f=this;if(e){if(c.id&&void 0!==a("#"+d(c.id),e)[0])return;var g=a("<td></td>");a(g).addClass("ui-pg-button ui-corner-all").append("NONE"===c.buttonicon.toString().toUpperCase()?"<div class='ui-pg-div'>"+c.caption+"</div>":"<div class='ui-pg-div'><span class='ui-icon "+c.buttonicon+"'></span>"+c.caption+"</div>"),c.id&&a(g).attr("id",c.id),"first"===c.position?0===e.rows[0].cells.length?a("tr",e).append(g):a("tr td:eq(0)",e).before(g):a("tr",e).append(g),a(g,e).attr("title",c.title||"").click(function(b){return a(this).hasClass("ui-state-disabled")||a.isFunction(c.onClickButton)&&c.onClickButton.call(f,b),!1}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(b,c){return c=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},c||{}),this.each(function(){if(this.grid){"string"==typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var d=a(".navtable",b)[0];if(d){var e="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+c.sepclass+"'></span>"+c.sepcontent+"</td>";"first"===c.position?0===d.rows[0].cells.length?a("tr",d).append(e):a("tr td:eq(0)",d).before(e):a("tr",d).append(e)}}})},GridToForm:function(b,c){return this.each(function(){var d,e,f=this;if(f.grid){var g=a(f).jqGrid("getRowData",b);if(g)for(d in g)g.hasOwnProperty(d)&&(e=a("[name="+a.jgrid.jqID(d)+"]",c),e.is("input:radio")||e.is("input:checkbox")?e.each(function(){a(this).val()==g[d]?a(this)[f.p.useProp?"prop":"attr"]("checked",!0):a(this)[f.p.useProp?"prop":"attr"]("checked",!1)}):e.val(g[d]))}})},FormToGrid:function(b,c,d,e){return this.each(function(){var f=this;if(f.grid){d||(d="set"),e||(e="first");var g=a(c).serializeArray(),h={};a.each(g,function(a,b){h[b.name]=b.value}),"add"===d?a(f).jqGrid("addRowData",b,h,e):"set"===d&&a(f).jqGrid("setRowData",b,h)}})}})}(jQuery),function(a){"use strict";a.extend(a.jgrid,{template:function(b){var c,d=a.makeArray(arguments).slice(1),e=d.length;return null==b&&(b=""),b.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(b,f){var g,h;if(!isNaN(parseInt(f,10)))return d[parseInt(f,10)];for(c=0;e>c;c++)if(a.isArray(d[c]))for(g=d[c],h=g.length;h--;)if(f===g[h].nm)return g[h].v})}}),a.jgrid.extend({groupingSetup:function(){return this.each(function(){var b,c,d,e=this,f=e.p.colModel,g=e.p.groupingView,h=function(){return""};if(null===g||"object"!=typeof g&&!a.isFunction(g))e.p.grouping=!1;else if(g.groupField.length){for(void 0===g.visibiltyOnNextGrouping&&(g.visibiltyOnNextGrouping=[]),g.lastvalues=[],g._locgr||(g.groups=[]),g.counters=[],b=0;b<g.groupField.length;b++)g.groupOrder[b]||(g.groupOrder[b]="asc"),g.groupText[b]||(g.groupText[b]="{0}"),"boolean"!=typeof g.groupColumnShow[b]&&(g.groupColumnShow[b]=!0),"boolean"!=typeof g.groupSummary[b]&&(g.groupSummary[b]=!1),g.groupSummaryPos[b]||(g.groupSummaryPos[b]="footer"),g.groupColumnShow[b]===!0?(g.visibiltyOnNextGrouping[b]=!0,a(e).jqGrid("showCol",g.groupField[b])):(g.visibiltyOnNextGrouping[b]=a("#"+a.jgrid.jqID(e.p.id+"_"+g.groupField[b])).is(":visible"),a(e).jqGrid("hideCol",g.groupField[b]));for(g.summary=[],g.hideFirstGroupCol&&(g.formatDisplayField[0]=function(a){return a}),c=0,d=f.length;d>c;c++)g.hideFirstGroupCol&&(f[c].hidden||g.groupField[0]!==f[c].name||(f[c].formatter=h)),f[c].summaryType&&g.summary.push(f[c].summaryDivider?{nm:f[c].name,st:f[c].summaryType,v:"",sd:f[c].summaryDivider,vd:"",sr:f[c].summaryRound,srt:f[c].summaryRoundType||"round"}:{nm:f[c].name,st:f[c].summaryType,v:"",sr:f[c].summaryRound,srt:f[c].summaryRoundType||"round"})}else e.p.grouping=!1})},groupingPrepare:function(b,c){return this.each(function(){var d,e,f,g,h,i,j,k=this.p.groupingView,l=this,m=k.groupField.length,n=0,o=function(){a.isFunction(this.st)?this.v=this.st.call(l,this.v,this.nm,b):(this.v=a(l).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,b),"avg"===this.st.toLowerCase()&&this.sd&&(this.vd=a(l).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,b)))};for(d=0;m>d;d++)e=k.groupField[d],h=k.displayField[d],f=null==k.titleField?null:k.titleField[d],g=b[e],i=null==h?null:b[h],j=null==f?null:b[f],null==i&&(i=g),void 0!==g&&(0===c?(k.groups.push({idx:d,dataIndex:e,value:g,displayValue:i,titleValue:j,startRow:c,cnt:1,summary:[]}),k.lastvalues[d]=g,k.counters[d]={cnt:1,pos:k.groups.length-1,summary:a.extend(!0,[],k.summary)},a.each(k.counters[d].summary,o),k.groups[k.counters[d].pos].summary=k.counters[d].summary):"object"==typeof g||(a.isArray(k.isInTheSameGroup)&&a.isFunction(k.isInTheSameGroup[d])?k.isInTheSameGroup[d].call(l,k.lastvalues[d],g,d,k):k.lastvalues[d]===g)?1===n?(k.groups.push({idx:d,dataIndex:e,value:g,displayValue:i,titleValue:j,startRow:c,cnt:1,summary:[]}),k.lastvalues[d]=g,k.counters[d]={cnt:1,pos:k.groups.length-1,summary:a.extend(!0,[],k.summary)},a.each(k.counters[d].summary,o),k.groups[k.counters[d].pos].summary=k.counters[d].summary):(k.counters[d].cnt+=1,k.groups[k.counters[d].pos].cnt=k.counters[d].cnt,a.each(k.counters[d].summary,o),k.groups[k.counters[d].pos].summary=k.counters[d].summary):(k.groups.push({idx:d,dataIndex:e,value:g,displayValue:i,titleValue:j,startRow:c,cnt:1,summary:[]}),k.lastvalues[d]=g,n=1,k.counters[d]={cnt:1,pos:k.groups.length-1,summary:a.extend(!0,[],k.summary)},a.each(k.counters[d].summary,o),k.groups[k.counters[d].pos].summary=k.counters[d].summary))}),this},groupingToggle:function(b){return this.each(function(){var c=this,d=c.p.groupingView,e=b.split("_"),f=parseInt(e[e.length-2],10);e.splice(e.length-2,2);var g,h,i=e.join("_"),j=d.minusicon,k=d.plusicon,l=a("#"+a.jgrid.jqID(b)),m=l.length?l[0].nextSibling:null,n=a("#"+a.jgrid.jqID(b)+" span.tree-wrap-"+c.p.direction),o=function(b){var c=a.map(b.split(" "),function(a){return a.substring(0,i.length+1)===i+"_"?parseInt(a.substring(i.length+1),10):void 0});return c.length>0?c[0]:void 0},p=!1,q=c.p.frozenColumns?c.p.id+"_frozen":!1,r=q?a("#"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(q)):!1,s=r&&r.length?r[0].nextSibling:null;if(n.hasClass(j)){if(d.showSummaryOnHide){if(m)for(;m&&(g=o(m.className),!(void 0!==g&&f>=g));)a(m).hide(),m=m.nextSibling,q&&(a(s).hide(),s=s.nextSibling)}else if(m)for(;m&&(g=o(m.className),!(void 0!==g&&f>=g));)a(m).hide(),m=m.nextSibling,q&&(a(s).hide(),s=s.nextSibling);n.removeClass(j).addClass(k),p=!0}else{if(m)for(h=void 0;m;){if(g=o(m.className),void 0===h&&(h=void 0===g),void 0!==g){if(f>=g)break;g===f+1&&(a(m).show().find(">td>span.tree-wrap-"+c.p.direction).removeClass(j).addClass(k),q&&a(s).show().find(">td>span.tree-wrap-"+c.p.direction).removeClass(j).addClass(k))}else h&&(a(m).show(),q&&a(s).show());m=m.nextSibling,q&&(s=s.nextSibling)}n.removeClass(k).addClass(j)}a(c).triggerHandler("jqGridGroupingClickGroup",[b,p]),a.isFunction(c.p.onClickGroup)&&c.p.onClickGroup.call(c,b,p)}),!1},groupingRender:function(b,c,d,e){return this.each(function(){function f(a,b,c){var d,e=!1;if(0===b)e=c[a];else{var f=c[a].idx;if(0===f)e=c[a];else for(d=a;d>=0;d--)if(c[d].idx===f-b){e=c[d];break}}return e}function g(b,d,e,g){var h,i,j,l=f(b,d,e),m=k.p.colModel,n=l.cnt,o="";for(h=g;c>h;h++)i="<td "+k.formatCol(h,1,"")+">&#160;</td>",j="{0}",a.each(l.summary,function(){var b;if(this.nm===m[h].name){m[h].summaryTpl&&(j=m[h].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&n>0&&(this.v=this.v/n));try{this.groupCount=l.cnt,this.groupIndex=l.dataIndex,this.groupValue=l.value,b=k.formatter("",this.v,h,this)}catch(c){b=this.v}return i="<td "+k.formatCol(h,1,"")+">"+a.jgrid.format(j,b)+"</td>",!1}}),o+=i;return o}var h,i,j,k=this,l=k.p.groupingView,m="",n="",o=l.groupCollapse?l.plusicon:l.minusicon,p=[],q=l.groupField.length;o+=" tree-wrap-"+k.p.direction,a.each(k.p.colModel,function(a,b){var c;for(c=0;q>c;c++)if(l.groupField[c]===b.name){p[c]=a;break}});var r=0,s=a.makeArray(l.groupSummary);s.reverse(),a.each(l.groups,function(f,t){if(l._locgr&&!(t.startRow+t.cnt>(d-1)*e&&t.startRow<d*e))return!0;r++,i=k.p.id+"ghead_"+t.idx,h=i+"_"+f,n="<span style='cursor:pointer;' class='ui-icon "+o+"' onclick=\"jQuery('#"+a.jgrid.jqID(k.p.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+h+"');return false;\"></span>";try{a.isArray(l.formatDisplayField)&&a.isFunction(l.formatDisplayField[t.idx])?(t.displayValue=l.formatDisplayField[t.idx].call(k,t.displayValue,t.value,k.p.colModel[p[t.idx]],t.idx,l),j=t.displayValue):j=k.formatter(h,t.displayValue,p[t.idx],t.value)}catch(u){j=t.displayValue}var v=null==t.titleValue?"":t.titleValue;m+='<tr id="'+h+'"'+(l.groupCollapse&&t.idx>0?' style="display:none;" ':" ")+'role="row" class="ui-widget-content jqgroup ui-row-'+k.p.direction+" "+i+'" title="'+v+'"><td style="padding-left:'+12*t.idx+'px;"';var w=a.isFunction(l.groupText[t.idx])?l.groupText[t.idx].call(k,j,t.cnt,t.summary):a.jgrid.template(l.groupText[t.idx],j,t.cnt,t.summary);if("string"!=typeof w&&"number"!=typeof w&&(w=j),"header"===l.groupSummaryPos[t.idx]){var x=k.p.multiselect?' colspan="2"':"";m+=x+">"+n+w+"</td>",m+=g(f,0,l.groups,l.groupColumnShow[t.idx]===!1?""===x?2:3:""===x?1:2)}else m+=' colspan="'+(l.groupColumnShow[t.idx]===!1?c-1:c)+'">'+n+w+"</td>";m+="</tr>";var y=q-1===t.idx;if(y){var z,A,B=l.groups[f+1],C=0,D=t.startRow,E=void 0!==B?B.startRow:l.groups[f].startRow+l.groups[f].cnt;for(l._locgr&&(C=(d-1)*e,C>t.startRow&&(D=C)),z=D;E>z&&b[z-C];z++)m+=b[z-C].join("");if("header"!==l.groupSummaryPos[t.idx]){var F,G;if(void 0!==B){for(F=0;F<l.groupField.length&&B.dataIndex!==l.groupField[F];F++);r=l.groupField.length-F}for(A=0;r>A;A++)s[A]&&(G="",l.groupCollapse&&!l.showSummaryOnHide&&(G=' style="display:none;"'),m+="<tr"+G+' data-jqfootlevel="'+(t.idx-A)+'" role="row" class="ui-widget-content jqfoot ui-row-'+k.p.direction+'">',m+=g(f,A,l.groups,0),m+="</tr>");r=F}}}),a("#"+a.jgrid.jqID(k.p.id)+" tbody:first").append(m),m=null})},groupingGroupBy:function(b,c){return this.each(function(){var d=this;"string"==typeof b&&(b=[b]);var e=d.p.groupingView;d.p.grouping=!0,e._locgr=!1,void 0===e.visibiltyOnNextGrouping&&(e.visibiltyOnNextGrouping=[]);var f;for(f=0;f<e.groupField.length;f++)!e.groupColumnShow[f]&&e.visibiltyOnNextGrouping[f]&&a(d).jqGrid("showCol",e.groupField[f]);for(f=0;f<b.length;f++)e.visibiltyOnNextGrouping[f]=a("#"+a.jgrid.jqID(d.p.id)+"_"+a.jgrid.jqID(b[f])).is(":visible");d.p.groupingView=a.extend(d.p.groupingView,c||{}),e.groupField=b,a(d).trigger("reloadGrid")})},groupingRemove:function(b){return this.each(function(){var c=this;if(void 0===b&&(b=!0),c.p.grouping=!1,b===!0){var d,e=c.p.groupingView;for(d=0;d<e.groupField.length;d++)!e.groupColumnShow[d]&&e.visibiltyOnNextGrouping[d]&&a(c).jqGrid("showCol",e.groupField);a("tr.jqgroup, tr.jqfoot","#"+a.jgrid.jqID(c.p.id)+" tbody:first").remove(),a("tr.jqgrow:hidden","#"+a.jgrid.jqID(c.p.id)+" tbody:first").show()}else a(c).trigger("reloadGrid")})},groupingCalculations:{handler:function(a,b,c,d,e,f){var g={sum:function(){return parseFloat(b||0)+parseFloat(f[c]||0)},min:function(){return""===b?parseFloat(f[c]||0):Math.min(parseFloat(b),parseFloat(f[c]||0))},max:function(){return""===b?parseFloat(f[c]||0):Math.max(parseFloat(b),parseFloat(f[c]||0))},count:function(){return""===b&&(b=0),f.hasOwnProperty(c)?b+1:0},avg:function(){return g.sum()}};if(!g[a])throw"jqGrid Grouping No such method: "+a;var h=g[a]();if(null!=d)if("fixed"===e)h=h.toFixed(d);else{var i=Math.pow(10,d);h=Math.round(h*i)/i}return h}}})}(jQuery),function(a){"use strict";a.jgrid.extend({jqGridImport:function(b){return b=a.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},b||{}),this.each(function(){var c=this,d=function(b,d){var e,f,g,h=a(d.xmlGrid.config,b)[0],i=a(d.xmlGrid.data,b)[0];if(xmlJsonClass.xml2json&&a.jgrid.parse){e=xmlJsonClass.xml2json(h," "),e=a.jgrid.parse(e);for(g in e)e.hasOwnProperty(g)&&(f=e[g]);if(i){var j=e.grid.datatype;e.grid.datatype="xmlstring",e.grid.datastr=b,a(c).jqGrid(f).jqGrid("setGridParam",{datatype:j})}else a(c).jqGrid(f);e=null,f=null}else alert("xml2json or parse are not present")},e=function(b,d){if(b&&"string"==typeof b){var e=!1;a.jgrid.useJSON&&(a.jgrid.useJSON=!1,e=!0);var f=a.jgrid.parse(b);e&&(a.jgrid.useJSON=!0);var g=f[d.jsonGrid.config],h=f[d.jsonGrid.data];if(h){var i=g.datatype;g.datatype="jsonstring",g.datastr=h,a(c).jqGrid(g).jqGrid("setGridParam",{datatype:i})}else a(c).jqGrid(g)}};switch(b.imptype){case"xml":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"xml",complete:function(e,f){"success"===f&&(d(e.responseXML,b),a(c).triggerHandler("jqGridImportComplete",[e,b]),a.isFunction(b.importComplete)&&b.importComplete(e)),e=null}},b.ajaxOptions));break;case"xmlstring":if(b.impstring&&"string"==typeof b.impstring){var f=a.parseXML(b.impstring);f&&(d(f,b),a(c).triggerHandler("jqGridImportComplete",[f,b]),a.isFunction(b.importComplete)&&b.importComplete(f),b.impstring=null),f=null}break;case"json":a.ajax(a.extend({url:b.impurl,type:b.mtype,data:b.impData,dataType:"json",complete:function(d){try{e(d.responseText,b),a(c).triggerHandler("jqGridImportComplete",[d,b]),a.isFunction(b.importComplete)&&b.importComplete(d)}catch(f){}d=null}},b.ajaxOptions));break;case"jsonstring":b.impstring&&"string"==typeof b.impstring&&(e(b.impstring,b),a(c).triggerHandler("jqGridImportComplete",[b.impstring,b]),a.isFunction(b.importComplete)&&b.importComplete(b.impstring),b.impstring=null)}})},jqGridExport:function(b){b=a.extend({exptype:"xmlstring",root:"grid",ident:"	"},b||{});var c=null;return this.each(function(){if(this.grid){var d,e=a.extend(!0,{},a(this).jqGrid("getGridParam"));if(e.rownumbers&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.multiselect&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.subGrid&&(e.colNames.splice(0,1),e.colModel.splice(0,1)),e.knv=null,e.treeGrid)for(d in e.treeReader)e.treeReader.hasOwnProperty(d)&&(e.colNames.splice(e.colNames.length-1),e.colModel.splice(e.colModel.length-1));switch(b.exptype){case"xmlstring":c="<"+b.root+">"+xmlJsonClass.json2xml(e,b.ident)+"</"+b.root+">";break;case"jsonstring":c="{"+xmlJsonClass.toJson(e,b.root,b.ident,!1)+"}",void 0!==e.postData.filters&&(c=c.replace(/filters":"/,'filters":'),c=c.replace(/}]}"/,"}]}"))}}}),c},excelExport:function(b){return b=a.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},b||{}),this.each(function(){if(this.grid){var c;if("remote"===b.exptype){var d=a.extend({},this.p.postData);d[b.oper]=b.tag;var e=jQuery.param(d);c=-1!==b.url.indexOf("?")?b.url+"&"+e:b.url+"?"+e,window.location=c}}})}})}(jQuery),function(a){"use strict";a.jgrid.inlineEdit=a.jgrid.inlineEdit||{},a.jgrid.extend({editRow:function(b,c,d,e,f,g,h,i,j){var k={},l=a.makeArray(arguments).slice(1);return"object"===a.type(l[0])?k=l[0]:(void 0!==c&&(k.keys=c),a.isFunction(d)&&(k.oneditfunc=d),a.isFunction(e)&&(k.successfunc=e),void 0!==f&&(k.url=f),void 0!==g&&(k.extraparam=g),a.isFunction(h)&&(k.aftersavefunc=h),a.isFunction(i)&&(k.errorfunc=i),a.isFunction(j)&&(k.afterrestorefunc=j)),k=a.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0},a.jgrid.inlineEdit,k),this.each(function(){var c,d,e,f,g,h,i=this,j=0,l=null,m={};i.grid&&(f=a(i).jqGrid("getInd",b,!0),f!==!1&&(h=a.isFunction(k.beforeEditRow)?k.beforeEditRow.call(i,k,b):void 0,void 0===h&&(h=!0),h&&(e=a(f).attr("editable")||"0","0"!==e||a(f).hasClass("not-editable-row")||(g=i.p.colModel,a('td[role="gridcell"]',f).each(function(e){c=g[e].name;var f=i.p.treeGrid===!0&&c===i.p.ExpandColumn;if(f)d=a("span:first",this).html();else try{d=a.unformat.call(i,this,{rowId:b,colModel:g[e]},e)}catch(h){d=g[e].edittype&&"textarea"===g[e].edittype?a(this).text():a(this).html()}if("cb"!==c&&"subgrid"!==c&&"rn"!==c&&(i.p.autoencode&&(d=a.jgrid.htmlDecode(d)),m[c]=d,g[e].editable===!0)){null===l&&(l=e),f?a("span:first",this).html(""):a(this).html("");var k=a.extend({},g[e].editoptions||{},{id:b+"_"+c,name:c,rowId:b});g[e].edittype||(g[e].edittype="text"),("&nbsp;"===d||"&#160;"===d||1===d.length&&160===d.charCodeAt(0))&&(d="");var n=a.jgrid.createEl.call(i,g[e].edittype,k,d,!0,a.extend({},a.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));a(n).addClass("editable"),f?a("span:first",this).append(n):a(this).append(n),a.jgrid.bindEv.call(i,n,k),"select"===g[e].edittype&&void 0!==g[e].editoptions&&g[e].editoptions.multiple===!0&&void 0===g[e].editoptions.dataUrl&&a.jgrid.msie&&a(n).width(a(n).width()),j++}}),j>0&&(m.id=b,i.p.savedRow.push(m),a(f).attr("editable","1"),k.focusField&&("number"==typeof k.focusField&&parseInt(k.focusField,10)<=g.length&&(l=k.focusField),setTimeout(function(){var b=a("td:eq("+l+") :input:visible",f).not(":disabled");b.length>0&&b.focus()},0)),k.keys===!0&&a(f).bind("keydown",function(c){if(27===c.keyCode){if(a(i).jqGrid("restoreRow",b,k.afterrestorefunc),i.p._inlinenav)try{a(i).jqGrid("showAddEditButtons")}catch(d){}return!1}if(13===c.keyCode){var e=c.target;if("TEXTAREA"===e.tagName)return!0;if(a(i).jqGrid("saveRow",b,k)&&i.p._inlinenav)try{a(i).jqGrid("showAddEditButtons")}catch(f){}return!1}}),a(i).triggerHandler("jqGridInlineEditRow",[b,k]),a.isFunction(k.oneditfunc)&&k.oneditfunc.call(i,b))))))})},saveRow:function(b,c,d,e,f,g,h){var i=a.makeArray(arguments).slice(1),j={};"object"===a.type(i[0])?j=i[0]:(a.isFunction(c)&&(j.successfunc=c),void 0!==d&&(j.url=d),void 0!==e&&(j.extraparam=e),a.isFunction(f)&&(j.aftersavefunc=f),a.isFunction(g)&&(j.errorfunc=g),a.isFunction(h)&&(j.afterrestorefunc=h)),j=a.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:a.jgrid.defaults.savetext||"Saving..."},a.jgrid.inlineEdit,j);var k,l,m,n,o,p=!1,q=this[0],r={},s={},t={};if(!q.grid)return p;if(o=a(q).jqGrid("getInd",b,!0),o===!1)return p;var u=a.isFunction(j.beforeSaveRow)?j.beforeSaveRow.call(q,j,b):void 0;if(void 0===u&&(u=!0),u){if(l=a(o).attr("editable"),j.url=j.url||q.p.editurl,"1"===l){var v;if(a('td[role="gridcell"]',o).each(function(b){if(v=q.p.colModel[b],k=v.name,"cb"!==k&&"subgrid"!==k&&v.editable===!0&&"rn"!==k&&!a(this).hasClass("not-editable-cell")){switch(v.edittype){case"checkbox":var c=["Yes","No"];v.editoptions&&(c=v.editoptions.value.split(":")),r[k]=a("input",this).is(":checked")?c[0]:c[1];break;case"text":case"password":case"textarea":case"button":r[k]=a("input, textarea",this).val();break;case"select":if(v.editoptions.multiple){var d=a("select",this),e=[];r[k]=a(d).val(),r[k]=r[k]?r[k].join(","):"",a("select option:selected",this).each(function(b,c){e[b]=a(c).text()}),s[k]=e.join(",")}else r[k]=a("select option:selected",this).val(),s[k]=a("select option:selected",this).text();v.formatter&&"select"===v.formatter&&(s={});break;case"custom":try{if(!v.editoptions||!a.isFunction(v.editoptions.custom_value))throw"e1";if(r[k]=v.editoptions.custom_value.call(q,a(".customelement",this),"get"),void 0===r[k])throw"e2"}catch(f){"e1"===f&&a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"===f?a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):a.jgrid.info_dialog(a.jgrid.errors.errcap,f.message,a.jgrid.edit.bClose)}}if(n=a.jgrid.checkValues.call(q,r[k],b),n[0]===!1)return!1;q.p.autoencode&&(r[k]=a.jgrid.htmlEncode(r[k])),"clientArray"!==j.url&&v.editoptions&&v.editoptions.NullIfEmpty===!0&&""===r[k]&&(t[k]="null")}}),n[0]===!1){try{var w=a(q).jqGrid("getGridRowById",b),x=a.jgrid.findPos(w);a.jgrid.info_dialog(a.jgrid.errors.errcap,n[1],a.jgrid.edit.bClose,{left:x[0],top:x[1]+a(w).outerHeight()})}catch(y){alert(n[1])}return p}var z,A=q.p.prmNames,B=b;if(z=q.p.keyName===!1?A.id:q.p.keyName,r){if(r[A.oper]=A.editoper,void 0===r[z]||""===r[z])r[z]=b;else if(o.id!==q.p.idPrefix+r[z]){var C=a.jgrid.stripPref(q.p.idPrefix,b);if(void 0!==q.p._index[C]&&(q.p._index[r[z]]=q.p._index[C],delete q.p._index[C]),b=q.p.idPrefix+r[z],a(o).attr("id",b),q.p.selrow===B&&(q.p.selrow=b),a.isArray(q.p.selarrrow)){var D=a.inArray(B,q.p.selarrrow);D>=0&&(q.p.selarrrow[D]=b)}if(q.p.multiselect){var E="jqg_"+q.p.id+"_"+b;a("input.cbox",o).attr("id",E).attr("name",E)}}void 0===q.p.inlineData&&(q.p.inlineData={}),r=a.extend({},r,q.p.inlineData,j.extraparam)}if("clientArray"===j.url){r=a.extend({},r,s),q.p.autoencode&&a.each(r,function(b,c){r[b]=a.jgrid.htmlDecode(c)});var F,G=a(q).jqGrid("setRowData",b,r);for(a(o).attr("editable","0"),F=0;F<q.p.savedRow.length;F++)if(String(q.p.savedRow[F].id)===String(B)){m=F;break}m>=0&&q.p.savedRow.splice(m,1),a(q).triggerHandler("jqGridInlineAfterSaveRow",[b,G,r,j]),a.isFunction(j.aftersavefunc)&&j.aftersavefunc.call(q,b,G,r,j),p=!0,a(o).removeClass("jqgrid-new-row").unbind("keydown")}else a(q).jqGrid("progressBar",{method:"show",loadtype:j.saveui,htmlcontent:j.savetext}),t=a.extend({},r,t),t[z]=a.jgrid.stripPref(q.p.idPrefix,t[z]),a.ajax(a.extend({url:j.url,data:a.isFunction(q.p.serializeRowData)?q.p.serializeRowData.call(q,t):t,type:j.mtype,async:!1,complete:function(c,d){if(a(q).jqGrid("progressBar",{method:"hide",loadtype:j.saveui,htmlcontent:j.savetext}),"success"===d){var e,f,g=!0;if(e=a(q).triggerHandler("jqGridInlineSuccessSaveRow",[c,b,j]),a.isArray(e)||(e=[!0,r]),e[0]&&a.isFunction(j.successfunc)&&(e=j.successfunc.call(q,c)),a.isArray(e)?(g=e[0],r=e[1]||r):g=e,g===!0){for(q.p.autoencode&&a.each(r,function(b,c){r[b]=a.jgrid.htmlDecode(c)}),r=a.extend({},r,s),a(q).jqGrid("setRowData",b,r),a(o).attr("editable","0"),f=0;f<q.p.savedRow.length;f++)if(String(q.p.savedRow[f].id)===String(b)){m=f;break}m>=0&&q.p.savedRow.splice(m,1),a(q).triggerHandler("jqGridInlineAfterSaveRow",[b,c,r,j]),a.isFunction(j.aftersavefunc)&&j.aftersavefunc.call(q,b,c,r,j),p=!0,a(o).removeClass("jqgrid-new-row").unbind("keydown")}else a(q).triggerHandler("jqGridInlineErrorSaveRow",[b,c,d,null,j]),a.isFunction(j.errorfunc)&&j.errorfunc.call(q,b,c,d,null),j.restoreAfterError===!0&&a(q).jqGrid("restoreRow",b,j.afterrestorefunc)
}},error:function(c,d,e){if(a("#lui_"+a.jgrid.jqID(q.p.id)).hide(),a(q).triggerHandler("jqGridInlineErrorSaveRow",[b,c,d,e,j]),a.isFunction(j.errorfunc))j.errorfunc.call(q,b,c,d,e);else{var f=c.responseText||c.statusText;try{a.jgrid.info_dialog(a.jgrid.errors.errcap,'<div class="ui-state-error">'+f+"</div>",a.jgrid.edit.bClose,{buttonalign:"right"})}catch(g){alert(f)}}j.restoreAfterError===!0&&a(q).jqGrid("restoreRow",b,j.afterrestorefunc)}},a.jgrid.ajaxOptions,q.p.ajaxRowOptions||{}))}return p}},restoreRow:function(b,c){var d=a.makeArray(arguments).slice(1),e={};return"object"===a.type(d[0])?e=d[0]:a.isFunction(c)&&(e.afterrestorefunc=c),e=a.extend(!0,{},a.jgrid.inlineEdit,e),this.each(function(){var c,d,f=this,g=-1,h={};if(f.grid&&(c=a(f).jqGrid("getInd",b,!0),c!==!1)){var i=a.isFunction(e.beforeCancelRow)?e.beforeCancelRow.call(f,e,b):void 0;if(void 0===i&&(i=!0),i){for(d=0;d<f.p.savedRow.length;d++)if(String(f.p.savedRow[d].id)===String(b)){g=d;break}if(g>=0){if(a.isFunction(a.fn.datepicker))try{a("input.hasDatepicker","#"+a.jgrid.jqID(c.id)).datepicker("hide")}catch(j){}a.each(f.p.colModel,function(){this.editable===!0&&f.p.savedRow[g].hasOwnProperty(this.name)&&(h[this.name]=f.p.savedRow[g][this.name])}),a(f).jqGrid("setRowData",b,h),a(c).attr("editable","0").unbind("keydown"),f.p.savedRow.splice(g,1),a("#"+a.jgrid.jqID(b),"#"+a.jgrid.jqID(f.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){a(f).jqGrid("delRowData",b),a(f).jqGrid("showAddEditButtons")},0)}a(f).triggerHandler("jqGridInlineAfterRestoreRow",[b]),a.isFunction(e.afterrestorefunc)&&e.afterrestorefunc.call(f,b)}}})},addRow:function(b){return b=a.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},b||{}),this.each(function(){if(this.grid){var c=this,d=a.isFunction(b.beforeAddRow)?b.beforeAddRow.call(c,b.addRowParams):void 0;if(void 0===d&&(d=!0),d)if(b.rowID=a.isFunction(b.rowID)?b.rowID.call(c,b):null!=b.rowID?b.rowID:a.jgrid.randId(),b.useDefValues===!0&&a(c.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var d=this.editoptions.defaultValue,e=a.isFunction(d)?d.call(c):d;b.initdata[this.name]=e}}),a(c).jqGrid("addRowData",b.rowID,b.initdata,b.position),b.rowID=c.p.idPrefix+b.rowID,a("#"+a.jgrid.jqID(b.rowID),"#"+a.jgrid.jqID(c.p.id)).addClass("jqgrid-new-row"),b.useFormatter)a("#"+a.jgrid.jqID(b.rowID)+" .ui-inline-edit","#"+a.jgrid.jqID(c.p.id)).click();else{var e=c.p.prmNames,f=e.oper;b.addRowParams.extraparam[f]=e.addoper,a(c).jqGrid("editRow",b.rowID,b.addRowParams),a(c).jqGrid("setSelection",b.rowID)}}})},inlineNav:function(b,c){return c=a.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},a.jgrid.nav,c||{}),this.each(function(){if(this.grid){var d,e=this,f=a.jgrid.jqID(e.p.id);if(e.p._inlinenav=!0,c.addParams.useFormatter===!0){var g,h=e.p.colModel;for(g=0;g<h.length;g++)if(h[g].formatter&&"actions"===h[g].formatter){if(h[g].formatoptions){var i={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},j=a.extend(i,h[g].formatoptions);c.addParams.addRowParams={keys:j.keys,oneditfunc:j.onEdit,successfunc:j.onSuccess,url:j.url,extraparam:j.extraparam,aftersavefunc:j.afterSave,errorfunc:j.onError,afterrestorefunc:j.afterRestore}}break}}c.add&&a(e).jqGrid("navButtonAdd",b,{caption:c.addtext,title:c.addtitle,buttonicon:c.addicon,id:e.p.id+"_iladd",onClickButton:function(){a(e).jqGrid("addRow",c.addParams),c.addParams.useFormatter||(a("#"+f+"_ilsave").removeClass("ui-state-disabled"),a("#"+f+"_ilcancel").removeClass("ui-state-disabled"),a("#"+f+"_iladd").addClass("ui-state-disabled"),a("#"+f+"_iledit").addClass("ui-state-disabled"))}}),c.edit&&a(e).jqGrid("navButtonAdd",b,{caption:c.edittext,title:c.edittitle,buttonicon:c.editicon,id:e.p.id+"_iledit",onClickButton:function(){var b=a(e).jqGrid("getGridParam","selrow");b?(a(e).jqGrid("editRow",b,c.editParams),a("#"+f+"_ilsave").removeClass("ui-state-disabled"),a("#"+f+"_ilcancel").removeClass("ui-state-disabled"),a("#"+f+"_iladd").addClass("ui-state-disabled"),a("#"+f+"_iledit").addClass("ui-state-disabled")):(a.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),a("#jqg_alrt").focus())}}),c.save&&(a(e).jqGrid("navButtonAdd",b,{caption:c.savetext||"",title:c.savetitle||"Save row",buttonicon:c.saveicon,id:e.p.id+"_ilsave",onClickButton:function(){var b=e.p.savedRow[0].id;if(b){var d=e.p.prmNames,g=d.oper,h=c.editParams;a("#"+a.jgrid.jqID(b),"#"+f).hasClass("jqgrid-new-row")?(c.addParams.addRowParams.extraparam[g]=d.addoper,h=c.addParams.addRowParams):(c.editParams.extraparam||(c.editParams.extraparam={}),c.editParams.extraparam[g]=d.editoper),a(e).jqGrid("saveRow",b,h)&&a(e).jqGrid("showAddEditButtons")}else a.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),a("#jqg_alrt").focus()}}),a("#"+f+"_ilsave").addClass("ui-state-disabled")),c.cancel&&(a(e).jqGrid("navButtonAdd",b,{caption:c.canceltext||"",title:c.canceltitle||"Cancel row editing",buttonicon:c.cancelicon,id:e.p.id+"_ilcancel",onClickButton:function(){var b=e.p.savedRow[0].id,d=c.editParams;b?(a("#"+a.jgrid.jqID(b),"#"+f).hasClass("jqgrid-new-row")&&(d=c.addParams.addRowParams),a(e).jqGrid("restoreRow",b,d),a(e).jqGrid("showAddEditButtons")):(a.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+f,jqm:!0}),a("#jqg_alrt").focus())}}),a("#"+f+"_ilcancel").addClass("ui-state-disabled")),c.restoreAfterSelect===!0&&(d=a.isFunction(e.p.beforeSelectRow)?e.p.beforeSelectRow:!1,e.p.beforeSelectRow=function(b,f){var g=!0;return e.p.savedRow.length>0&&e.p._inlinenav===!0&&b!==e.p.selrow&&null!==e.p.selrow&&(e.p.selrow===c.addParams.rowID?a(e).jqGrid("delRowData",e.p.selrow):a(e).jqGrid("restoreRow",e.p.selrow,c.editParams),a(e).jqGrid("showAddEditButtons")),d&&(g=d.call(e,b,f)),g})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var b=a.jgrid.jqID(this.p.id);a("#"+b+"_ilsave").addClass("ui-state-disabled"),a("#"+b+"_ilcancel").addClass("ui-state-disabled"),a("#"+b+"_iladd").removeClass("ui-state-disabled"),a("#"+b+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function($){"use strict";if($.jgrid.msie&&8===$.jgrid.msiever()&&($.expr[":"].hidden=function(a){return 0===a.offsetWidth||0===a.offsetHeight||"none"===a.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(a,b){var c=setSelected.call(this,a,b);if(b&&this.selectedList){var d=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(d)})}return c}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(a){return this.each(function(){function b(){c.p.disableClick=!0}var c=this,d=$.jgrid.jqID(c.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+d+"_cb,#jqgh_"+d+"_rn,#jqgh_"+d+"_subgrid),:hidden)",placeholder:{element:function(a){var b=$(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return b},update:function(a,b){b.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),b.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}},update:function(a,b){var d=$(b.item).parent(),e=$(">th",d),f=c.p.colModel,g={},h=c.p.id+"_";$.each(f,function(a){g[this.name]=a});var i=[];e.each(function(){var a=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(h,"");g.hasOwnProperty(a)&&i.push(g[a])}),$(c).jqGrid("remapColumns",i,!0,!0),$.isFunction(c.p.sortable.update)&&c.p.sortable.update(i),setTimeout(function(){c.p.disableClick=!1},50)}};if(c.p.sortable.options?$.extend(e,c.p.sortable.options):$.isFunction(c.p.sortable)&&(c.p.sortable={update:c.p.sortable}),e.start){var f=e.start;e.start=function(a,c){b(),f.call(this,a,c)}}else e.start=b;c.p.sortable.exclude&&(e.items+=":not("+c.p.sortable.exclude+")");var g=a.sortable(e),h=g.data("sortable")||g.data("uiSortable");null!=h&&(h.data("sortable").floating=!0)})},columnChooser:function(a){function b(a,b,c){var d,e;return b>=0?(d=a.slice(),e=d.splice(b,Math.max(a.length-b,b)),b>a.length&&(b=a.length),d[b]=c,d.concat(e)):a}function c(a,b){a&&("string"==typeof a?$.fn[a]&&$.fn[a].apply(b,$.makeArray(arguments).slice(2)):$.isFunction(a)&&a.apply(b,$.makeArray(arguments).slice(2)))}var d,e,f,g,h,i,j,k=this,l={},m=[],n=k.jqGrid("getGridParam","colModel"),o=k.jqGrid("getGridParam","colNames"),p=function(a){return $.ui.multiselect.prototype&&a.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||a.data("ui-multiselect")||a.data("multiselect")};if(!$("#colchooser_"+$.jgrid.jqID(k[0].p.id)).length){if(d=$('<div id="colchooser_'+k[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),e=$("select",d),a=$.extend({width:400,height:240,classname:null,done:function(a){a&&k.jqGrid("remapColumns",a,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(a){var b={};return b[a.bSubmit]=function(){a.apply_perm(),a.cleanup(!1)},b[a.bCancel]=function(){a.cleanup(!0)},$.extend(!0,{buttons:b,close:function(){a.cleanup(!0)},modal:a.modal||!1,resizable:a.resizable||!0,width:a.width+70,resize:function(){var a=p(e),b=a.container.closest(".ui-dialog-content");b.length>0&&"object"==typeof b[0].style?b[0].style.width="":b.css("width",""),a.selectedList.height(Math.max(a.selectedContainer.height()-a.selectedActions.outerHeight()-1,1)),a.availableList.height(Math.max(a.availableContainer.height()-a.availableActions.outerHeight()-1,1))}},a.dialog_opts||{})},apply_perm:function(){var c=[];$("option",e).each(function(){$(this).is("[selected]")?k.jqGrid("showCol",n[this.value].name):k.jqGrid("hideCol",n[this.value].name)}),$("option[selected]",e).each(function(){c.push(parseInt(this.value,10))}),$.each(c,function(){delete l[n[parseInt(this,10)].name]}),$.each(l,function(){var a=parseInt(this,10);c=b(c,a,a)}),a.done&&a.done.call(k,c),k.jqGrid("setGridWidth",k[0].p.tblwidth,k[0].p.shrinkToFit)},cleanup:function(b){c(a.dlog,d,"destroy"),c(a.msel,e,"destroy"),d.remove(),b&&a.done&&a.done.call(k)},msel_opts:{}},$.jgrid.col,a||{}),$.ui&&$.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");a.msel_opts=$.extend($.ui.multiselect.defaults,a.msel_opts)}a.caption&&d.attr("title",a.caption),a.classname&&(d.addClass(a.classname),e.addClass(a.classname)),a.width&&($(">div",d).css({width:a.width,margin:"0 auto"}),e.css("width",a.width)),a.height&&($(">div",d).css("height",a.height),e.css("height",a.height-10)),e.empty(),$.each(n,function(a){return l[this.name]=a,this.hidedlg?void(this.hidden||m.push(a)):void e.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(o[a])+"</option>")}),f=$.isFunction(a.dlog_opts)?a.dlog_opts.call(k,a):a.dlog_opts,c(a.dlog,d,f),g=$.isFunction(a.msel_opts)?a.msel_opts.call(k,a):a.msel_opts,c(a.msel,e,g),h=$("#colchooser_"+$.jgrid.jqID(k[0].p.id)),h.css({margin:"auto"}),h.find(">div").css({width:"100%",height:"100%",margin:"auto"}),i=p(e),i.container.css({width:"100%",height:"100%",margin:"auto"}),i.selectedContainer.css({width:100*i.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),i.availableContainer.css({width:100-100*i.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),i.selectedList.css("height","auto"),i.availableList.css("height","auto"),j=Math.max(i.selectedList.height(),i.availableList.height()),j=Math.min(j,$(window).height()),i.selectedList.css("height",j),i.availableList.css("height",j)}},sortableRows:function(a){return this.each(function(){var b=this;b.grid&&(b.p.treeGrid||$.fn.sortable&&(a=$.extend({cursor:"move",axis:"y",items:">.jqgrow"},a||{}),a.start&&$.isFunction(a.start)?(a._start_=a.start,delete a.start):a._start_=!1,a.update&&$.isFunction(a.update)?(a._update_=a.update,delete a.update):a._update_=!1,a.start=function(c,d){if($(d.item).css("border-width","0"),$("td",d.item).each(function(a){this.style.width=b.grid.cols[a].style.width}),b.p.subGrid){var e=$(d.item).attr("id");try{$(b).jqGrid("collapseSubGridRow",e)}catch(f){}}a._start_&&a._start_.apply(this,[c,d])},a.update=function(c,d){$(d.item).css("border-width",""),b.p.rownumbers===!0&&$("td.jqgrid-rownum",b.rows).each(function(a){$(this).html(a+1+(parseInt(b.p.page,10)-1)*parseInt(b.p.rowNum,10))}),a._update_&&a._update_.apply(this,[c,d])},$("tbody:first",b).sortable(a),$.isFunction($.fn.disableSelection)&&$("tbody:first>.jqgrow",b).disableSelection()))})},gridDnD:function(a){return this.each(function(){function b(){var a=$.data(e,"dnd");$("tr.jqgrow:not(.ui-draggable)",e).draggable($.isFunction(a.drag)?a.drag.call($(e),a):a.drag)}var c,d,e=this;if(e.grid&&!e.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var f="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(f),"string"==typeof a&&"updateDnD"===a&&e.p.jqgdnd===!0)return void b();if(a=$.extend({drag:function(a){return $.extend({start:function(b,c){var d,f;if(e.p.subGrid){f=$(c.helper).attr("id");try{$(e).jqGrid("collapseSubGridRow",f)}catch(g){}}for(d=0;d<$.data(e,"dnd").connectWith.length;d++)0===$($.data(e,"dnd").connectWith[d]).jqGrid("getGridParam","reccount")&&$($.data(e,"dnd").connectWith[d]).jqGrid("addRowData","jqg_empty_row",{});c.helper.addClass("ui-state-highlight"),$("td",c.helper).each(function(a){this.style.width=e.grid.headers[a].width+"px"}),a.onstart&&$.isFunction(a.onstart)&&a.onstart.call($(e),b,c)},stop:function(b,c){var d,f;for(c.helper.dropped&&!a.dragcopy&&(f=$(c.helper).attr("id"),void 0===f&&(f=$(this).attr("id")),$(e).jqGrid("delRowData",f)),d=0;d<$.data(e,"dnd").connectWith.length;d++)$($.data(e,"dnd").connectWith[d]).jqGrid("delRowData","jqg_empty_row");a.onstop&&$.isFunction(a.onstop)&&a.onstop.call($(e),b,c)}},a.drag_opts||{})},drop:function(a){return $.extend({accept:function(a){if(!$(a).hasClass("jqgrow"))return a;var b=$(a).closest("table.ui-jqgrid-btable");if(b.length>0&&void 0!==$.data(b[0],"dnd")){var c=$.data(b[0],"dnd").connectWith;return-1!==$.inArray("#"+$.jgrid.jqID(this.id),c)?!0:!1}return!1},drop:function(b,c){if($(c.draggable).hasClass("jqgrow")){var d=$(c.draggable).attr("id"),f=c.draggable.parent().parent().jqGrid("getRowData",d);if(!a.dropbyname){var g,h,i=0,j={},k=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(h in f)f.hasOwnProperty(h)&&(g=k[i].name,"cb"!==g&&"rn"!==g&&"subgrid"!==g&&f.hasOwnProperty(h)&&k[i]&&(j[g]=f[h]),i++);f=j}catch(l){}}if(c.helper.dropped=!0,a.beforedrop&&$.isFunction(a.beforedrop)){var m=a.beforedrop.call(this,b,c,f,$("#"+$.jgrid.jqID(e.p.id)),$(this));void 0!==m&&null!==m&&"object"==typeof m&&(f=m)}if(c.helper.dropped){var n;a.autoid&&($.isFunction(a.autoid)?n=a.autoid.call(this,f):(n=Math.ceil(1e3*Math.random()),n=a.autoidprefix+n)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",n,f,a.droppos)}a.ondrop&&$.isFunction(a.ondrop)&&a.ondrop.call(this,b,c,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},a||{}),a.connectWith)for(a.connectWith=a.connectWith.split(","),a.connectWith=$.map(a.connectWith,function(a){return $.trim(a)}),$.data(e,"dnd",a),0===e.p.reccount||e.p.jqgdnd||b(),e.p.jqgdnd=!0,c=0;c<a.connectWith.length;c++)d=a.connectWith[c],$(d).droppable($.isFunction(a.drop)?a.drop.call($(e),a):a.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id);if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(a,b){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",b.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,a,b)},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}})}(jQuery),function(a){"use strict";function b(a,b){var c,d,e,f=[];if(!this||"function"!=typeof a||a instanceof RegExp)throw new TypeError;for(e=this.length,c=0;e>c;c++)if(this.hasOwnProperty(c)&&(d=this[c],a.call(b,d,c,this))){f.push(d);break}return f}a.assocArraySize=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},a.jgrid.extend({pivotSetup:function(c,d){var e=[],f=[],g=[],h=[],i=[],j={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},k=[],l=a.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},d||{});return this.each(function(){function d(a,c,d){var e;return e=b.call(a,c,d),e.length>0?e[0]:null}function m(a,b){var c,d=0,e=!0;for(c in a)if(a.hasOwnProperty(c)){if(a[c]!=this[d]){e=!1;break}if(d++,d>=this.length)break}return e&&(r=b),e}function n(a,b,c,d){var e;switch(a){case"sum":e=parseFloat(b||0)+parseFloat(d[c]||0);break;case"count":(""===b||null==b)&&(b=0),e=d.hasOwnProperty(c)?b+1:0;break;case"min":e=""===b||null==b?parseFloat(d[c]||0):Math.min(parseFloat(b),parseFloat(d[c]||0));break;case"max":e=""===b||null==b?parseFloat(d[c]||0):Math.max(parseFloat(b),parseFloat(d[c]||0))}return e}function o(b,c,d,e){var f,g,j,k,l=c.length,m="",o=[];for(a.isArray(d)?(k=d.length,o=d):(k=1,o[0]=d),h=[],i=[],h.root=0,j=0;k>j;j++){var p,q=[];for(f=0;l>f;f++){if(null==d)g=a.trim(c[f].member)+"_"+c[f].aggregator,p=g,o[0]=p;else{p=d[j].replace(/\s+/g,"");try{g=1===l?m+p:m+p+"_"+c[f].aggregator+"_"+String(f)}catch(r){}}g=isNaN(parseInt(g,10))?g:g+" ",e[g]=q[g]=n(c[f].aggregator,e[g],c[f].member,b),1>=j&&"_r_Totals"!==p&&""===m&&(m=p)}h[g]=q,i[g]=o[j]}return e}function p(a){var b,c,d,f,g;for(d in a)if(a.hasOwnProperty(d)){if("object"!=typeof a[d]){if("level"===d){if(void 0===L[a.level]&&(L[a.level]="",a.level>0&&"_r_Totals"!==a.text&&(k[a.level-1]={useColSpanStyle:!1,groupHeaders:[]})),L[a.level]!==a.text&&a.children.length&&"_r_Totals"!==a.text&&a.level>0){k[a.level-1].groupHeaders.push({titleText:a.label,numberOfColumns:0});var h=k[a.level-1].groupHeaders.length-1,i=0===h?N:M+v;if(a.level-1===(l.rowTotals?1:0)&&h>0){var j=k[a.level-1].groupHeaders[h-1].numberOfColumns;j&&(i=j+1+l.aggregates.length)}k[a.level-1].groupHeaders[h].startColumnName=e[i].name,k[a.level-1].groupHeaders[h].numberOfColumns=e.length-i,M=e.length}L[a.level]=a.text}if(a.level===u&&"level"===d&&u>0)if(v>1){var m=1;for(b in a.fields)a.fields.hasOwnProperty(b)&&(1===m&&k[u-1].groupHeaders.push({startColumnName:b,numberOfColumns:1,titleText:a.text}),m++);k[u-1].groupHeaders[k[u-1].groupHeaders.length-1].numberOfColumns=m-1}else k.splice(u-1,1)}if(null!=a[d]&&"object"==typeof a[d]&&p(a[d]),"level"===d&&a.level>0){c=0;for(b in a.fields)if(a.fields.hasOwnProperty(b)){g={};for(f in l.aggregates[c])if(l.aggregates[c].hasOwnProperty(f))switch(f){case"member":case"label":case"aggregator":break;default:g[f]=l.aggregates[c][f]}v>1?(g.name=b,g.label=l.aggregates[c].label||a.label):(g.name=a.text,g.label="_r_Totals"===a.text?l.rowTotalsText:a.label),e.push(g),c++}}}}var q,r,s,t,u,v,w,x,y=c.length,z=0;if(l.rowTotals&&l.yDimension.length>0){var A=l.yDimension[0].dataName;l.yDimension.splice(0,0,{dataName:A}),l.yDimension[0].converter=function(){return"_r_Totals"}}if(t=a.isArray(l.xDimension)?l.xDimension.length:0,u=l.yDimension.length,v=a.isArray(l.aggregates)?l.aggregates.length:0,0===t||0===v)throw"xDimension or aggregates optiona are not set!";var B;for(s=0;t>s;s++)B={name:l.xDimension[s].dataName,frozen:l.frozenStaticCols},null==l.xDimension[s].isGroupField&&(l.xDimension[s].isGroupField=!0),B=a.extend(!0,B,l.xDimension[s]),e.push(B);for(var C=t-1,D={};y>z;){q=c[z];var E=[],F=[];w={},s=0;do E[s]=a.trim(q[l.xDimension[s].dataName]),w[l.xDimension[s].dataName]=E[s],s++;while(t>s);var G=0;if(r=-1,x=d(f,m,E)){if(r>=0){if(G=0,u>=1){for(G=0;u>G;G++)F[G]=a.trim(q[l.yDimension[G].dataName]),l.yDimension[G].converter&&a.isFunction(l.yDimension[G].converter)&&(F[G]=l.yDimension[G].converter.call(this,F[G],E,F));x=o(q,l.aggregates,F,x)}else 0===u&&(x=o(q,l.aggregates,null,x));f[r]=x}}else{if(G=0,u>=1){for(G=0;u>G;G++)F[G]=a.trim(q[l.yDimension[G].dataName]),l.yDimension[G].converter&&a.isFunction(l.yDimension[G].converter)&&(F[G]=l.yDimension[G].converter.call(this,F[G],E,F));w=o(q,l.aggregates,F,w)}else 0===u&&(w=o(q,l.aggregates,null,w));f.push(w)}var H,I=0,J=null,K=null;for(H in h)if(h.hasOwnProperty(H)){if(0===I)D.children&&void 0!==D.children||(D={text:H,level:0,children:[],label:H}),J=D.children;else{for(K=null,s=0;s<J.length;s++)if(J[s].text===H){K=J[s];break}K?J=K.children:(J.push({children:[],text:H,level:I,fields:h[H],label:i[H]}),J=J[J.length-1].children)}I++}z++}var L=[],M=e.length,N=M;u>0&&(k[u-1]={useColSpanStyle:!1,groupHeaders:[]}),p(D);var O;if(l.colTotals)for(var P=f.length;P--;)for(s=t;s<e.length;s++)O=e[s].name,g[O]?g[O]+=parseFloat(f[P][O]||0):g[O]=parseFloat(f[P][O]||0);if(C>0)for(s=0;C>s;s++)e[s].isGroupField&&(j.groupingView.groupField.push(e[s].name),j.groupingView.groupSummary.push(l.groupSummary),j.groupingView.groupSummaryPos.push(l.groupSummaryPos));else j.grouping=!1;j.sortname=e[C].name,j.groupingView.hideFirstGroupCol=!0}),{colModel:e,rows:f,groupOptions:j,groupHeaders:k,summary:g}},jqPivot:function(b,c,d,e){return this.each(function(){function f(b){var e,f=jQuery(g).jqGrid("pivotSetup",b,c),h=a.assocArraySize(f.summary)>0?!0:!1,i=a.jgrid.from(f.rows);for(e=0;e<f.groupOptions.groupingView.groupField.length;e++)i.orderBy(f.groupOptions.groupingView.groupField[e],"a","text","");jQuery(g).jqGrid(a.extend(!0,{datastr:a.extend(i.select(),h?{userdata:f.summary}:{}),datatype:"jsonstring",footerrow:h,userDataOnFooter:h,colModel:f.colModel,viewrecords:!0,sortname:c.xDimension[0].dataName},f.groupOptions,d||{}));var j=f.groupHeaders;if(j.length)for(e=0;e<j.length;e++)j[e]&&j[e].groupHeaders.length&&jQuery(g).jqGrid("setGroupHeaders",j[e]);c.frozenStaticCols&&jQuery(g).jqGrid("setFrozenColumns")}var g=this;"string"==typeof b?a.ajax(a.extend({url:b,dataType:"json",success:function(b){f(a.jgrid.getAccessor(b,e&&e.reader?e.reader:"rows"))}},e||{})):f(b)})}})}(jQuery),function(a){"use strict";a.jgrid.extend({setSubGrid:function(){return this.each(function(){var b,c,d=this,e={plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(d.p.subGridOptions=a.extend(e,d.p.subGridOptions||{}),d.p.colNames.unshift(""),d.p.colModel.unshift({name:"subgrid",width:a.jgrid.cell_width?d.p.subGridWidth+d.p.cellLayout:d.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),b=d.p.subGridModel,b[0])for(b[0].align=a.extend([],b[0].align||[]),c=0;c<b[0].name.length;c++)b[0].align[c]=b[0].align[c]||"left"})},addSubGridCell:function(a,b){var c,d,e="";return this.each(function(){e=this.formatCol(a,b),d=this.p.id,c=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+d+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+e+"><a style='cursor:pointer;'><span class='ui-icon "+c+"'></span></a></td>"},addSubGrid:function(b,c){return this.each(function(){var d=this;if(d.grid){var e,f,g,h,i,j=function(b,c,e){var f=a("<td align='"+d.p.subGridModel[0].align[e]+"'></td>").html(c);a(b).append(f)},k=function(b,c){var e,f,g,h=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),i=a("<tr></tr>");for(f=0;f<d.p.subGridModel[0].name.length;f++)e=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>"),a(e).html(d.p.subGridModel[0].name[f]),a(e).width(d.p.subGridModel[0].width[f]),a(i).append(e);a(h).append(i),b&&(g=d.p.xmlReader.subgrid,a(g.root+" "+g.row,b).each(function(){if(i=a("<tr class='ui-widget-content ui-subtblcell'></tr>"),g.repeatitems===!0)a(g.cell,this).each(function(b){j(i,a(this).text()||"&#160;",b)});else{var b=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(b)for(f=0;f<b.length;f++)j(i,a(b[f],this).text()||"&#160;",f)}a(h).append(i)}));var k=a("table:first",d.grid.bDiv).attr("id")+"_";return a("#"+a.jgrid.jqID(k+c)).append(h),d.grid.hDiv.loading=!1,a("#load_"+a.jgrid.jqID(d.p.id)).hide(),!1},l=function(b,c){var e,f,g,h,i,k,l=a("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),m=a("<tr></tr>");for(g=0;g<d.p.subGridModel[0].name.length;g++)e=a("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+d.p.direction+"'></th>"),a(e).html(d.p.subGridModel[0].name[g]),a(e).width(d.p.subGridModel[0].width[g]),a(m).append(e);if(a(l).append(m),b&&(i=d.p.jsonReader.subgrid,f=a.jgrid.getAccessor(b,i.root),void 0!==f))for(g=0;g<f.length;g++){if(h=f[g],m=a("<tr class='ui-widget-content ui-subtblcell'></tr>"),i.repeatitems===!0)for(i.cell&&(h=h[i.cell]),k=0;k<h.length;k++)j(m,h[k]||"&#160;",k);else{var n=d.p.subGridModel[0].mapping||d.p.subGridModel[0].name;if(n.length)for(k=0;k<n.length;k++)j(m,h[n[k]]||"&#160;",k)}a(l).append(m)}var o=a("table:first",d.grid.bDiv).attr("id")+"_";return a("#"+a.jgrid.jqID(o+c)).append(l),d.grid.hDiv.loading=!1,a("#load_"+a.jgrid.jqID(d.p.id)).hide(),!1},m=function(b){var c,e,f,g;if(c=a(b).attr("id"),e={nd_:(new Date).getTime()},e[d.p.prmNames.subgridid]=c,!d.p.subGridModel[0])return!1;if(d.p.subGridModel[0].params)for(g=0;g<d.p.subGridModel[0].params.length;g++)for(f=0;f<d.p.colModel.length;f++)d.p.colModel[f].name===d.p.subGridModel[0].params[g]&&(e[d.p.colModel[f].name]=a("td:eq("+f+")",b).text().replace(/\&#160\;/gi,""));if(!d.grid.hDiv.loading)switch(d.grid.hDiv.loading=!0,a("#load_"+a.jgrid.jqID(d.p.id)).show(),d.p.subgridtype||(d.p.subgridtype=d.p.datatype),a.isFunction(d.p.subgridtype)?d.p.subgridtype.call(d,e):d.p.subgridtype=d.p.subgridtype.toLowerCase(),d.p.subgridtype){case"xml":case"json":a.ajax(a.extend({type:d.p.mtype,url:a.isFunction(d.p.subGridUrl)?d.p.subGridUrl.call(d,e):d.p.subGridUrl,dataType:d.p.subgridtype,data:a.isFunction(d.p.serializeSubGridData)?d.p.serializeSubGridData.call(d,e):e,complete:function(b){"xml"===d.p.subgridtype?k(b.responseXML,c):l(a.jgrid.parse(b.responseText),c),b=null}},a.jgrid.ajaxOptions,d.p.ajaxSubgridOptions||{}))}return!1},n=1;a.each(d.p.colModel,function(){(this.hidden===!0||"rn"===this.name||"cb"===this.name)&&n++});var o=d.rows.length,p=1;for(void 0!==c&&c>0&&(p=c,o=c+1);o>p;)a(d.rows[p]).hasClass("jqgrow")&&(d.p.scroll&&a(d.rows[p].cells[b]).unbind("click"),a(d.rows[p].cells[b]).bind("click",function(){var c=a(this).parent("tr")[0];if(f=d.p.id,e=c.id,i=a("#"+f+"_"+e+"_expandedContent"),a(this).hasClass("sgcollapsed")){if(d.p.subGridOptions.reloadOnExpand===!0||d.p.subGridOptions.reloadOnExpand===!1&&!i.hasClass("ui-subgrid")){if(g=b>=1?"<td colspan='"+b+"'>&#160;</td>":"",h=a(d).triggerHandler("jqGridSubGridBeforeExpand",[f+"_"+e,e]),h=h===!1||"stop"===h?!1:!0,h&&a.isFunction(d.p.subGridBeforeExpand)&&(h=d.p.subGridBeforeExpand.call(d,f+"_"+e,e)),h===!1)return!1;a(c).after("<tr role='row' id='"+f+"_"+e+"_expandedContent' class='ui-subgrid'>"+g+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+d.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(d.p.colNames.length-n,10)+"' class='ui-widget-content subgrid-data'><div id="+f+"_"+e+" class='tablediv'></div></td></tr>"),a(d).triggerHandler("jqGridSubGridRowExpanded",[f+"_"+e,e]),a.isFunction(d.p.subGridRowExpanded)?d.p.subGridRowExpanded.call(d,f+"_"+e,e):m(c)}else i.show();a(this).html("<a style='cursor:pointer;'><span class='ui-icon "+d.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),d.p.subGridOptions.selectOnExpand&&a(d).jqGrid("setSelection",e)}else if(a(this).hasClass("sgexpanded")){if(h=a(d).triggerHandler("jqGridSubGridRowColapsed",[f+"_"+e,e]),h=h===!1||"stop"===h?!1:!0,h&&a.isFunction(d.p.subGridRowColapsed)&&(h=d.p.subGridRowColapsed.call(d,f+"_"+e,e)),h===!1)return!1;d.p.subGridOptions.reloadOnExpand===!0?i.remove(".ui-subgrid"):i.hasClass("ui-subgrid")&&i.hide(),a(this).html("<a style='cursor:pointer;'><span class='ui-icon "+d.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed"),d.p.subGridOptions.selectOnCollapse&&a(d).jqGrid("setSelection",e)}return!1})),p++;d.p.subGridOptions.expandOnLoad===!0&&a(d.rows).filter(".jqgrow").each(function(b,c){a(c.cells[0]).click()}),d.subGridXml=function(a,b){k(a,b)},d.subGridJson=function(a,b){l(a,b)}}})},expandSubGridRow:function(b){return this.each(function(){var c=this;if((c.grid||b)&&c.p.subGrid===!0){var d=a(this).jqGrid("getInd",b,!0);if(d){var e=a("td.sgcollapsed",d)[0];e&&a(e).trigger("click")}}})},collapseSubGridRow:function(b){return this.each(function(){var c=this;if((c.grid||b)&&c.p.subGrid===!0){var d=a(this).jqGrid("getInd",b,!0);if(d){var e=a("td.sgexpanded",d)[0];e&&a(e).trigger("click")}}})},toggleSubGridRow:function(b){return this.each(function(){var c=this;if((c.grid||b)&&c.p.subGrid===!0){var d=a(this).jqGrid("getInd",b,!0);if(d){var e=a("td.sgcollapsed",d)[0];e?a(e).trigger("click"):(e=a("td.sgexpanded",d)[0],e&&a(e).trigger("click"))}}})}})}(jQuery),function(a){"use strict";a.jgrid.extend({setTreeNode:function(b,c){return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)for(var e,f,g,h,i,j,k,l,m=d.p.expColInd,n=d.p.treeReader.expanded_field,o=d.p.treeReader.leaf_field,p=d.p.treeReader.level_field,q=d.p.treeReader.icon_field,r=d.p.treeReader.loaded;c>b;){var s,t=a.jgrid.stripPref(d.p.idPrefix,d.rows[b].id),u=d.p._index[t];if(k=d.p.data[u],"nested"===d.p.treeGridModel&&(k[o]||(e=parseInt(k[d.p.treeReader.left_field],10),f=parseInt(k[d.p.treeReader.right_field],10),k[o]=f===e+1?"true":"false",d.rows[b].cells[d.p._treeleafpos].innerHTML=k[o])),g=parseInt(k[p],10),0===d.p.tree_root_level?(h=g+1,i=g):(h=g,i=g-1),j="<div class='tree-wrap tree-wrap-"+d.p.direction+"' style='width:"+18*h+"px;'>",j+="<div style='"+("rtl"===d.p.direction?"right:":"left:")+18*i+"px;' class='ui-icon ",void 0!==k[r]&&(k[r]="true"===k[r]||k[r]===!0?!0:!1),"true"===k[o]||k[o]===!0?(j+=(void 0!==k[q]&&""!==k[q]?k[q]:d.p.treeIcons.leaf)+" tree-leaf treeclick",k[o]=!0,l="leaf"):(k[o]=!1,l=""),k[n]=("true"===k[n]||k[n]===!0?!0:!1)&&(k[r]||void 0===k[r]),j+=k[n]===!1?k[o]===!0?"'":d.p.treeIcons.plus+" tree-plus treeclick'":k[o]===!0?"'":d.p.treeIcons.minus+" tree-minus treeclick'",j+="></div></div>",a(d.rows[b].cells[m]).wrapInner("<span class='cell-wrapper"+l+"'></span>").prepend(j),g!==parseInt(d.p.tree_root_level,10)){var v=a(d).jqGrid("getNodeParent",k);s=v&&v.hasOwnProperty(n)?v[n]:!0,s||a(d.rows[b]).css("display","none")}a(d.rows[b].cells[m]).find("div.treeclick").bind("click",function(b){var c=b.target||b.srcElement,e=a.jgrid.stripPref(d.p.idPrefix,a(c,d.rows).closest("tr.jqgrow")[0].id),f=d.p._index[e];return d.p.data[f][o]||(d.p.data[f][n]?(a(d).jqGrid("collapseRow",d.p.data[f]),a(d).jqGrid("collapseNode",d.p.data[f])):(a(d).jqGrid("expandRow",d.p.data[f]),a(d).jqGrid("expandNode",d.p.data[f]))),!1
}),d.p.ExpandColClick===!0&&a(d.rows[b].cells[m]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(b){var c=b.target||b.srcElement,e=a.jgrid.stripPref(d.p.idPrefix,a(c,d.rows).closest("tr.jqgrow")[0].id),f=d.p._index[e];return d.p.data[f][o]||(d.p.data[f][n]?(a(d).jqGrid("collapseRow",d.p.data[f]),a(d).jqGrid("collapseNode",d.p.data[f])):(a(d).jqGrid("expandRow",d.p.data[f]),a(d).jqGrid("expandNode",d.p.data[f]))),a(d).jqGrid("setSelection",e),!1}),b++}})},setTreeGrid:function(){return this.each(function(){var b,c,d,e,f=this,g=0,h=!1,i=[];if(f.p.treeGrid){f.p.treedatatype||a.extend(f.p,{treedatatype:f.p.datatype}),f.p.subGrid=!1,f.p.altRows=!1,f.p.pgbuttons=!1,f.p.pginput=!1,f.p.gridview=!0,null===f.p.rowTotal&&(f.p.rowNum=f.p.maxRowNum),f.p.multiselect=!1,f.p.rowList=[],f.p.expColInd=0,b="ui-icon-triangle-1-"+("rtl"===f.p.direction?"w":"e"),f.p.treeIcons=a.extend({plus:b,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},f.p.treeIcons||{}),"nested"===f.p.treeGridModel?f.p.treeReader=a.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},f.p.treeReader):"adjacency"===f.p.treeGridModel&&(f.p.treeReader=a.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},f.p.treeReader));for(d in f.p.colModel)if(f.p.colModel.hasOwnProperty(d)){c=f.p.colModel[d].name,c!==f.p.ExpandColumn||h||(h=!0,f.p.expColInd=g),g++;for(e in f.p.treeReader)f.p.treeReader.hasOwnProperty(e)&&f.p.treeReader[e]===c&&i.push(c)}a.each(f.p.treeReader,function(b,c){c&&-1===a.inArray(c,i)&&("leaf_field"===b&&(f.p._treeleafpos=g),g++,f.p.colNames.push(c),f.p.colModel.push({name:c,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(b){this.each(function(){var c=this;if(c.grid&&c.p.treeGrid){var d=a(c).jqGrid("getNodeChildren",b),e=c.p.treeReader.expanded_field;a(d).each(function(){var b=c.p.idPrefix+a.jgrid.getAccessor(this,c.p.localReader.id);a(a(c).jqGrid("getGridRowById",b)).css("display",""),this[e]&&a(c).jqGrid("expandRow",this)})}})},collapseRow:function(b){this.each(function(){var c=this;if(c.grid&&c.p.treeGrid){var d=a(c).jqGrid("getNodeChildren",b),e=c.p.treeReader.expanded_field;a(d).each(function(){var b=c.p.idPrefix+a.jgrid.getAccessor(this,c.p.localReader.id);a(a(c).jqGrid("getGridRowById",b)).css("display","none"),this[e]&&a(c).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var b=[];return this.each(function(){var c=this;if(c.grid&&c.p.treeGrid)switch(c.p.treeGridModel){case"nested":var d=c.p.treeReader.level_field;a(c.p.data).each(function(){parseInt(this[d],10)===parseInt(c.p.tree_root_level,10)&&b.push(this)});break;case"adjacency":var e=c.p.treeReader.parent_id_field;a(c.p.data).each(function(){(null===this[e]||"null"===String(this[e]).toLowerCase())&&b.push(this)})}}),b},getNodeDepth:function(b){var c=null;return this.each(function(){if(this.grid&&this.p.treeGrid){var d=this;switch(d.p.treeGridModel){case"nested":var e=d.p.treeReader.level_field;c=parseInt(b[e],10)-parseInt(d.p.tree_root_level,10);break;case"adjacency":c=a(d).jqGrid("getNodeAncestors",b).length}}}),c},getNodeParent:function(b){var c=null;return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)switch(d.p.treeGridModel){case"nested":var e=d.p.treeReader.left_field,f=d.p.treeReader.right_field,g=d.p.treeReader.level_field,h=parseInt(b[e],10),i=parseInt(b[f],10),j=parseInt(b[g],10);a(this.p.data).each(function(){return parseInt(this[g],10)===j-1&&parseInt(this[e],10)<h&&parseInt(this[f],10)>i?(c=this,!1):void 0});break;case"adjacency":for(var k=d.p.treeReader.parent_id_field,l=d.p.localReader.id,m=b[l],n=d.p._index[m];n--;)if(d.p.data[n][l]===a.jgrid.stripPref(d.p.idPrefix,b[k])){c=d.p.data[n];break}}}),c},getNodeChildren:function(b){var c=[];return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid)switch(d.p.treeGridModel){case"nested":var e=d.p.treeReader.left_field,f=d.p.treeReader.right_field,g=d.p.treeReader.level_field,h=parseInt(b[e],10),i=parseInt(b[f],10),j=parseInt(b[g],10);a(this.p.data).each(function(){parseInt(this[g],10)===j+1&&parseInt(this[e],10)>h&&parseInt(this[f],10)<i&&c.push(this)});break;case"adjacency":var k=d.p.treeReader.parent_id_field,l=d.p.localReader.id;a(this.p.data).each(function(){this[k]==a.jgrid.stripPref(d.p.idPrefix,b[l])&&c.push(this)})}}),c},getFullTreeNode:function(b){var c=[];return this.each(function(){var d,e=this;if(e.grid&&e.p.treeGrid)switch(e.p.treeGridModel){case"nested":var f=e.p.treeReader.left_field,g=e.p.treeReader.right_field,h=e.p.treeReader.level_field,i=parseInt(b[f],10),j=parseInt(b[g],10),k=parseInt(b[h],10);a(this.p.data).each(function(){parseInt(this[h],10)>=k&&parseInt(this[f],10)>=i&&parseInt(this[f],10)<=j&&c.push(this)});break;case"adjacency":if(b){c.push(b);var l=e.p.treeReader.parent_id_field,m=e.p.localReader.id;a(this.p.data).each(function(b){for(d=c.length,b=0;d>b;b++)if(a.jgrid.stripPref(e.p.idPrefix,c[b][m])===this[l]){c.push(this);break}})}}}),c},getNodeAncestors:function(b){var c=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var d=a(this).jqGrid("getNodeParent",b);d;)c.push(d),d=a(this).jqGrid("getNodeParent",d)}),c},isVisibleNode:function(b){var c=!0;return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var e=a(d).jqGrid("getNodeAncestors",b),f=d.p.treeReader.expanded_field;a(e).each(function(){return c=c&&this[f],c?void 0:!1})}}),c},isNodeLoaded:function(b){var c;return this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var e=d.p.treeReader.leaf_field,f=d.p.treeReader.loaded;c=void 0!==b?void 0!==b[f]?b[f]:b[e]||a(d).jqGrid("getNodeChildren",b).length>0?!0:!1:!1}}),c},expandNode:function(b){return this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.treeReader.expanded_field,d=this.p.treeReader.parent_id_field,e=this.p.treeReader.loaded,f=this.p.treeReader.level_field,g=this.p.treeReader.left_field,h=this.p.treeReader.right_field;if(!b[c]){var i=a.jgrid.getAccessor(b,this.p.localReader.id),j=a("#"+this.p.idPrefix+a.jgrid.jqID(i),this.grid.bDiv)[0],k=this.p._index[i];a(this).jqGrid("isNodeLoaded",this.p.data[k])?(b[c]=!0,a("div.treeclick",j).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(b[c]=!0,a("div.treeclick",j).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=j.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:i,n_left:b[g],n_right:b[h],n_level:b[f]}}):a(this).jqGrid("setGridParam",{postData:{nodeid:i,parentid:b[d],n_level:b[f]}}),a(this).trigger("reloadGrid"),b[e]=!0,"nested"===this.p.treeGridModel?a(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):a(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(b){return this.each(function(){if(this.grid&&this.p.treeGrid){var c=this.p.treeReader.expanded_field;if(b[c]){b[c]=!1;var d=a.jgrid.getAccessor(b,this.p.localReader.id),e=a("#"+this.p.idPrefix+a.jgrid.jqID(d),this.grid.bDiv)[0];a("div.treeclick",e).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}}})},SortTree:function(b,c,d,e){return this.each(function(){if(this.grid&&this.p.treeGrid){var f,g,h,i,j,k=[],l=this,m=a(this).jqGrid("getRootNodes");for(i=a.jgrid.from(m),i.orderBy(b,c,d,e),j=i.select(),f=0,g=j.length;g>f;f++)h=j[f],k.push(h),a(this).jqGrid("collectChildrenSortTree",k,h,b,c,d,e);a.each(k,function(b){var c=a.jgrid.getAccessor(this,l.p.localReader.id);a("#"+a.jgrid.jqID(l.p.id)+" tbody tr:eq("+b+")").after(a("tr#"+a.jgrid.jqID(c),l.grid.bDiv))}),i=null,j=null,k=null}})},collectChildrenSortTree:function(b,c,d,e,f,g){return this.each(function(){if(this.grid&&this.p.treeGrid){var h,i,j,k,l,m;for(k=a(this).jqGrid("getNodeChildren",c),l=a.jgrid.from(k),l.orderBy(d,e,f,g),m=l.select(),h=0,i=m.length;i>h;h++)j=m[h],b.push(j),a(this).jqGrid("collectChildrenSortTree",b,j,d,e,f,g)}})},setTreeRow:function(b,c){var d=!1;return this.each(function(){var e=this;e.grid&&e.p.treeGrid&&(d=a(e).jqGrid("setRowData",b,c))}),d},delTreeNode:function(b){return this.each(function(){var c,d,e,f,g,h=this,i=h.p.localReader.id,j=h.p.treeReader.left_field,k=h.p.treeReader.right_field;if(h.grid&&h.p.treeGrid){var l=h.p._index[b];if(void 0!==l){d=parseInt(h.p.data[l][k],10),e=d-parseInt(h.p.data[l][j],10)+1;var m=a(h).jqGrid("getFullTreeNode",h.p.data[l]);if(m.length>0)for(c=0;c<m.length;c++)a(h).jqGrid("delRowData",m[c][i]);if("nested"===h.p.treeGridModel){if(f=a.jgrid.from(h.p.data).greater(j,d,{stype:"integer"}).select(),f.length)for(g in f)f.hasOwnProperty(g)&&(f[g][j]=parseInt(f[g][j],10)-e);if(f=a.jgrid.from(h.p.data).greater(k,d,{stype:"integer"}).select(),f.length)for(g in f)f.hasOwnProperty(g)&&(f[g][k]=parseInt(f[g][k],10)-e)}}}})},addChildNode:function(b,c,d,e){var f=this[0];if(d){var g,h,i,j,k,l,m,n,o=f.p.treeReader.expanded_field,p=f.p.treeReader.leaf_field,q=f.p.treeReader.level_field,r=f.p.treeReader.parent_id_field,s=f.p.treeReader.left_field,t=f.p.treeReader.right_field,u=f.p.treeReader.loaded,v=0,w=c;if(void 0===e&&(e=!1),null==b){if(k=f.p.data.length-1,k>=0)for(;k>=0;)v=Math.max(v,parseInt(f.p.data[k][f.p.localReader.id],10)),k--;b=v+1}var x=a(f).jqGrid("getInd",c);if(m=!1,void 0===c||null===c||""===c)c=null,w=null,g="last",j=f.p.tree_root_level,k=f.p.data.length+1;else{g="after",h=f.p._index[c],i=f.p.data[h],c=i[f.p.localReader.id],j=parseInt(i[q],10)+1;var y=a(f).jqGrid("getFullTreeNode",i);y.length?(k=y[y.length-1][f.p.localReader.id],w=k,k=a(f).jqGrid("getInd",w)+1):k=a(f).jqGrid("getInd",c)+1,i[p]&&(m=!0,i[o]=!0,a(f.rows[x]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(f.p.treeIcons.leaf+" tree-leaf").addClass(f.p.treeIcons.minus+" tree-minus"),f.p.data[h][p]=!1,i[u]=!0)}if(l=k+1,void 0===d[o]&&(d[o]=!1),void 0===d[u]&&(d[u]=!1),d[q]=j,void 0===d[p]&&(d[p]=!0),"adjacency"===f.p.treeGridModel&&(d[r]=c),"nested"===f.p.treeGridModel){var z,A,B;if(null!==c){if(n=parseInt(i[t],10),z=a.jgrid.from(f.p.data),z=z.greaterOrEquals(t,n,{stype:"integer"}),A=z.select(),A.length)for(B in A)A.hasOwnProperty(B)&&(A[B][s]=A[B][s]>n?parseInt(A[B][s],10)+2:A[B][s],A[B][t]=A[B][t]>=n?parseInt(A[B][t],10)+2:A[B][t]);d[s]=n,d[t]=n+1}else{if(n=parseInt(a(f).jqGrid("getCol",t,!1,"max"),10),A=a.jgrid.from(f.p.data).greater(s,n,{stype:"integer"}).select(),A.length)for(B in A)A.hasOwnProperty(B)&&(A[B][s]=parseInt(A[B][s],10)+2);if(A=a.jgrid.from(f.p.data).greater(t,n,{stype:"integer"}).select(),A.length)for(B in A)A.hasOwnProperty(B)&&(A[B][t]=parseInt(A[B][t],10)+2);d[s]=n+1,d[t]=n+2}}(null===c||a(f).jqGrid("isNodeLoaded",i)||m)&&(a(f).jqGrid("addRowData",b,d,g,w),a(f).jqGrid("setTreeNode",k,l)),i&&!i[o]&&e&&a(f.rows[x]).find("div.treeclick").click()}}})}(jQuery);var xmlJsonClass={xml2json:function(a,b){9===a.nodeType&&(a=a.documentElement);var c=this.removeWhite(a),d=this.toObj(c),e=this.toJson(d,a.nodeName,"	");return"{\n"+b+(b?e.replace(/\t/g,b):e.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,b){var c,d=function(a,b,c){var e,f,g="";if(a instanceof Array)if(0===a.length)g+=c+"<"+b+">__EMPTY_ARRAY_</"+b+">\n";else for(e=0,f=a.length;f>e;e+=1){var h=c+d(a[e],b,c+"	")+"\n";g+=h}else if("object"==typeof a){var i=!1;g+=c+"<"+b;var j;for(j in a)a.hasOwnProperty(j)&&("@"===j.charAt(0)?g+=" "+j.substr(1)+'="'+a[j].toString()+'"':i=!0);if(g+=i?">":"/>",i){for(j in a)a.hasOwnProperty(j)&&("#text"===j?g+=a[j]:"#cdata"===j?g+="<![CDATA["+a[j]+"]]>":"@"!==j.charAt(0)&&(g+=d(a[j],j,c+"	")));g+=("\n"===g.charAt(g.length-1)?c:"")+"</"+b+">"}}else"function"==typeof a?g+=c+"<"+b+"><![CDATA["+a+"]]></"+b+">":(void 0===a&&(a=""),g+='""'===a.toString()||0===a.toString().length?c+"<"+b+">__EMPTY_STRING_</"+b+">":c+"<"+b+">"+a.toString()+"</"+b+">");return g},e="";for(c in a)a.hasOwnProperty(c)&&(e+=d(a[c],c,""));return b?e.replace(/\t/g,b):e.replace(/\t|\n/g,"")},toObj:function(a){var b={},c=/function/i;if(1===a.nodeType){if(a.attributes.length){var d;for(d=0;d<a.attributes.length;d+=1)b["@"+a.attributes[d].nodeName]=(a.attributes[d].nodeValue||"").toString()}if(a.firstChild){var e,f=0,g=0,h=!1;for(e=a.firstChild;e;e=e.nextSibling)1===e.nodeType?h=!0:3===e.nodeType&&e.nodeValue.match(/[^ \f\n\r\t\v]/)?f+=1:4===e.nodeType&&(g+=1);if(h)if(2>f&&2>g)for(this.removeWhite(a),e=a.firstChild;e;e=e.nextSibling)3===e.nodeType?b["#text"]=this.escape(e.nodeValue):4===e.nodeType?c.test(e.nodeValue)?b[e.nodeName]=[b[e.nodeName],e.nodeValue]:b["#cdata"]=this.escape(e.nodeValue):b[e.nodeName]?b[e.nodeName]instanceof Array?b[e.nodeName][b[e.nodeName].length]=this.toObj(e):b[e.nodeName]=[b[e.nodeName],this.toObj(e)]:b[e.nodeName]=this.toObj(e);else a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):b=this.escape(this.innerXml(a));else if(f)a.attributes.length?b["#text"]=this.escape(this.innerXml(a)):(b=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===b?b="[]":"__EMPTY_STRING_"===b&&(b=""));else if(g)if(g>1)b=this.escape(this.innerXml(a));else for(e=a.firstChild;e;e=e.nextSibling){if(c.test(a.firstChild.nodeValue)){b=a.firstChild.nodeValue;break}b["#cdata"]=this.escape(e.nodeValue)}}a.attributes.length||a.firstChild||(b=null)}else 9===a.nodeType?b=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return b},toJson:function(a,b,c,d){void 0===d&&(d=!0);var e=b?'"'+b+'"':"",f="	",g="\n";if(d||(f="",g=""),"[]"===a)e+=b?":[]":"[]";else if(a instanceof Array){var h,i,j=[];for(i=0,h=a.length;h>i;i+=1)j[i]=this.toJson(a[i],"",c+f,d);e+=(b?":[":"[")+(j.length>1?g+c+f+j.join(","+g+c+f)+g+c:j.join(""))+"]"}else if(null===a)e+=(b&&":")+"null";else if("object"==typeof a){var k,l=[];for(k in a)a.hasOwnProperty(k)&&(l[l.length]=this.toJson(a[k],k,c+f,d));e+=(b?":{":"{")+(l.length>1?g+c+f+l.join(","+g+c+f)+g+c:l.join(""))+"}"}else e+="string"==typeof a?(b&&":")+'"'+a.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(b&&":")+a.toString();return e},innerXml:function(a){var b="";if("innerHTML"in a)b=a.innerHTML;else for(var c=function(a){var b,d="";if(1===a.nodeType){for(d+="<"+a.nodeName,b=0;b<a.attributes.length;b+=1)d+=" "+a.attributes[b].nodeName+'="'+(a.attributes[b].nodeValue||"").toString()+'"';if(a.firstChild){d+=">";for(var e=a.firstChild;e;e=e.nextSibling)d+=c(e);d+="</"+a.nodeName+">"}else d+="/>"}else 3===a.nodeType?d+=a.nodeValue:4===a.nodeType&&(d+="<![CDATA["+a.nodeValue+"]]>");return d},d=a.firstChild;d;d=d.nextSibling)b+=c(d);return b},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var b;for(b=a.firstChild;b;)if(3===b.nodeType)if(b.nodeValue.match(/[^ \f\n\r\t\v]/))b=b.nextSibling;else{var c=b.nextSibling;a.removeChild(b),b=c}else 1===b.nodeType?(this.removeWhite(b),b=b.nextSibling):b=b.nextSibling;return a}};!function(a){a.fn.jqDrag=function(a){return g(this,a,"d")},a.fn.jqResize=function(a,b){return g(this,a,"r",b)},a.jqDnR={dnr:{},e:0,drag:function(a){return"d"==e.k?f.css({left:e.X+a.pageX-e.pX,top:e.Y+a.pageY-e.pY}):(f.css({width:Math.max(a.pageX-e.pX+e.W,0),height:Math.max(a.pageY-e.pY+e.H,0)}),c&&b.css({width:Math.max(a.pageX-c.pX+c.W,0),height:Math.max(a.pageY-c.pY+c.H,0)})),!1},stop:function(){a(document).unbind("mousemove",d.drag).unbind("mouseup",d.stop)}};var b,c,d=a.jqDnR,e=d.dnr,f=d.e,g=function(d,g,j,k){return d.each(function(){g=g?a(g,d):d,g.bind("mousedown",{e:d,k:j},function(d){var g=d.data,j={};if(f=g.e,b=k?a(k):!1,"relative"!=f.css("position"))try{f.position(j)}catch(l){}if(e={X:j.left||h("left")||0,Y:j.top||h("top")||0,W:h("width")||f[0].scrollWidth||0,H:h("height")||f[0].scrollHeight||0,pX:d.pageX,pY:d.pageY,k:g.k},c=b&&"d"!=g.k?{X:j.left||i("left")||0,Y:j.top||i("top")||0,W:b[0].offsetWidth||i("width")||0,H:b[0].offsetHeight||i("height")||0,pX:d.pageX,pY:d.pageY,k:g.k}:!1,a("input.hasDatepicker",f[0])[0])try{a("input.hasDatepicker",f[0]).datepicker("hide")}catch(m){}return a(document).mousemove(a.jqDnR.drag).mouseup(a.jqDnR.stop),!1})})},h=function(a){return parseInt(f.css(a),10)||!1},i=function(a){return parseInt(b.css(a),10)||!1}}(jQuery),function(a){a.fn.jqm=function(d){var f={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:e,ajaxText:"",target:e,modal:e,toTop:e,onShow:e,onHide:e,onLoad:e};return this.each(function(){return this._jqm?c[this._jqm].c=a.extend({},c[this._jqm].c,d):(b++,this._jqm=b,c[b]={c:a.extend(f,a.jqm.params,d),a:e,w:a(this).addClass("jqmID"+b),s:b},void(f.trigger&&a(this).jqmAddTrigger(f.trigger)))})},a.fn.jqmAddClose=function(a){return j(this,a,"jqmHide")},a.fn.jqmAddTrigger=function(a){return j(this,a,"jqmShow")},a.fn.jqmShow=function(b){return this.each(function(){a.jqm.open(this._jqm,b)})},a.fn.jqmHide=function(b){return this.each(function(){a.jqm.close(this._jqm,b)})},a.jqm={hash:{},open:function(b,g){var i=c[b],j=i.c,k="."+j.closeClass,l=parseInt(i.w.css("z-index"));l=l>0?l:3e3;var m=a("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":l-1,opacity:j.overlay/100});if(i.a)return e;if(i.t=g,i.a=!0,i.w.css("z-index",l),j.modal?(d[0]||setTimeout(function(){h("bind")},1),d.push(b)):j.overlay>0?j.closeoverlay&&i.w.jqmAddClose(m):m=e,i.o=m?m.addClass(j.overlayClass).prependTo("body"):e,j.ajax){var n=j.target||i.w,o=j.ajax;n="string"==typeof n?a(n,i.w):a(n),o="@"==o.substr(0,1)?a(g).attr(o.substring(1)):o,n.html(j.ajaxText).load(o,function(){j.onLoad&&j.onLoad.call(this,i),k&&i.w.jqmAddClose(a(k,i.w)),f(i)})}else k&&i.w.jqmAddClose(a(k,i.w));return j.toTop&&i.o&&i.w.before('<span id="jqmP'+i.w[0]._jqm+'"></span>').insertAfter(i.o),j.onShow?j.onShow(i):i.w.show(),f(i),e},close:function(b){var f=c[b];return f.a?(f.a=e,d[0]&&(d.pop(),d[0]||h("unbind")),f.c.toTop&&f.o&&a("#jqmP"+f.w[0]._jqm).after(f.w).remove(),f.c.onHide?f.c.onHide(f):(f.w.hide(),f.o&&f.o.remove()),e):e},params:{}};var b=0,c=a.jqm.hash,d=[],e=!1,f=function(a){g(a)},g=function(b){try{a(":input:visible",b.w)[0].focus()}catch(c){}},h=function(b){a(document)[b]("keypress",i)[b]("keydown",i)[b]("mousedown",i)},i=function(b){var e=c[d[d.length-1]],f=!a(b.target).parents(".jqmID"+e.s)[0];return f&&(a(".jqmID"+e.s).each(function(){var c=a(this),d=c.offset();return d.top<=b.pageY&&b.pageY<=d.top+c.height()&&d.left<=b.pageX&&b.pageX<=d.left+c.width()?(f=!1,!1):void 0}),g(e)),!f},j=function(b,d,f){return b.each(function(){var b=this._jqm;a(d).each(function(){this[f]||(this[f]=[],a(this).click(function(){for(var a in{jqmShow:1,jqmHide:1})for(var b in this[a])c[this[a][b]]&&c[this[a][b]].w[a](this);return e})),this[f].push(b)})})}}(jQuery),function(a){"use strict";a.fmatter={},a.extend(a.fmatter,{isBoolean:function(a){return"boolean"==typeof a},isObject:function(b){return b&&("object"==typeof b||a.isFunction(b))||!1},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a&&isFinite(a)},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a)},isEmpty:function(b){return!this.isString(b)&&this.isValue(b)?!1:this.isValue(b)?(b=a.trim(b).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===b):!0}}),a.fn.fmatter=function(b,c,d,e,f){d=a.extend({},a.jgrid.formatter,d);try{c=a.fn.fmatter[b].call(this,c,d,e,f)}catch(g){}return c},a.fmatter.util={NumberFormat:function(b,c){if(a.fmatter.isNumber(b)||(b*=1),a.fmatter.isNumber(b)){var d,e=0>b,f=String(b),g=c.decimalSeparator||".";if(a.fmatter.isNumber(c.decimalPlaces)){var h=c.decimalPlaces,i=Math.pow(10,h);if(f=String(Math.round(b*i)/i),d=f.lastIndexOf("."),h>0)for(0>d?(f+=g,d=f.length-1):"."!==g&&(f=f.replace(".",g));f.length-1-d<h;)f+="0"}if(c.thousandsSeparator){var j=c.thousandsSeparator;d=f.lastIndexOf(g),d=d>-1?d:f.length;var k,l=f.substring(d),m=-1;for(k=d;k>0;k--)m++,m%3===0&&k!==d&&(!e||k>1)&&(l=j+l),l=f.charAt(k-1)+l;f=l}return f=c.prefix?c.prefix+f:f,f=c.suffix?f+c.suffix:f}return b}},a.fn.fmatter.defaultFormat=function(b,c){return a.fmatter.isValue(b)&&""!==b?b:c.defaultValue||"&#160;"},a.fn.fmatter.email=function(b,c){return a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):'<a href="mailto:'+b+'">'+b+"</a>"},a.fn.fmatter.checkbox=function(b,c){var d=a.extend({},c.checkbox),e="";void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),d.disabled===!0&&(e='disabled="disabled"'),(a.fmatter.isEmpty(b)||void 0===b)&&(b=a.fn.fmatter.defaultFormat(b,d)),b=String(b),b=(b+"").toLowerCase();var f=b.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+f+' value="'+b+'" offval="no" '+e+"/>"},a.fn.fmatter.link=function(b,c){var d={target:c.target},e="";return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(d=a.extend({},d,c.colModel.formatoptions)),d.target&&(e="target="+d.target),a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):"<a "+e+' href="'+b+'">'+b+"</a>"},a.fn.fmatter.showlink=function(b,c){var d,e={baseLinkUrl:c.baseLinkUrl,showAction:c.showAction,addParam:c.addParam||"",target:c.target,idName:c.idName},f="";return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(e=a.extend({},e,c.colModel.formatoptions)),e.target&&(f="target="+e.target),d=e.baseLinkUrl+e.showAction+"?"+e.idName+"="+c.rowId+e.addParam,a.fmatter.isString(b)||a.fmatter.isNumber(b)?"<a "+f+' href="'+d+'">'+b+"</a>":a.fn.fmatter.defaultFormat(b,c)};var b=function(b,c,d){var e=a.extend({},c[d]);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(e=a.extend({},e,c.colModel.formatoptions)),a.fmatter.isEmpty(b)?e.defaultValue:a.fmatter.util.NumberFormat(b,e)};a.fn.fmatter.integer=function(a,c){return b(a,c,"integer")},a.fn.fmatter.number=function(a,c){return b(a,c,"number")},a.fn.fmatter.currency=function(a,c){return b(a,c,"currency")},a.fn.fmatter.date=function(b,c,d,e){var f=a.extend({},c.date);return void 0!==c.colModel&&void 0!==c.colModel.formatoptions&&(f=a.extend({},f,c.colModel.formatoptions)),f.reformatAfterEdit||"edit"!==e?a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):a.jgrid.parseDate(f.srcformat,b,f.newformat,f):a.fn.fmatter.defaultFormat(b,c)},a.fn.fmatter.select=function(b,c){b=String(b);var d,e,f=!1,g=[];if(void 0!==c.colModel.formatoptions?(f=c.colModel.formatoptions.value,d=void 0===c.colModel.formatoptions.separator?":":c.colModel.formatoptions.separator,e=void 0===c.colModel.formatoptions.delimiter?";":c.colModel.formatoptions.delimiter):void 0!==c.colModel.editoptions&&(f=c.colModel.editoptions.value,d=void 0===c.colModel.editoptions.separator?":":c.colModel.editoptions.separator,e=void 0===c.colModel.editoptions.delimiter?";":c.colModel.editoptions.delimiter),f){var h,i=(null!=c.colModel.editoptions&&c.colModel.editoptions.multiple===!0)==!0?!0:!1,j=[];if(i&&(j=b.split(","),j=a.map(j,function(b){return a.trim(b)})),a.fmatter.isString(f)){var k,l=f.split(e),m=0;for(k=0;k<l.length;k++)if(h=l[k].split(d),h.length>2&&(h[1]=a.map(h,function(a,b){return b>0?a:void 0}).join(d)),i)a.inArray(h[0],j)>-1&&(g[m]=h[1],m++);else if(a.trim(h[0])===a.trim(b)){g[0]=h[1];break}}else a.fmatter.isObject(f)&&(i?g=a.map(j,function(a){return f[a]}):g[0]=f[b]||"")}return b=g.join(", "),""===b?a.fn.fmatter.defaultFormat(b,c):b},a.fn.fmatter.rowactions=function(b){var c=a(this).closest("tr.jqgrow"),d=c.attr("id"),e=a(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),f=a("#"+a.jgrid.jqID(e)),g=f[0],h=g.p,i=h.colModel[a.jgrid.getCellIndex(this)],j=i.frozen?a("tr#"+a.jgrid.jqID(d)+" td:eq("+a.jgrid.getCellIndex(this)+") > div",f):a(this).parent(),k={extraparam:{}},l=function(b,c){a.isFunction(k.afterSave)&&k.afterSave.call(g,b,c),j.find("div.ui-inline-edit,div.ui-inline-del").show(),j.find("div.ui-inline-save,div.ui-inline-cancel").hide()},m=function(b){a.isFunction(k.afterRestore)&&k.afterRestore.call(g,b),j.find("div.ui-inline-edit,div.ui-inline-del").show(),j.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==i.formatoptions&&(k=a.extend(k,i.formatoptions)),void 0!==h.editOptions&&(k.editOptions=h.editOptions),void 0!==h.delOptions&&(k.delOptions=h.delOptions),c.hasClass("jqgrid-new-row")&&(k.extraparam[h.prmNames.oper]=h.prmNames.addoper);var n={keys:k.keys,oneditfunc:k.onEdit,successfunc:k.onSuccess,url:k.url,extraparam:k.extraparam,aftersavefunc:l,errorfunc:k.onError,afterrestorefunc:m,restoreAfterError:k.restoreAfterError,mtype:k.mtype};switch(b){case"edit":f.jqGrid("editRow",d,n),j.find("div.ui-inline-edit,div.ui-inline-del").hide(),j.find("div.ui-inline-save,div.ui-inline-cancel").show(),f.triggerHandler("jqGridAfterGridComplete");break;case"save":f.jqGrid("saveRow",d,n)&&(j.find("div.ui-inline-edit,div.ui-inline-del").show(),j.find("div.ui-inline-save,div.ui-inline-cancel").hide(),f.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":f.jqGrid("restoreRow",d,m),j.find("div.ui-inline-edit,div.ui-inline-del").show(),j.find("div.ui-inline-save,div.ui-inline-cancel").hide(),f.triggerHandler("jqGridAfterGridComplete");break;case"del":f.jqGrid("delGridRow",d,k.delOptions);break;case"formedit":f.jqGrid("setSelection",d),f.jqGrid("editGridRow",d,k.editOptions)}},a.fn.fmatter.actions=function(b,c){var d,e={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},f=a.jgrid.nav,g=a.jgrid.edit,h=c.rowId,i="";return void 0!==c.colModel.formatoptions&&(e=a.extend(e,c.colModel.formatoptions)),void 0===h||a.fmatter.isEmpty(h)?"":(e.editformbutton?(d="id='jEditButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",i+="<div title='"+f.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+d+"><span class='ui-icon ui-icon-pencil'></span></div>"):e.editbutton&&(d="id='jEditButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",i+="<div title='"+f.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+d+"><span class='ui-icon ui-icon-pencil'></span></div>"),e.delbutton&&(d="id='jDeleteButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",i+="<div title='"+f.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+d+"><span class='ui-icon ui-icon-trash'></span></div>"),d="id='jSaveButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",i+="<div title='"+g.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+d+"><span class='ui-icon ui-icon-disk'></span></div>",d="id='jCancelButton_"+h+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",i+="<div title='"+g.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+d+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+i+"</div>")},a.unformat=function(b,c,d,e){var f,g,h=c.colModel.formatter,i=c.colModel.formatoptions||{},j=/([\.\*\_\'\(\)\{\}\+\?\\])/g,k=c.colModel.unformat||a.fn.fmatter[h]&&a.fn.fmatter[h].unformat;if(b instanceof jQuery&&b.length>0&&(b=b[0]),c.colModel.autoResizable&&null!=b&&a(b.firstChild).hasClass(this.p.autoResizing.wrapperClassName)&&(b=b.firstChild),void 0!==k&&a.isFunction(k))f=k.call(this,a(b).text(),c,b);else if(void 0!==h&&a.fmatter.isString(h)){var l,m=a.jgrid.formatter||{};switch(h){case"integer":i=a.extend({},m.integer,i),g=i.thousandsSeparator.replace(j,"\\$1"),l=new RegExp(g,"g"),f=a(b).text().replace(l,"");break;case"number":i=a.extend({},m.number,i),g=i.thousandsSeparator.replace(j,"\\$1"),l=new RegExp(g,"g"),f=a(b).text().replace(l,"").replace(i.decimalSeparator,".");break;case"currency":i=a.extend({},m.currency,i),g=i.thousandsSeparator.replace(j,"\\$1"),l=new RegExp(g,"g"),f=a(b).text(),i.prefix&&i.prefix.length&&(f=f.substr(i.prefix.length)),i.suffix&&i.suffix.length&&(f=f.substr(0,f.length-i.suffix.length)),f=f.replace(l,"").replace(i.decimalSeparator,".");break;case"checkbox":var n=null!=c.colModel.editoptions&&"string"==typeof c.colModel.editoptions.value?c.colModel.editoptions.value.split(":"):["Yes","No"];f=a("input",b).is(":checked")?n[0]:n[1];break;case"select":f=a.unformat.select(b,c,d,e);break;case"actions":return"";default:f=a(b).text()}}return f=void 0!==f?f:e===!0?a(b).text():a.jgrid.htmlDecode(a(b).html())},a.unformat.select=function(b,c,d,e){var f=[],g=a(b).text();if(e===!0)return g;var h=a.extend({},void 0!==c.colModel.formatoptions?c.colModel.formatoptions:c.colModel.editoptions),i=void 0===h.separator?":":h.separator,j=void 0===h.delimiter?";":h.delimiter;if(h.value){var k,l=h.value,m=h.multiple===!0?!0:!1,n=[];if(m&&(n=g.split(","),n=a.map(n,function(b){return a.trim(b)})),a.fmatter.isString(l)){var o,p=l.split(j),q=0;for(o=0;o<p.length;o++)if(k=p[o].split(i),k.length>2&&(k[1]=a.map(k,function(a,b){return b>0?a:void 0}).join(i)),m)a.inArray(k[1],n)>-1&&(f[q]=k[0],q++);else if(a.trim(k[1])===a.trim(g)){f[0]=k[0];break}}else(a.fmatter.isObject(l)||a.isArray(l))&&(m||(n[0]=g),f=a.map(n,function(b){var c;return a.each(l,function(a,d){return d===b?(c=a,!1):void 0}),void 0!==c?c:void 0}));return f.join(", ")}return g||""},a.unformat.date=function(b,c){var d=a.jgrid.formatter.date||{};return void 0!==c.formatoptions&&(d=a.extend({},d,c.formatoptions)),a.fmatter.isEmpty(b)?a.fn.fmatter.defaultFormat(b,c):a.jgrid.parseDate(d.newformat,b,d.srcformat,d)}}(jQuery);